(function(){"use strict";const{min:Fr,max:Yr}=Math,Nt=(t,e=0,n=1)=>Fr(Yr(e,t),n),de=t=>{t._clipped=!1,t._unclipped=t.slice(0);for(let e=0;e<=3;e++)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]=Nt(t[e],0,255)):e===3&&(t[e]=Nt(t[e],0,1));return t},sn={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])sn[`[object ${t}]`]=t.toLowerCase();function _(t){return sn[Object.prototype.toString.call(t)]||"object"}const C=(t,e=null)=>t.length>=3?Array.prototype.slice.call(t):_(t[0])=="object"&&e?e.split("").filter(n=>t[0][n]!==void 0).map(n=>t[0][n]):t[0].slice(0),Ot=t=>{if(t.length<2)return null;const e=t.length-1;return _(t[e])=="string"?t[e].toLowerCase():null},{PI:Xt,min:ln,max:cn}=Math,W=t=>Math.round(t*100)/100,pe=t=>Math.round(t*100)/100,it=Xt*2,be=Xt/3,Xr=Xt/180,Zr=180/Xt;function un(t){return[...t.slice(0,3).reverse(),...t.slice(3)]}const E={format:{},autodetect:[]};class b{constructor(...e){const n=this;if(_(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let r=Ot(e),a=!1;if(!r){a=!0,E.sorted||(E.autodetect=E.autodetect.sort((o,s)=>s.p-o.p),E.sorted=!0);for(let o of E.autodetect)if(r=o.test(...e),r)break}if(E.format[r]){const o=E.format[r].apply(null,a?e:e.slice(0,-1));n._rgb=de(o)}else throw new Error("unknown format: "+e);n._rgb.length===3&&n._rgb.push(1)}toString(){return _(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const Wr="3.2.0",P=(...t)=>new b(...t);P.version=Wr;const Et={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Ur=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Vr=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,hn=t=>{if(t.match(Ur)){(t.length===4||t.length===7)&&(t=t.substr(1)),t.length===3&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=parseInt(t,16),n=e>>16,r=e>>8&255,a=e&255;return[n,r,a,1]}if(t.match(Vr)){(t.length===5||t.length===9)&&(t=t.substr(1)),t.length===4&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16),n=e>>24&255,r=e>>16&255,a=e>>8&255,o=Math.round((e&255)/255*100)/100;return[n,r,a,o]}throw new Error(`unknown hex color: ${t}`)},{round:Zt}=Math,fn=(...t)=>{let[e,n,r,a]=C(t,"rgba"),o=Ot(t)||"auto";a===void 0&&(a=1),o==="auto"&&(o=a<1?"rgba":"rgb"),e=Zt(e),n=Zt(n),r=Zt(r);let s="000000"+(e<<16|n<<8|r).toString(16);s=s.substr(s.length-6);let i="0"+Zt(a*255).toString(16);switch(i=i.substr(i.length-2),o.toLowerCase()){case"rgba":return`#${s}${i}`;case"argb":return`#${i}${s}`;default:return`#${s}`}};b.prototype.name=function(){const t=fn(this._rgb,"rgb");for(let e of Object.keys(Et))if(Et[e]===t)return e.toLowerCase();return t},E.format.named=t=>{if(t=t.toLowerCase(),Et[t])return hn(Et[t]);throw new Error("unknown color name: "+t)},E.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&_(t)==="string"&&Et[t.toLowerCase()])return"named"}}),b.prototype.alpha=function(t,e=!1){return t!==void 0&&_(t)==="number"?e?(this._rgb[3]=t,this):new b([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},b.prototype.clipped=function(){return this._rgb._clipped||!1};const rt={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},Jr=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function lt(t){const e=Jr.get(String(t).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+t);rt.labWhitePoint=t,rt.Xn=e[0],rt.Zn=e[1]}function qt(){return rt.labWhitePoint}const ge=(...t)=>{t=C(t,"lab");const[e,n,r]=t,[a,o,s]=Qr(e,n,r),[i,l,c]=dn(a,o,s);return[i,l,c,t.length>3?t[3]:1]},Qr=(t,e,n)=>{const{kE:r,kK:a,kKE:o,Xn:s,Yn:i,Zn:l}=rt,c=(t+16)/116,u=.002*e+c,h=c-.005*n,f=u*u*u,d=h*h*h,m=f>r?f:(116*u-16)/a,y=t>o?Math.pow((t+16)/116,3):t/a,v=d>r?d:(116*h-16)/a,M=m*s,L=y*i,D=v*l;return[M,L,D]},me=t=>{const e=Math.sign(t);return t=Math.abs(t),(t<=.0031308?t*12.92:1.055*Math.pow(t,1/2.4)-.055)*e},dn=(t,e,n)=>{const{MtxAdaptMa:r,MtxAdaptMaI:a,MtxXYZ2RGB:o,RefWhiteRGB:s,Xn:i,Yn:l,Zn:c}=rt,u=i*r.m00+l*r.m10+c*r.m20,h=i*r.m01+l*r.m11+c*r.m21,f=i*r.m02+l*r.m12+c*r.m22,d=s.X*r.m00+s.Y*r.m10+s.Z*r.m20,m=s.X*r.m01+s.Y*r.m11+s.Z*r.m21,y=s.X*r.m02+s.Y*r.m12+s.Z*r.m22,v=(t*r.m00+e*r.m10+n*r.m20)*(d/u),M=(t*r.m01+e*r.m11+n*r.m21)*(m/h),L=(t*r.m02+e*r.m12+n*r.m22)*(y/f),D=v*a.m00+M*a.m10+L*a.m20,S=v*a.m01+M*a.m11+L*a.m21,I=v*a.m02+M*a.m12+L*a.m22,R=me(D*o.m00+S*o.m10+I*o.m20),$=me(D*o.m01+S*o.m11+I*o.m21),p=me(D*o.m02+S*o.m12+I*o.m22);return[R*255,$*255,p*255]},ve=(...t)=>{const[e,n,r,...a]=C(t,"rgb"),[o,s,i]=pn(e,n,r),[l,c,u]=Tr(o,s,i);return[l,c,u,...a.length>0&&a[0]<1?[a[0]]:[]]};function Tr(t,e,n){const{Xn:r,Yn:a,Zn:o,kE:s,kK:i}=rt,l=t/r,c=e/a,u=n/o,h=l>s?Math.pow(l,1/3):(i*l+16)/116,f=c>s?Math.pow(c,1/3):(i*c+16)/116,d=u>s?Math.pow(u,1/3):(i*u+16)/116;return[116*f-16,500*(h-f),200*(f-d)]}function Me(t){const e=Math.sign(t);return t=Math.abs(t),(t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))*e}const pn=(t,e,n)=>{t=Me(t/255),e=Me(e/255),n=Me(n/255);const{MtxRGB2XYZ:r,MtxAdaptMa:a,MtxAdaptMaI:o,Xn:s,Yn:i,Zn:l,As:c,Bs:u,Cs:h}=rt;let f=t*r.m00+e*r.m10+n*r.m20,d=t*r.m01+e*r.m11+n*r.m21,m=t*r.m02+e*r.m12+n*r.m22;const y=s*a.m00+i*a.m10+l*a.m20,v=s*a.m01+i*a.m11+l*a.m21,M=s*a.m02+i*a.m12+l*a.m22;let L=f*a.m00+d*a.m10+m*a.m20,D=f*a.m01+d*a.m11+m*a.m21,S=f*a.m02+d*a.m12+m*a.m22;return L*=y/c,D*=v/u,S*=M/h,f=L*o.m00+D*o.m10+S*o.m20,d=L*o.m01+D*o.m11+S*o.m21,m=L*o.m02+D*o.m12+S*o.m22,[f,d,m]};b.prototype.lab=function(){return ve(this._rgb)},Object.assign(P,{lab:(...t)=>new b(...t,"lab"),getLabWhitePoint:qt,setLabWhitePoint:lt}),E.format.lab=ge,E.autodetect.push({p:2,test:(...t)=>{if(t=C(t,"lab"),_(t)==="array"&&t.length===3)return"lab"}}),b.prototype.darken=function(t=1){const e=this,n=e.lab();return n[0]-=rt.Kn*t,new b(n,"lab").alpha(e.alpha(),!0)},b.prototype.brighten=function(t=1){return this.darken(-t)},b.prototype.darker=b.prototype.darken,b.prototype.brighter=b.prototype.brighten,b.prototype.get=function(t){const[e,n]=t.split("."),r=this[e]();if(n){const a=e.indexOf(n)-(e.substr(0,2)==="ok"?2:0);if(a>-1)return r[a];throw new Error(`unknown channel ${n} in mode ${e}`)}else return r};const{pow:ta}=Math,ea=1e-7,na=20;b.prototype.luminance=function(t,e="rgb"){if(t!==void 0&&_(t)==="number"){if(t===0)return new b([0,0,0,this._rgb[3]],"rgb");if(t===1)return new b([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),r=na;const a=(s,i)=>{const l=s.interpolate(i,.5,e),c=l.luminance();return Math.abs(t-c)<ea||!r--?l:c>t?a(s,l):a(l,i)},o=(n>t?a(new b([0,0,0]),this):a(this,new b([255,255,255]))).rgb();return new b([...o,this._rgb[3]])}return ra(...this._rgb.slice(0,3))};const ra=(t,e,n)=>(t=ye(t),e=ye(e),n=ye(n),.2126*t+.7152*e+.0722*n),ye=t=>(t/=255,t<=.03928?t/12.92:ta((t+.055)/1.055,2.4)),z={},Ct=(t,e,n=.5,...r)=>{let a=r[0]||"lrgb";if(!z[a]&&!r.length&&(a=Object.keys(z)[0]),!z[a])throw new Error(`interpolation mode ${a} is not defined`);return _(t)!=="object"&&(t=new b(t)),_(e)!=="object"&&(e=new b(e)),z[a](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))};b.prototype.mix=b.prototype.interpolate=function(t,e=.5,...n){return Ct(this,t,e,...n)},b.prototype.premultiply=function(t=!1){const e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new b([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};const{sin:aa,cos:oa}=Math,bn=(...t)=>{let[e,n,r]=C(t,"lch");return isNaN(r)&&(r=0),r=r*Xr,[e,oa(r)*n,aa(r)*n]},we=(...t)=>{t=C(t,"lch");const[e,n,r]=t,[a,o,s]=bn(e,n,r),[i,l,c]=ge(a,o,s);return[i,l,c,t.length>3?t[3]:1]},sa=(...t)=>{const e=un(C(t,"hcl"));return we(...e)},{sqrt:ia,atan2:la,round:ca}=Math,gn=(...t)=>{const[e,n,r]=C(t,"lab"),a=ia(n*n+r*r);let o=(la(r,n)*Zr+360)%360;return ca(a*1e4)===0&&(o=Number.NaN),[e,a,o]},ke=(...t)=>{const[e,n,r,...a]=C(t,"rgb"),[o,s,i]=ve(e,n,r),[l,c,u]=gn(o,s,i);return[l,c,u,...a.length>0&&a[0]<1?[a[0]]:[]]};b.prototype.lch=function(){return ke(this._rgb)},b.prototype.hcl=function(){return un(ke(this._rgb))},Object.assign(P,{lch:(...t)=>new b(...t,"lch"),hcl:(...t)=>new b(...t,"hcl")}),E.format.lch=we,E.format.hcl=sa,["lch","hcl"].forEach(t=>E.autodetect.push({p:2,test:(...e)=>{if(e=C(e,t),_(e)==="array"&&e.length===3)return t}})),b.prototype.saturate=function(t=1){const e=this,n=e.lch();return n[1]+=rt.Kn*t,n[1]<0&&(n[1]=0),new b(n,"lch").alpha(e.alpha(),!0)},b.prototype.desaturate=function(t=1){return this.saturate(-t)},b.prototype.set=function(t,e,n=!1){const[r,a]=t.split("."),o=this[r]();if(a){const s=r.indexOf(a)-(r.substr(0,2)==="ok"?2:0);if(s>-1){if(_(e)=="string")switch(e.charAt(0)){case"+":o[s]+=+e;break;case"-":o[s]+=+e;break;case"*":o[s]*=+e.substr(1);break;case"/":o[s]/=+e.substr(1);break;default:o[s]=+e}else if(_(e)==="number")o[s]=e;else throw new Error("unsupported value for Color.set");const i=new b(o,r);return n?(this._rgb=i._rgb,this):i}throw new Error(`unknown channel ${a} in mode ${r}`)}else return o},b.prototype.tint=function(t=.5,...e){return Ct(this,"white",t,...e)},b.prototype.shade=function(t=.5,...e){return Ct(this,"black",t,...e)};const ua=(t,e,n)=>{const r=t._rgb,a=e._rgb;return new b(r[0]+n*(a[0]-r[0]),r[1]+n*(a[1]-r[1]),r[2]+n*(a[2]-r[2]),"rgb")};z.rgb=ua;const{sqrt:Ne,pow:$t}=Math,ha=(t,e,n)=>{const[r,a,o]=t._rgb,[s,i,l]=e._rgb;return new b(Ne($t(r,2)*(1-n)+$t(s,2)*n),Ne($t(a,2)*(1-n)+$t(i,2)*n),Ne($t(o,2)*(1-n)+$t(l,2)*n),"rgb")};z.lrgb=ha;const fa=(t,e,n)=>{const r=t.lab(),a=e.lab();return new b(r[0]+n*(a[0]-r[0]),r[1]+n*(a[1]-r[1]),r[2]+n*(a[2]-r[2]),"lab")};z.lab=fa;const _t=(t,e,n,r)=>{let a,o;r==="hsl"?(a=t.hsl(),o=e.hsl()):r==="hsv"?(a=t.hsv(),o=e.hsv()):r==="hcg"?(a=t.hcg(),o=e.hcg()):r==="hsi"?(a=t.hsi(),o=e.hsi()):r==="lch"||r==="hcl"?(r="hcl",a=t.hcl(),o=e.hcl()):r==="oklch"&&(a=t.oklch().reverse(),o=e.oklch().reverse());let s,i,l,c,u,h;(r.substr(0,1)==="h"||r==="oklch")&&([s,l,u]=a,[i,c,h]=o);let f,d,m,y;return!isNaN(s)&&!isNaN(i)?(i>s&&i-s>180?y=i-(s+360):i<s&&s-i>180?y=i+360-s:y=i-s,d=s+n*y):isNaN(s)?isNaN(i)?d=Number.NaN:(d=i,(u==1||u==0)&&r!="hsv"&&(f=c)):(d=s,(h==1||h==0)&&r!="hsv"&&(f=l)),f===void 0&&(f=l+n*(c-l)),m=u+n*(h-u),r==="oklch"?new b([m,f,d],r):new b([d,f,m],r)},mn=(t,e,n)=>_t(t,e,n,"lch");z.lch=mn,z.hcl=mn;const da=t=>{if(_(t)=="number"&&t>=0&&t<=16777215){const e=t>>16,n=t>>8&255,r=t&255;return[e,n,r,1]}throw new Error("unknown num color: "+t)},pa=(...t)=>{const[e,n,r]=C(t,"rgb");return(e<<16)+(n<<8)+r};b.prototype.num=function(){return pa(this._rgb)},Object.assign(P,{num:(...t)=>new b(...t,"num")}),E.format.num=da,E.autodetect.push({p:5,test:(...t)=>{if(t.length===1&&_(t[0])==="number"&&t[0]>=0&&t[0]<=16777215)return"num"}});const ba=(t,e,n)=>{const r=t.num(),a=e.num();return new b(r+n*(a-r),"num")};z.num=ba;const{floor:ga}=Math,ma=(...t)=>{t=C(t,"hcg");let[e,n,r]=t,a,o,s;r=r*255;const i=n*255;if(n===0)a=o=s=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const l=ga(e),c=e-l,u=r*(1-n),h=u+i*(1-c),f=u+i*c,d=u+i;switch(l){case 0:[a,o,s]=[d,f,u];break;case 1:[a,o,s]=[h,d,u];break;case 2:[a,o,s]=[u,d,f];break;case 3:[a,o,s]=[u,h,d];break;case 4:[a,o,s]=[f,u,d];break;case 5:[a,o,s]=[d,u,h];break}}return[a,o,s,t.length>3?t[3]:1]},va=(...t)=>{const[e,n,r]=C(t,"rgb"),a=ln(e,n,r),o=cn(e,n,r),s=o-a,i=s*100/255,l=a/(255-s)*100;let c;return s===0?c=Number.NaN:(e===o&&(c=(n-r)/s),n===o&&(c=2+(r-e)/s),r===o&&(c=4+(e-n)/s),c*=60,c<0&&(c+=360)),[c,i,l]};b.prototype.hcg=function(){return va(this._rgb)};const Ma=(...t)=>new b(...t,"hcg");P.hcg=Ma,E.format.hcg=ma,E.autodetect.push({p:1,test:(...t)=>{if(t=C(t,"hcg"),_(t)==="array"&&t.length===3)return"hcg"}});const ya=(t,e,n)=>_t(t,e,n,"hcg");z.hcg=ya;const{cos:Pt}=Math,wa=(...t)=>{t=C(t,"hsi");let[e,n,r]=t,a,o,s;return isNaN(e)&&(e=0),isNaN(n)&&(n=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(s=(1-n)/3,a=(1+n*Pt(it*e)/Pt(be-it*e))/3,o=1-(s+a)):e<2/3?(e-=1/3,a=(1-n)/3,o=(1+n*Pt(it*e)/Pt(be-it*e))/3,s=1-(a+o)):(e-=2/3,o=(1-n)/3,s=(1+n*Pt(it*e)/Pt(be-it*e))/3,a=1-(o+s)),a=Nt(r*a*3),o=Nt(r*o*3),s=Nt(r*s*3),[a*255,o*255,s*255,t.length>3?t[3]:1]},{min:ka,sqrt:Na,acos:xa}=Math,Aa=(...t)=>{let[e,n,r]=C(t,"rgb");e/=255,n/=255,r/=255;let a;const o=ka(e,n,r),s=(e+n+r)/3,i=s>0?1-o/s:0;return i===0?a=NaN:(a=(e-n+(e-r))/2,a/=Na((e-n)*(e-n)+(e-r)*(n-r)),a=xa(a),r>n&&(a=it-a),a/=it),[a*360,i,s]};b.prototype.hsi=function(){return Aa(this._rgb)};const Oa=(...t)=>new b(...t,"hsi");P.hsi=Oa,E.format.hsi=wa,E.autodetect.push({p:2,test:(...t)=>{if(t=C(t,"hsi"),_(t)==="array"&&t.length===3)return"hsi"}});const Ea=(t,e,n)=>_t(t,e,n,"hsi");z.hsi=Ea;const xe=(...t)=>{t=C(t,"hsl");const[e,n,r]=t;let a,o,s;if(n===0)a=o=s=r*255;else{const i=[0,0,0],l=[0,0,0],c=r<.5?r*(1+n):r+n-r*n,u=2*r-c,h=e/360;i[0]=h+1/3,i[1]=h,i[2]=h-1/3;for(let f=0;f<3;f++)i[f]<0&&(i[f]+=1),i[f]>1&&(i[f]-=1),6*i[f]<1?l[f]=u+(c-u)*6*i[f]:2*i[f]<1?l[f]=c:3*i[f]<2?l[f]=u+(c-u)*(2/3-i[f])*6:l[f]=u;[a,o,s]=[l[0]*255,l[1]*255,l[2]*255]}return t.length>3?[a,o,s,t[3]]:[a,o,s,1]},vn=(...t)=>{t=C(t,"rgba");let[e,n,r]=t;e/=255,n/=255,r/=255;const a=ln(e,n,r),o=cn(e,n,r),s=(o+a)/2;let i,l;return o===a?(i=0,l=Number.NaN):i=s<.5?(o-a)/(o+a):(o-a)/(2-o-a),e==o?l=(n-r)/(o-a):n==o?l=2+(r-e)/(o-a):r==o&&(l=4+(e-n)/(o-a)),l*=60,l<0&&(l+=360),t.length>3&&t[3]!==void 0?[l,i,s,t[3]]:[l,i,s]};b.prototype.hsl=function(){return vn(this._rgb)};const Ca=(...t)=>new b(...t,"hsl");P.hsl=Ca,E.format.hsl=xe,E.autodetect.push({p:2,test:(...t)=>{if(t=C(t,"hsl"),_(t)==="array"&&t.length===3)return"hsl"}});const $a=(t,e,n)=>_t(t,e,n,"hsl");z.hsl=$a;const{floor:_a}=Math,Pa=(...t)=>{t=C(t,"hsv");let[e,n,r]=t,a,o,s;if(r*=255,n===0)a=o=s=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const i=_a(e),l=e-i,c=r*(1-n),u=r*(1-n*l),h=r*(1-n*(1-l));switch(i){case 0:[a,o,s]=[r,h,c];break;case 1:[a,o,s]=[u,r,c];break;case 2:[a,o,s]=[c,r,h];break;case 3:[a,o,s]=[c,u,r];break;case 4:[a,o,s]=[h,c,r];break;case 5:[a,o,s]=[r,c,u];break}}return[a,o,s,t.length>3?t[3]:1]},{min:La,max:Da}=Math,Sa=(...t)=>{t=C(t,"rgb");let[e,n,r]=t;const a=La(e,n,r),o=Da(e,n,r),s=o-a;let i,l,c;return c=o/255,o===0?(i=Number.NaN,l=0):(l=s/o,e===o&&(i=(n-r)/s),n===o&&(i=2+(r-e)/s),r===o&&(i=4+(e-n)/s),i*=60,i<0&&(i+=360)),[i,l,c]};b.prototype.hsv=function(){return Sa(this._rgb)};const Ia=(...t)=>new b(...t,"hsv");P.hsv=Ia,E.format.hsv=Pa,E.autodetect.push({p:2,test:(...t)=>{if(t=C(t,"hsv"),_(t)==="array"&&t.length===3)return"hsv"}});const Ra=(t,e,n)=>_t(t,e,n,"hsv");z.hsv=Ra;function Wt(t,e){let n=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(s=>[s]));let r=e[0].length,a=e[0].map((s,i)=>e.map(l=>l[i])),o=t.map(s=>a.map(i=>Array.isArray(s)?s.reduce((l,c,u)=>l+c*(i[u]||0),0):i.reduce((l,c)=>l+c*s,0)));return n===1&&(o=o[0]),r===1?o.map(s=>s[0]):o}const Ae=(...t)=>{t=C(t,"lab");const[e,n,r,...a]=t,[o,s,i]=Ga([e,n,r]),[l,c,u]=dn(o,s,i);return[l,c,u,...a.length>0&&a[0]<1?[a[0]]:[]]};function Ga(t){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],n=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],r=Wt(n,t);return Wt(e,r.map(a=>a**3))}const Oe=(...t)=>{const[e,n,r,...a]=C(t,"rgb"),o=pn(e,n,r);return[...Ha(o),...a.length>0&&a[0]<1?[a[0]]:[]]};function Ha(t){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],n=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=Wt(e,t);return Wt(n,r.map(a=>Math.cbrt(a)))}b.prototype.oklab=function(){return Oe(this._rgb)},Object.assign(P,{oklab:(...t)=>new b(...t,"oklab")}),E.format.oklab=Ae,E.autodetect.push({p:2,test:(...t)=>{if(t=C(t,"oklab"),_(t)==="array"&&t.length===3)return"oklab"}});const qa=(t,e,n)=>{const r=t.oklab(),a=e.oklab();return new b(r[0]+n*(a[0]-r[0]),r[1]+n*(a[1]-r[1]),r[2]+n*(a[2]-r[2]),"oklab")};z.oklab=qa;const Ba=(t,e,n)=>_t(t,e,n,"oklch");z.oklch=Ba;const{pow:Ee,sqrt:Ce,PI:$e,cos:Mn,sin:yn,atan2:Ka}=Math,ja=(t,e="lrgb",n=null)=>{const r=t.length;n||(n=Array.from(new Array(r)).map(()=>1));const a=r/n.reduce(function(h,f){return h+f});if(n.forEach((h,f)=>{n[f]*=a}),t=t.map(h=>new b(h)),e==="lrgb")return za(t,n);const o=t.shift(),s=o.get(e),i=[];let l=0,c=0;for(let h=0;h<s.length;h++)if(s[h]=(s[h]||0)*n[0],i.push(isNaN(s[h])?0:n[0]),e.charAt(h)==="h"&&!isNaN(s[h])){const f=s[h]/180*$e;l+=Mn(f)*n[0],c+=yn(f)*n[0]}let u=o.alpha()*n[0];t.forEach((h,f)=>{const d=h.get(e);u+=h.alpha()*n[f+1];for(let m=0;m<s.length;m++)if(!isNaN(d[m]))if(i[m]+=n[f+1],e.charAt(m)==="h"){const y=d[m]/180*$e;l+=Mn(y)*n[f+1],c+=yn(y)*n[f+1]}else s[m]+=d[m]*n[f+1]});for(let h=0;h<s.length;h++)if(e.charAt(h)==="h"){let f=Ka(c/i[h],l/i[h])/$e*180;for(;f<0;)f+=360;for(;f>=360;)f-=360;s[h]=f}else s[h]=s[h]/i[h];return u/=r,new b(s,e).alpha(u>.99999?1:u,!0)},za=(t,e)=>{const n=t.length,r=[0,0,0,0];for(let a=0;a<t.length;a++){const o=t[a],s=e[a]/n,i=o._rgb;r[0]+=Ee(i[0],2)*s,r[1]+=Ee(i[1],2)*s,r[2]+=Ee(i[2],2)*s,r[3]+=i[3]*s}return r[0]=Ce(r[0]),r[1]=Ce(r[1]),r[2]=Ce(r[2]),r[3]>.9999999&&(r[3]=1),new b(de(r))},{pow:Fa}=Math;function Ut(t){let e="rgb",n=P("#ccc"),r=0,a=[0,1],o=[0,1],s=[],i=[0,0],l=!1,c=[],u=!1,h=0,f=1,d=!1,m={},y=!0,v=1;const M=function(p){if(p=p||["#fff","#000"],p&&_(p)==="string"&&P.brewer&&P.brewer[p.toLowerCase()]&&(p=P.brewer[p.toLowerCase()]),_(p)==="array"){p.length===1&&(p=[p[0],p[0]]),p=p.slice(0);for(let N=0;N<p.length;N++)p[N]=P(p[N]);s.length=0;for(let N=0;N<p.length;N++)s.push(N/(p.length-1))}return R(),c=p},L=function(p){if(l!=null){const N=l.length-1;let A=0;for(;A<N&&p>=l[A];)A++;return A-1}return 0};let D=p=>p,S=p=>p;const I=function(p,N){let A,x;if(N==null&&(N=!1),isNaN(p)||p===null)return n;N?x=p:l&&l.length>2?x=L(p)/(l.length-2):f!==h?x=(p-h)/(f-h):x=1,x=S(x),N||(x=D(x)),v!==1&&(x=Fa(x,v)),x=i[0]+x*(1-i[0]-i[1]),x=Nt(x,0,1);const k=Math.floor(x*1e4);if(y&&m[k])A=m[k];else{if(_(c)==="array")for(let w=0;w<s.length;w++){const G=s[w];if(x<=G){A=c[w];break}if(x>=G&&w===s.length-1){A=c[w];break}if(x>G&&x<s[w+1]){x=(x-G)/(s[w+1]-G),A=P.interpolate(c[w],c[w+1],x,e);break}}else _(c)==="function"&&(A=c(x));y&&(m[k]=A)}return A};var R=()=>m={};M(t);const $=function(p){const N=P(I(p));return u&&N[u]?N[u]():N};return $.classes=function(p){if(p!=null){if(_(p)==="array")l=p,a=[p[0],p[p.length-1]];else{const N=P.analyze(a);p===0?l=[N.min,N.max]:l=P.limits(N,"e",p)}return $}return l},$.domain=function(p){if(!arguments.length)return o;o=p.slice(0),h=p[0],f=p[p.length-1],s=[];const N=c.length;if(p.length===N&&h!==f)for(let A of Array.from(p))s.push((A-h)/(f-h));else{for(let A=0;A<N;A++)s.push(A/(N-1));if(p.length>2){const A=p.map((k,w)=>w/(p.length-1)),x=p.map(k=>(k-h)/(f-h));x.every((k,w)=>A[w]===k)||(S=k=>{if(k<=0||k>=1)return k;let w=0;for(;k>=x[w+1];)w++;const G=(k-x[w])/(x[w+1]-x[w]);return A[w]+G*(A[w+1]-A[w])})}}return a=[h,f],$},$.mode=function(p){return arguments.length?(e=p,R(),$):e},$.range=function(p,N){return M(p),$},$.out=function(p){return u=p,$},$.spread=function(p){return arguments.length?(r=p,$):r},$.correctLightness=function(p){return p==null&&(p=!0),d=p,R(),d?D=function(N){const A=I(0,!0).lab()[0],x=I(1,!0).lab()[0],k=A>x;let w=I(N,!0).lab()[0];const G=A+(x-A)*N;let tt=w-G,et=0,nt=1,bt=20;for(;Math.abs(tt)>.01&&bt-- >0;)(function(){return k&&(tt*=-1),tt<0?(et=N,N+=(nt-N)*.5):(nt=N,N+=(et-N)*.5),w=I(N,!0).lab()[0],tt=w-G})();return N}:D=N=>N,$},$.padding=function(p){return p!=null?(_(p)==="number"&&(p=[p,p]),i=p,$):i},$.colors=function(p,N){arguments.length<2&&(N="hex");let A=[];if(arguments.length===0)A=c.slice(0);else if(p===1)A=[$(.5)];else if(p>1){const x=a[0],k=a[1]-x;A=Ya(0,p).map(w=>$(x+w/(p-1)*k))}else{t=[];let x=[];if(l&&l.length>2)for(let k=1,w=l.length,G=1<=w;G?k<w:k>w;G?k++:k--)x.push((l[k-1]+l[k])*.5);else x=a;A=x.map(k=>$(k))}return P[N]&&(A=A.map(x=>x[N]())),A},$.cache=function(p){return p!=null?(y=p,$):y},$.gamma=function(p){return p!=null?(v=p,$):v},$.nodata=function(p){return p!=null?(n=P(p),$):n},$}function Ya(t,e,n){let r=[],a=t<e,o=e;for(let s=t;a?s<o:s>o;a?s++:s--)r.push(s);return r}const Xa=function(t){let e=[1,1];for(let n=1;n<t;n++){let r=[1];for(let a=1;a<=e.length;a++)r[a]=(e[a]||0)+e[a-1];e=r}return e},Za=function(t){let e,n,r,a;if(t=t.map(o=>new b(o)),t.length===2)[n,r]=t.map(o=>o.lab()),e=function(o){const s=[0,1,2].map(i=>n[i]+o*(r[i]-n[i]));return new b(s,"lab")};else if(t.length===3)[n,r,a]=t.map(o=>o.lab()),e=function(o){const s=[0,1,2].map(i=>(1-o)*(1-o)*n[i]+2*(1-o)*o*r[i]+o*o*a[i]);return new b(s,"lab")};else if(t.length===4){let o;[n,r,a,o]=t.map(s=>s.lab()),e=function(s){const i=[0,1,2].map(l=>(1-s)*(1-s)*(1-s)*n[l]+3*(1-s)*(1-s)*s*r[l]+3*(1-s)*s*s*a[l]+s*s*s*o[l]);return new b(i,"lab")}}else if(t.length>=5){let o,s,i;o=t.map(l=>l.lab()),i=t.length-1,s=Xa(i),e=function(l){const c=1-l,u=[0,1,2].map(h=>o.reduce((f,d,m)=>f+s[m]*c**(i-m)*l**m*d[h],0));return new b(u,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},Wa=t=>{const e=Za(t);return e.scale=()=>Ut(e),e},{round:wn}=Math;b.prototype.rgb=function(t=!0){return t===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(wn)},b.prototype.rgba=function(t=!0){return this._rgb.slice(0,4).map((e,n)=>n<3?t===!1?e:wn(e):e)},Object.assign(P,{rgb:(...t)=>new b(...t,"rgb")}),E.format.rgb=(...t)=>{const e=C(t,"rgba");return e[3]===void 0&&(e[3]=1),e},E.autodetect.push({p:3,test:(...t)=>{if(t=C(t,"rgba"),_(t)==="array"&&(t.length===3||t.length===4&&_(t[3])=="number"&&t[3]>=0&&t[3]<=1))return"rgb"}});const V=(t,e,n)=>{if(!V[n])throw new Error("unknown blend mode "+n);return V[n](t,e)},mt=t=>(e,n)=>{const r=P(n).rgb(),a=P(e).rgb();return P.rgb(t(r,a))},vt=t=>(e,n)=>{const r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r},Ua=t=>t,Va=(t,e)=>t*e/255,Ja=(t,e)=>t>e?e:t,Qa=(t,e)=>t>e?t:e,Ta=(t,e)=>255*(1-(1-t/255)*(1-e/255)),to=(t,e)=>e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255)),eo=(t,e)=>255*(1-(1-e/255)/(t/255)),no=(t,e)=>t===255?255:(t=255*(e/255)/(1-t/255),t>255?255:t);V.normal=mt(vt(Ua)),V.multiply=mt(vt(Va)),V.screen=mt(vt(Ta)),V.overlay=mt(vt(to)),V.darken=mt(vt(Ja)),V.lighten=mt(vt(Qa)),V.dodge=mt(vt(no)),V.burn=mt(vt(eo));const{pow:ro,sin:ao,cos:oo}=Math;function so(t=300,e=-1.5,n=1,r=1,a=[0,1]){let o=0,s;_(a)==="array"?s=a[1]-a[0]:(s=0,a=[a,a]);const i=function(l){const c=it*((t+120)/360+e*l),u=ro(a[0]+s*l,r),h=(o!==0?n[0]+l*o:n)*u*(1-u)/2,f=oo(c),d=ao(c),m=u+h*(-.14861*f+1.78277*d),y=u+h*(-.29227*f-.90649*d),v=u+h*(1.97294*f);return P(de([m*255,y*255,v*255,1]))};return i.start=function(l){return l==null?t:(t=l,i)},i.rotations=function(l){return l==null?e:(e=l,i)},i.gamma=function(l){return l==null?r:(r=l,i)},i.hue=function(l){return l==null?n:(n=l,_(n)==="array"?(o=n[1]-n[0],o===0&&(n=n[1])):o=0,i)},i.lightness=function(l){return l==null?a:(_(l)==="array"?(a=l,s=l[1]-l[0]):(a=[l,l],s=0),i)},i.scale=()=>P.scale(i),i.hue(n),i}const io="0123456789abcdef",{floor:lo,random:co}=Math,uo=(t=co)=>{let e="#";for(let n=0;n<6;n++)e+=io.charAt(lo(t()*16));return new b(e,"hex")},{log:kn,pow:ho,floor:fo,abs:po}=Math;function Nn(t,e=null){const n={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return _(t)==="object"&&(t=Object.values(t)),t.forEach(r=>{e&&_(r)==="object"&&(r=r[e]),r!=null&&!isNaN(r)&&(n.values.push(r),n.sum+=r,r<n.min&&(n.min=r),r>n.max&&(n.max=r),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(r,a)=>xn(n,r,a),n}function xn(t,e="equal",n=7){_(t)=="array"&&(t=Nn(t));const{min:r,max:a}=t,o=t.values.sort((i,l)=>i-l);if(n===1)return[r,a];const s=[];if(e.substr(0,1)==="c"&&(s.push(r),s.push(a)),e.substr(0,1)==="e"){s.push(r);for(let i=1;i<n;i++)s.push(r+i/n*(a-r));s.push(a)}else if(e.substr(0,1)==="l"){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const i=Math.LOG10E*kn(r),l=Math.LOG10E*kn(a);s.push(r);for(let c=1;c<n;c++)s.push(ho(10,i+c/n*(l-i)));s.push(a)}else if(e.substr(0,1)==="q"){s.push(r);for(let i=1;i<n;i++){const l=(o.length-1)*i/n,c=fo(l);if(c===l)s.push(o[c]);else{const u=l-c;s.push(o[c]*(1-u)+o[c+1]*u)}}s.push(a)}else if(e.substr(0,1)==="k"){let i;const l=o.length,c=new Array(l),u=new Array(n);let h=!0,f=0,d=null;d=[],d.push(r);for(let v=1;v<n;v++)d.push(r+v/n*(a-r));for(d.push(a);h;){for(let M=0;M<n;M++)u[M]=0;for(let M=0;M<l;M++){const L=o[M];let D=Number.MAX_VALUE,S;for(let I=0;I<n;I++){const R=po(d[I]-L);R<D&&(D=R,S=I),u[S]++,c[M]=S}}const v=new Array(n);for(let M=0;M<n;M++)v[M]=null;for(let M=0;M<l;M++)i=c[M],v[i]===null?v[i]=o[M]:v[i]+=o[M];for(let M=0;M<n;M++)v[M]*=1/u[M];h=!1;for(let M=0;M<n;M++)if(v[M]!==d[M]){h=!0;break}d=v,f++,f>200&&(h=!1)}const m={};for(let v=0;v<n;v++)m[v]=[];for(let v=0;v<l;v++)i=c[v],m[i].push(o[v]);let y=[];for(let v=0;v<n;v++)y.push(m[v][0]),y.push(m[v][m[v].length-1]);y=y.sort((v,M)=>v-M),s.push(y[0]);for(let v=1;v<y.length;v+=2){const M=y[v];!isNaN(M)&&s.indexOf(M)===-1&&s.push(M)}}return s}const bo=(t,e)=>{t=new b(t),e=new b(e);const n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},An=.027,go=5e-4,mo=.1,On=1.14,Vt=.022,En=1.414,vo=(t,e)=>{t=new b(t),e=new b(e),t.alpha()<1&&(t=Ct(e,t,t.alpha(),"rgb"));const n=Cn(...t.rgb()),r=Cn(...e.rgb()),a=n>=Vt?n:n+Math.pow(Vt-n,En),o=r>=Vt?r:r+Math.pow(Vt-r,En),s=Math.pow(o,.56)-Math.pow(a,.57),i=Math.pow(o,.65)-Math.pow(a,.62),l=Math.abs(o-a)<go?0:a<o?s*On:i*On;return(Math.abs(l)<mo?0:l>0?l-An:l+An)*100};function Cn(t,e,n){return .2126729*Math.pow(t/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(n/255,2.4)}const{sqrt:ct,pow:H,min:Mo,max:yo,atan2:$n,abs:_n,cos:Jt,sin:Pn,exp:wo,PI:Ln}=Math;function ko(t,e,n=1,r=1,a=1){var o=function(At){return 360*At/(2*Ln)},s=function(At){return 2*Ln*At/360};t=new b(t),e=new b(e);const[i,l,c]=Array.from(t.lab()),[u,h,f]=Array.from(e.lab()),d=(i+u)/2,m=ct(H(l,2)+H(c,2)),y=ct(H(h,2)+H(f,2)),v=(m+y)/2,M=.5*(1-ct(H(v,7)/(H(v,7)+H(25,7)))),L=l*(1+M),D=h*(1+M),S=ct(H(L,2)+H(c,2)),I=ct(H(D,2)+H(f,2)),R=(S+I)/2,$=o($n(c,L)),p=o($n(f,D)),N=$>=0?$:$+360,A=p>=0?p:p+360,x=_n(N-A)>180?(N+A+360)/2:(N+A)/2,k=1-.17*Jt(s(x-30))+.24*Jt(s(2*x))+.32*Jt(s(3*x+6))-.2*Jt(s(4*x-63));let w=A-N;w=_n(w)<=180?w:A<=N?w+360:w-360,w=2*ct(S*I)*Pn(s(w)/2);const G=u-i,tt=I-S,et=1+.015*H(d-50,2)/ct(20+H(d-50,2)),nt=1+.045*R,bt=1+.015*R*k,gt=30*wo(-H((x-275)/25,2)),kt=-(2*ct(H(R,7)/(H(R,7)+H(25,7))))*Pn(2*s(gt)),fe=ct(H(G/(n*et),2)+H(tt/(r*nt),2)+H(w/(a*bt),2)+kt*(tt/(r*nt))*(w/(a*bt)));return yo(0,Mo(100,fe))}function No(t,e,n="lab"){t=new b(t),e=new b(e);const r=t.get(n),a=e.get(n);let o=0;for(let s in r){const i=(r[s]||0)-(a[s]||0);o+=i*i}return Math.sqrt(o)}const xo=(...t)=>{try{return new b(...t),!0}catch{return!1}},Ao={cool(){return Ut([P.hsl(180,1,.9),P.hsl(250,.7,.4)])},hot(){return Ut(["#000","#f00","#ff0","#fff"]).mode("rgb")}},_e={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Dn=Object.keys(_e),Sn=new Map(Dn.map(t=>[t.toLowerCase(),t])),Oo=typeof Proxy=="function"?new Proxy(_e,{get(t,e){const n=e.toLowerCase();if(Sn.has(n))return t[Sn.get(n)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(Dn)}}):_e,Eo=(...t)=>{t=C(t,"cmyk");const[e,n,r,a]=t,o=t.length>4?t[4]:1;return a===1?[0,0,0,o]:[e>=1?0:255*(1-e)*(1-a),n>=1?0:255*(1-n)*(1-a),r>=1?0:255*(1-r)*(1-a),o]},{max:In}=Math,Co=(...t)=>{let[e,n,r]=C(t,"rgb");e=e/255,n=n/255,r=r/255;const a=1-In(e,In(n,r)),o=a<1?1/(1-a):0,s=(1-e-a)*o,i=(1-n-a)*o,l=(1-r-a)*o;return[s,i,l,a]};b.prototype.cmyk=function(){return Co(this._rgb)},Object.assign(P,{cmyk:(...t)=>new b(...t,"cmyk")}),E.format.cmyk=Eo,E.autodetect.push({p:2,test:(...t)=>{if(t=C(t,"cmyk"),_(t)==="array"&&t.length===4)return"cmyk"}});const $o=(...t)=>{const e=C(t,"hsla");let n=Ot(t)||"lsa";return e[0]=W(e[0]||0)+"deg",e[1]=W(e[1]*100)+"%",e[2]=W(e[2]*100)+"%",n==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),n="hsla"):e.length=3,`${n.substr(0,3)}(${e.join(" ")})`},_o=(...t)=>{const e=C(t,"lab");let n=Ot(t)||"lab";return e[0]=W(e[0])+"%",e[1]=W(e[1]),e[2]=W(e[2]),n==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},Po=(...t)=>{const e=C(t,"lch");let n=Ot(t)||"lab";return e[0]=W(e[0])+"%",e[1]=W(e[1]),e[2]=isNaN(e[2])?"none":W(e[2])+"deg",n==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},Lo=(...t)=>{const e=C(t,"lab");return e[0]=W(e[0]*100)+"%",e[1]=pe(e[1]),e[2]=pe(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},Rn=(...t)=>{const[e,n,r,...a]=C(t,"rgb"),[o,s,i]=Oe(e,n,r),[l,c,u]=gn(o,s,i);return[l,c,u,...a.length>0&&a[0]<1?[a[0]]:[]]},Do=(...t)=>{const e=C(t,"lch");return e[0]=W(e[0]*100)+"%",e[1]=pe(e[1]),e[2]=isNaN(e[2])?"none":W(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:Pe}=Math,So=(...t)=>{const e=C(t,"rgba");let n=Ot(t)||"rgb";if(n.substr(0,3)==="hsl")return $o(vn(e),n);if(n.substr(0,3)==="lab"){const r=qt();lt("d50");const a=_o(ve(e),n);return lt(r),a}if(n.substr(0,3)==="lch"){const r=qt();lt("d50");const a=Po(ke(e),n);return lt(r),a}return n.substr(0,5)==="oklab"?Lo(Oe(e)):n.substr(0,5)==="oklch"?Do(Rn(e)):(e[0]=Pe(e[0]),e[1]=Pe(e[1]),e[2]=Pe(e[2]),(n==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),n="rgba"),`${n.substr(0,3)}(${e.slice(0,n==="rgb"?3:4).join(" ")})`)},Gn=(...t)=>{t=C(t,"lch");const[e,n,r,...a]=t,[o,s,i]=bn(e,n,r),[l,c,u]=Ae(o,s,i);return[l,c,u,...a.length>0&&a[0]<1?[a[0]]:[]]},ut=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,J=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Qt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,U=/\s*/.source,Lt=/\s+/.source,Le=/\s*,\s*/.source,Tt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,Dt=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,Hn=new RegExp("^rgba?\\("+U+[ut,ut,ut].join(Lt)+Dt+"\\)$"),qn=new RegExp("^rgb\\("+U+[ut,ut,ut].join(Le)+U+"\\)$"),Bn=new RegExp("^rgba\\("+U+[ut,ut,ut,J].join(Le)+U+"\\)$"),Kn=new RegExp("^hsla?\\("+U+[Tt,Qt,Qt].join(Lt)+Dt+"\\)$"),jn=new RegExp("^hsl?\\("+U+[Tt,Qt,Qt].join(Le)+U+"\\)$"),zn=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Fn=new RegExp("^lab\\("+U+[J,J,J].join(Lt)+Dt+"\\)$"),Yn=new RegExp("^lch\\("+U+[J,J,Tt].join(Lt)+Dt+"\\)$"),Xn=new RegExp("^oklab\\("+U+[J,J,J].join(Lt)+Dt+"\\)$"),Zn=new RegExp("^oklch\\("+U+[J,J,Tt].join(Lt)+Dt+"\\)$"),{round:Wn}=Math,St=t=>t.map((e,n)=>n<=2?Nt(Wn(e),0,255):e),q=(t,e=0,n=100,r=!1)=>(typeof t=="string"&&t.endsWith("%")&&(t=parseFloat(t.substring(0,t.length-1))/100,r?t=e+(t+1)*.5*(n-e):t=e+t*(n-e)),+t),F=(t,e)=>t==="none"?e:t,De=t=>{if(t=t.toLowerCase().trim(),t==="transparent")return[0,0,0,0];let e;if(E.format.named)try{return E.format.named(t)}catch{}if((e=t.match(Hn))||(e=t.match(qn))){let n=e.slice(1,4);for(let a=0;a<3;a++)n[a]=+q(F(n[a],0),0,255);n=St(n);const r=e[4]!==void 0?+q(e[4],0,1):1;return n[3]=r,n}if(e=t.match(Bn)){const n=e.slice(1,5);for(let r=0;r<4;r++)n[r]=+q(n[r],0,255);return n}if((e=t.match(Kn))||(e=t.match(jn))){const n=e.slice(1,4);n[0]=+F(n[0].replace("deg",""),0),n[1]=+q(F(n[1],0),0,100)*.01,n[2]=+q(F(n[2],0),0,100)*.01;const r=St(xe(n)),a=e[4]!==void 0?+q(e[4],0,1):1;return r[3]=a,r}if(e=t.match(zn)){const n=e.slice(1,4);n[1]*=.01,n[2]*=.01;const r=xe(n);for(let a=0;a<3;a++)r[a]=Wn(r[a]);return r[3]=+e[4],r}if(e=t.match(Fn)){const n=e.slice(1,4);n[0]=q(F(n[0],0),0,100),n[1]=q(F(n[1],0),-125,125,!0),n[2]=q(F(n[2],0),-125,125,!0);const r=qt();lt("d50");const a=St(ge(n));lt(r);const o=e[4]!==void 0?+q(e[4],0,1):1;return a[3]=o,a}if(e=t.match(Yn)){const n=e.slice(1,4);n[0]=q(n[0],0,100),n[1]=q(F(n[1],0),0,150,!1),n[2]=+F(n[2].replace("deg",""),0);const r=qt();lt("d50");const a=St(we(n));lt(r);const o=e[4]!==void 0?+q(e[4],0,1):1;return a[3]=o,a}if(e=t.match(Xn)){const n=e.slice(1,4);n[0]=q(F(n[0],0),0,1),n[1]=q(F(n[1],0),-.4,.4,!0),n[2]=q(F(n[2],0),-.4,.4,!0);const r=St(Ae(n)),a=e[4]!==void 0?+q(e[4],0,1):1;return r[3]=a,r}if(e=t.match(Zn)){const n=e.slice(1,4);n[0]=q(F(n[0],0),0,1),n[1]=q(F(n[1],0),0,.4,!1),n[2]=+F(n[2].replace("deg",""),0);const r=St(Gn(n)),a=e[4]!==void 0?+q(e[4],0,1):1;return r[3]=a,r}};De.test=t=>Hn.test(t)||Kn.test(t)||Fn.test(t)||Yn.test(t)||Xn.test(t)||Zn.test(t)||qn.test(t)||Bn.test(t)||jn.test(t)||zn.test(t)||t==="transparent",b.prototype.css=function(t){return So(this._rgb,t)};const Io=(...t)=>new b(...t,"css");P.css=Io,E.format.css=De,E.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&_(t)==="string"&&De.test(t))return"css"}}),E.format.gl=(...t)=>{const e=C(t,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const Ro=(...t)=>new b(...t,"gl");P.gl=Ro,b.prototype.gl=function(){const t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]},b.prototype.hex=function(t){return fn(this._rgb,t)};const Go=(...t)=>new b(...t,"hex");P.hex=Go,E.format.hex=hn,E.autodetect.push({p:4,test:(t,...e)=>{if(!e.length&&_(t)==="string"&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});const{log:te}=Math,Un=t=>{const e=t/100;let n,r,a;return e<66?(n=255,r=e<6?0:-155.25485562709179-.44596950469579133*(r=e-2)+104.49216199393888*te(r),a=e<20?0:-254.76935184120902+.8274096064007395*(a=e-10)+115.67994401066147*te(a)):(n=351.97690566805693+.114206453784165*(n=e-55)-40.25366309332127*te(n),r=325.4494125711974+.07943456536662342*(r=e-50)-28.0852963507957*te(r),a=255),[n,r,a,1]},{round:Ho}=Math,qo=(...t)=>{const e=C(t,"rgb"),n=e[0],r=e[2];let a=1e3,o=4e4;const s=.4;let i;for(;o-a>s;){i=(o+a)*.5;const l=Un(i);l[2]/l[0]>=r/n?o=i:a=i}return Ho(i)};b.prototype.temp=b.prototype.kelvin=b.prototype.temperature=function(){return qo(this._rgb)};const Se=(...t)=>new b(...t,"temp");Object.assign(P,{temp:Se,kelvin:Se,temperature:Se}),E.format.temp=E.format.kelvin=E.format.temperature=Un,b.prototype.oklch=function(){return Rn(this._rgb)},Object.assign(P,{oklch:(...t)=>new b(...t,"oklch")}),E.format.oklch=Gn,E.autodetect.push({p:2,test:(...t)=>{if(t=C(t,"oklch"),_(t)==="array"&&t.length===3)return"oklch"}}),Object.assign(P,{analyze:Nn,average:ja,bezier:Wa,blend:V,brewer:Oo,Color:b,colors:Et,contrast:bo,contrastAPCA:vo,cubehelix:so,deltaE:ko,distance:No,input:E,interpolate:Ct,limits:xn,mix:Ct,random:uo,scale:Ut,scales:Ao,valid:xo});const Vn=(t,e)=>{if(typeof t=="number"){if(e===3)return{mode:"rgb",r:(t>>8&15|t>>4&240)/255,g:(t>>4&15|t&240)/255,b:(t&15|t<<4&240)/255};if(e===4)return{mode:"rgb",r:(t>>12&15|t>>8&240)/255,g:(t>>8&15|t>>4&240)/255,b:(t>>4&15|t&240)/255,alpha:(t&15|t<<4&240)/255};if(e===6)return{mode:"rgb",r:(t>>16&255)/255,g:(t>>8&255)/255,b:(t&255)/255};if(e===8)return{mode:"rgb",r:(t>>24&255)/255,g:(t>>16&255)/255,b:(t>>8&255)/255,alpha:(t&255)/255}}},Bo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ko=t=>Vn(Bo[t.toLowerCase()],6),jo=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,zo=t=>{let e;return(e=t.match(jo))?Vn(parseInt(e[1],16),e[1].length):void 0},Mt="([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)",Bt=`${Mt}%`,Ie=`(?:${Mt}%|${Mt})`,Fo=`(?:${Mt}(deg|grad|rad|turn)|${Mt})`,It="\\s*,\\s*",Yo=new RegExp(`^rgba?\\(\\s*${Mt}${It}${Mt}${It}${Mt}\\s*(?:,\\s*${Ie}\\s*)?\\)$`),Xo=new RegExp(`^rgba?\\(\\s*${Bt}${It}${Bt}${It}${Bt}\\s*(?:,\\s*${Ie}\\s*)?\\)$`),Zo=t=>{let e={mode:"rgb"},n;if(n=t.match(Yo))n[1]!==void 0&&(e.r=n[1]/255),n[2]!==void 0&&(e.g=n[2]/255),n[3]!==void 0&&(e.b=n[3]/255);else if(n=t.match(Xo))n[1]!==void 0&&(e.r=n[1]/100),n[2]!==void 0&&(e.g=n[2]/100),n[3]!==void 0&&(e.b=n[3]/100);else return;return n[4]!==void 0?e.alpha=Math.max(0,Math.min(1,n[4]/100)):n[5]!==void 0&&(e.alpha=Math.max(0,Math.min(1,+n[5]))),e},Wo=(t,e)=>t===void 0?void 0:typeof t!="object"?o0(t):t.mode!==void 0?t:e?{...t,mode:e}:void 0,Uo=(t="rgb")=>e=>(e=Wo(e,t))!==void 0?e.mode===t?e:at[e.mode][t]?at[e.mode][t](e):t==="rgb"?at[e.mode].rgb(e):at.rgb[t](at[e.mode].rgb(e)):void 0,at={},Jn={},ee=[],Qn={},Vo=t=>t,ht=t=>(at[t.mode]={...at[t.mode],...t.toMode},Object.keys(t.fromMode||{}).forEach(e=>{at[e]||(at[e]={}),at[e][t.mode]=t.fromMode[e]}),t.ranges||(t.ranges={}),t.difference||(t.difference={}),t.channels.forEach(e=>{if(t.ranges[e]===void 0&&(t.ranges[e]=[0,1]),!t.interpolate[e])throw new Error(`Missing interpolator for: ${e}`);typeof t.interpolate[e]=="function"&&(t.interpolate[e]={use:t.interpolate[e]}),t.interpolate[e].fixup||(t.interpolate[e].fixup=Vo)}),Jn[t.mode]=t,(t.parse||[]).forEach(e=>{Qo(e,t.mode)}),Uo(t.mode)),Jo=t=>Jn[t],Qo=(t,e)=>{if(typeof t=="string"){if(!e)throw new Error("'mode' required when 'parser' is a string");Qn[t]=e}else typeof t=="function"&&ee.indexOf(t)<0&&ee.push(t)},Re=/[^\x00-\x7F]|[a-zA-Z_]/,To=/[^\x00-\x7F]|[-\w]/,g={Function:"function",Ident:"ident",Number:"number",Percentage:"percentage",ParenClose:")",None:"none",Hue:"hue",Alpha:"alpha"};let O=0;function ne(t){let e=t[O],n=t[O+1];return e==="-"||e==="+"?/\d/.test(n)||n==="."&&/\d/.test(t[O+2]):e==="."?/\d/.test(n):/\d/.test(e)}function Ge(t){if(O>=t.length)return!1;let e=t[O];if(Re.test(e))return!0;if(e==="-"){if(t.length-O<2)return!1;let n=t[O+1];return!!(n==="-"||Re.test(n))}return!1}const t0={deg:1,rad:180/Math.PI,grad:9/10,turn:360};function Kt(t){let e="";if((t[O]==="-"||t[O]==="+")&&(e+=t[O++]),e+=re(t),t[O]==="."&&/\d/.test(t[O+1])&&(e+=t[O++]+re(t)),(t[O]==="e"||t[O]==="E")&&((t[O+1]==="-"||t[O+1]==="+")&&/\d/.test(t[O+2])?e+=t[O++]+t[O++]+re(t):/\d/.test(t[O+1])&&(e+=t[O++]+re(t))),Ge(t)){let n=ae(t);return n==="deg"||n==="rad"||n==="turn"||n==="grad"?{type:g.Hue,value:e*t0[n]}:void 0}return t[O]==="%"?(O++,{type:g.Percentage,value:+e}):{type:g.Number,value:+e}}function re(t){let e="";for(;/\d/.test(t[O]);)e+=t[O++];return e}function ae(t){let e="";for(;O<t.length&&To.test(t[O]);)e+=t[O++];return e}function e0(t){let e=ae(t);return t[O]==="("?(O++,{type:g.Function,value:e}):e==="none"?{type:g.None,value:void 0}:{type:g.Ident,value:e}}function n0(t=""){let e=t.trim(),n=[],r;for(O=0;O<e.length;){if(r=e[O++],r===`
`||r==="	"||r===" "){for(;O<e.length&&(e[O]===`
`||e[O]==="	"||e[O]===" ");)O++;continue}if(r===",")return;if(r===")"){n.push({type:g.ParenClose});continue}if(r==="+"){if(O--,ne(e)){n.push(Kt(e));continue}return}if(r==="-"){if(O--,ne(e)){n.push(Kt(e));continue}if(Ge(e)){n.push({type:g.Ident,value:ae(e)});continue}return}if(r==="."){if(O--,ne(e)){n.push(Kt(e));continue}return}if(r==="/"){for(;O<e.length&&(e[O]===`
`||e[O]==="	"||e[O]===" ");)O++;let a;if(ne(e)&&(a=Kt(e),a.type!==g.Hue)){n.push({type:g.Alpha,value:a});continue}if(Ge(e)&&ae(e)==="none"){n.push({type:g.Alpha,value:{type:g.None,value:void 0}});continue}return}if(/\d/.test(r)){O--,n.push(Kt(e));continue}if(Re.test(r)){O--,n.push(e0(e));continue}return}return n}function r0(t){t._i=0;let e=t[t._i++];if(!e||e.type!==g.Function||e.value!=="color"||(e=t[t._i++],e.type!==g.Ident))return;const n=Qn[e.value];if(!n)return;const r={mode:n},a=Tn(t,!1);if(!a)return;const o=Jo(n).channels;for(let s=0,i,l;s<o.length;s++)i=a[s],l=o[s],i.type!==g.None&&(r[l]=i.type===g.Number?i.value:i.value/100,l==="alpha"&&(r[l]=Math.max(0,Math.min(1,r[l]))));return r}function Tn(t,e){const n=[];let r;for(;t._i<t.length;){if(r=t[t._i++],r.type===g.None||r.type===g.Number||r.type===g.Alpha||r.type===g.Percentage||e&&r.type===g.Hue){n.push(r);continue}if(r.type===g.ParenClose){if(t._i<t.length)return;continue}return}if(!(n.length<3||n.length>4)){if(n.length===4){if(n[3].type!==g.Alpha)return;n[3]=n[3].value}return n.length===3&&n.push({type:g.None,value:void 0}),n.every(a=>a.type!==g.Alpha)?n:void 0}}function a0(t,e){t._i=0;let n=t[t._i++];if(!n||n.type!==g.Function)return;let r=Tn(t,e);if(r)return r.unshift(n.value),r}const o0=t=>{if(typeof t!="string")return;const e=n0(t),n=e?a0(e,!0):void 0;let r,a=0,o=ee.length;for(;a<o;)if((r=ee[a++](t,n))!==void 0)return r;return e?r0(e):void 0};function s0(t,e){if(!e||e[0]!=="rgb"&&e[0]!=="rgba")return;const n={mode:"rgb"},[,r,a,o,s]=e;if(!(r.type===g.Hue||a.type===g.Hue||o.type===g.Hue))return r.type!==g.None&&(n.r=r.type===g.Number?r.value/255:r.value/100),a.type!==g.None&&(n.g=a.type===g.Number?a.value/255:a.value/100),o.type!==g.None&&(n.b=o.type===g.Number?o.value/255:o.value/100),s.type!==g.None&&(n.alpha=Math.min(1,Math.max(0,s.type===g.Number?s.value:s.value/100))),n}const i0=t=>t==="transparent"?{mode:"rgb",r:0,g:0,b:0,alpha:0}:void 0,l0=(t,e,n)=>t+n*(e-t),c0=t=>{let e=[];for(let n=0;n<t.length-1;n++){let r=t[n],a=t[n+1];r===void 0&&a===void 0?e.push(void 0):r!==void 0&&a!==void 0?e.push([r,a]):e.push(r!==void 0?[r,r]:[a,a])}return e},u0=t=>e=>{let n=c0(e);return r=>{let a=r*n.length,o=r>=1?n.length-1:Math.max(Math.floor(a),0),s=n[o];return s===void 0?void 0:t(s[0],s[1],a-o)}},B=u0(l0),jt=t=>{let e=!1,n=t.map(r=>r!==void 0?(e=!0,r):1);return e?n:t},h0={mode:"rgb",channels:["r","g","b","alpha"],parse:[s0,zo,Zo,Ko,i0,"srgb"],serialize:"srgb",interpolate:{r:B,g:B,b:B,alpha:{use:B,fixup:jt}},gamut:!0,white:{r:1,g:1,b:1},black:{r:0,g:0,b:0}},He=(t=0)=>{const e=Math.abs(t);return e<=.04045?t/12.92:(Math.sign(t)||1)*Math.pow((e+.055)/1.055,2.4)},tr=({r:t,g:e,b:n,alpha:r})=>{let a={mode:"lrgb",r:He(t),g:He(e),b:He(n)};return r!==void 0&&(a.alpha=r),a},qe=(t=0)=>{const e=Math.abs(t);return e>.0031308?(Math.sign(t)||1)*(1.055*Math.pow(e,1/2.4)-.055):t*12.92},er=({r:t,g:e,b:n,alpha:r},a="rgb")=>{let o={mode:a,r:qe(t),g:qe(e),b:qe(n)};return r!==void 0&&(o.alpha=r),o},Q=t=>(t=t%360)<0?t+360:t,f0=(t,e)=>t.map((n,r,a)=>{if(n===void 0)return n;let o=Q(n);return r===0||t[r-1]===void 0?o:e(o-Q(a[r-1]))}).reduce((n,r)=>!n.length||r===void 0||n[n.length-1]===void 0?(n.push(r),n):(n.push(r+n[n.length-1]),n),[]),Be=t=>f0(t,e=>Math.abs(e)<=180?e:e-360*Math.sign(e)),nr=(t,e)=>{if(t.h===void 0||e.h===void 0||!t.s||!e.s)return 0;let n=Q(t.h),r=Q(e.h),a=Math.sin((r-n+360)/2*Math.PI/180);return 2*Math.sqrt(t.s*e.s)*a},d0=(t,e)=>{if(t.h===void 0||e.h===void 0||!t.c||!e.c)return 0;let n=Q(t.h),r=Q(e.h),a=Math.sin((r-n+360)/2*Math.PI/180);return 2*Math.sqrt(t.c*e.c)*a},Ke=t=>{let e=t.reduce((r,a)=>{if(a!==void 0){let o=a*Math.PI/180;r.sin+=Math.sin(o),r.cos+=Math.cos(o)}return r},{sin:0,cos:0}),n=Math.atan2(e.sin,e.cos)*180/Math.PI;return n<0?360+n:n},oe=({l:t,a:e,b:n,alpha:r},a="lch")=>{e===void 0&&(e=0),n===void 0&&(n=0);let o=Math.sqrt(e*e+n*n),s={mode:a,l:t,c:o};return o&&(s.h=Q(Math.atan2(n,e)*180/Math.PI)),r!==void 0&&(s.alpha=r),s},se=({l:t,c:e,h:n,alpha:r},a="lab")=>{n===void 0&&(n=0);let o={mode:a,l:t,a:e?e*Math.cos(n/180*Math.PI):0,b:e?e*Math.sin(n/180*Math.PI):0};return r!==void 0&&(o.alpha=r),o},Rt={X:.3457/.3585,Y:1,Z:(1-.3457-.3585)/.3585};function p0({h:t,s:e,l:n,alpha:r}){t=Q(t!==void 0?t:0),e===void 0&&(e=0),n===void 0&&(n=0);let a=n+e*(n<.5?n:1-n),o=a-(a-n)*2*Math.abs(t/60%2-1),s;switch(Math.floor(t/60)){case 0:s={r:a,g:o,b:2*n-a};break;case 1:s={r:o,g:a,b:2*n-a};break;case 2:s={r:2*n-a,g:a,b:o};break;case 3:s={r:2*n-a,g:o,b:a};break;case 4:s={r:o,g:2*n-a,b:a};break;case 5:s={r:a,g:2*n-a,b:o};break;default:s={r:2*n-a,g:2*n-a,b:2*n-a}}return s.mode="rgb",r!==void 0&&(s.alpha=r),s}function b0({r:t,g:e,b:n,alpha:r}){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=Math.max(t,e,n),o=Math.min(t,e,n),s={mode:"hsl",s:a===o?0:(a-o)/(1-Math.abs(a+o-1)),l:.5*(a+o)};return a-o!==0&&(s.h=(a===t?(e-n)/(a-o)+(e<n)*6:a===e?(n-t)/(a-o)+2:(t-e)/(a-o)+4)*60),r!==void 0&&(s.alpha=r),s}const g0=(t,e)=>{switch(e){case"deg":return+t;case"rad":return t/Math.PI*180;case"grad":return t/10*9;case"turn":return t*360}},m0=new RegExp(`^hsla?\\(\\s*${Fo}${It}${Bt}${It}${Bt}\\s*(?:,\\s*${Ie}\\s*)?\\)$`),v0=t=>{let e=t.match(m0);if(!e)return;let n={mode:"hsl"};return e[3]!==void 0?n.h=+e[3]:e[1]!==void 0&&e[2]!==void 0&&(n.h=g0(e[1],e[2])),e[4]!==void 0&&(n.s=Math.min(Math.max(0,e[4]/100),1)),e[5]!==void 0&&(n.l=Math.min(Math.max(0,e[5]/100),1)),e[6]!==void 0?n.alpha=Math.max(0,Math.min(1,e[6]/100)):e[7]!==void 0&&(n.alpha=Math.max(0,Math.min(1,+e[7]))),n};function M0(t,e){if(!e||e[0]!=="hsl"&&e[0]!=="hsla")return;const n={mode:"hsl"},[,r,a,o,s]=e;if(r.type!==g.None){if(r.type===g.Percentage)return;n.h=r.value}if(a.type!==g.None){if(a.type===g.Hue)return;n.s=a.value/100}if(o.type!==g.None){if(o.type===g.Hue)return;n.l=o.value/100}return s.type!==g.None&&(n.alpha=Math.min(1,Math.max(0,s.type===g.Number?s.value:s.value/100))),n}const rr={mode:"hsl",toMode:{rgb:p0},fromMode:{rgb:b0},channels:["h","s","l","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[M0,v0],serialize:t=>`hsl(${t.h!==void 0?t.h:"none"} ${t.s!==void 0?t.s*100+"%":"none"} ${t.l!==void 0?t.l*100+"%":"none"}${t.alpha<1?` / ${t.alpha}`:""})`,interpolate:{h:{use:B,fixup:Be},s:B,l:B,alpha:{use:B,fixup:jt}},difference:{h:nr},average:{h:Ke}};function y0({h:t,s:e,v:n,alpha:r}){t=Q(t!==void 0?t:0),e===void 0&&(e=0),n===void 0&&(n=0);let a=Math.abs(t/60%2-1),o;switch(Math.floor(t/60)){case 0:o={r:n,g:n*(1-e*a),b:n*(1-e)};break;case 1:o={r:n*(1-e*a),g:n,b:n*(1-e)};break;case 2:o={r:n*(1-e),g:n,b:n*(1-e*a)};break;case 3:o={r:n*(1-e),g:n*(1-e*a),b:n};break;case 4:o={r:n*(1-e*a),g:n*(1-e),b:n};break;case 5:o={r:n,g:n*(1-e),b:n*(1-e*a)};break;default:o={r:n*(1-e),g:n*(1-e),b:n*(1-e)}}return o.mode="rgb",r!==void 0&&(o.alpha=r),o}function w0({r:t,g:e,b:n,alpha:r}){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=Math.max(t,e,n),o=Math.min(t,e,n),s={mode:"hsv",s:a===0?0:1-o/a,v:a};return a-o!==0&&(s.h=(a===t?(e-n)/(a-o)+(e<n)*6:a===e?(n-t)/(a-o)+2:(t-e)/(a-o)+4)*60),r!==void 0&&(s.alpha=r),s}const ar={mode:"hsv",toMode:{rgb:y0},parse:["--hsv"],serialize:"--hsv",fromMode:{rgb:w0},channels:["h","s","v","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:B,fixup:Be},s:B,v:B,alpha:{use:B,fixup:jt}},difference:{h:nr},average:{h:Ke}},or=Math.pow(29,3)/Math.pow(3,3),sr=Math.pow(6,3)/Math.pow(29,3);let je=t=>Math.pow(t,3)>sr?Math.pow(t,3):(116*t-16)/or;const ir=({l:t,a:e,b:n,alpha:r})=>{t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=(t+16)/116,o=e/500+a,s=a-n/200,i={mode:"xyz50",x:je(o)*Rt.X,y:je(a)*Rt.Y,z:je(s)*Rt.Z};return r!==void 0&&(i.alpha=r),i},k0=({x:t,y:e,z:n,alpha:r})=>{t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=er({r:t*3.1341359569958707-e*1.6173863321612538-.4906619460083532*n,g:t*-.978795502912089+e*1.916254567259524+.03344273116131949*n,b:t*.07195537988411677-e*.2289768264158322+1.405386058324125*n});return r!==void 0&&(a.alpha=r),a},lr=t=>k0(ir(t)),N0=t=>{let{r:e,g:n,b:r,alpha:a}=tr(t),o={mode:"xyz50",x:.436065742824811*e+.3851514688337912*n+.14307845442264197*r,y:.22249319175623702*e+.7168870538238823*n+.06061979053616537*r,z:.013923904500943465*e+.09708128566574634*n+.7140993584005155*r};return a!==void 0&&(o.alpha=a),o},ze=t=>t>sr?Math.cbrt(t):(or*t+16)/116,cr=({x:t,y:e,z:n,alpha:r})=>{t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=ze(t/Rt.X),o=ze(e/Rt.Y),s=ze(n/Rt.Z),i={mode:"lab",l:116*o-16,a:500*(a-o),b:200*(o-s)};return r!==void 0&&(i.alpha=r),i},ur=t=>{let e=cr(N0(t));return t.r===t.b&&t.b===t.g&&(e.a=e.b=0),e};function x0(t,e){if(!e||e[0]!=="lab")return;const n={mode:"lab"},[,r,a,o,s]=e;if(!(r.type===g.Hue||a.type===g.Hue||o.type===g.Hue))return r.type!==g.None&&(n.l=Math.min(Math.max(0,r.value),100)),a.type!==g.None&&(n.a=a.type===g.Number?a.value:a.value*125/100),o.type!==g.None&&(n.b=o.type===g.Number?o.value:o.value*125/100),s.type!==g.None&&(n.alpha=Math.min(1,Math.max(0,s.type===g.Number?s.value:s.value/100))),n}const hr={mode:"lab",toMode:{xyz50:ir,rgb:lr},fromMode:{xyz50:cr,rgb:ur},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-125,125],b:[-125,125]},parse:[x0],serialize:t=>`lab(${t.l!==void 0?t.l:"none"} ${t.a!==void 0?t.a:"none"} ${t.b!==void 0?t.b:"none"}${t.alpha<1?` / ${t.alpha}`:""})`,interpolate:{l:B,a:B,b:B,alpha:{use:B,fixup:jt}}};function A0(t,e){if(!e||e[0]!=="lch")return;const n={mode:"lch"},[,r,a,o,s]=e;if(r.type!==g.None){if(r.type===g.Hue)return;n.l=Math.min(Math.max(0,r.value),100)}if(a.type!==g.None&&(n.c=Math.max(0,a.type===g.Number?a.value:a.value*150/100)),o.type!==g.None){if(o.type===g.Percentage)return;n.h=o.value}return s.type!==g.None&&(n.alpha=Math.min(1,Math.max(0,s.type===g.Number?s.value:s.value/100))),n}const fr={mode:"lch",toMode:{lab:se,rgb:t=>lr(se(t))},fromMode:{rgb:t=>oe(ur(t)),lab:oe},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,150],h:[0,360]},parse:[A0],serialize:t=>`lch(${t.l!==void 0?t.l:"none"} ${t.c!==void 0?t.c:"none"} ${t.h!==void 0?t.h:"none"}${t.alpha<1?` / ${t.alpha}`:""})`,interpolate:{h:{use:B,fixup:Be},c:B,l:B,alpha:{use:B,fixup:jt}},difference:{h:d0},average:{h:Ke}},dr=({r:t,g:e,b:n,alpha:r})=>{t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=Math.cbrt(.412221469470763*t+.5363325372617348*e+.0514459932675022*n),o=Math.cbrt(.2119034958178252*t+.6806995506452344*e+.1073969535369406*n),s=Math.cbrt(.0883024591900564*t+.2817188391361215*e+.6299787016738222*n),i={mode:"oklab",l:.210454268309314*a+.7936177747023054*o-.0040720430116193*s,a:1.9779985324311684*a-2.42859224204858*o+.450593709617411*s,b:.0259040424655478*a+.7827717124575296*o-.8086757549230774*s};return r!==void 0&&(i.alpha=r),i},ie=t=>{let e=dr(tr(t));return t.r===t.b&&t.b===t.g&&(e.a=e.b=0),e},zt=({l:t,a:e,b:n,alpha:r})=>{t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=Math.pow(t+.3963377773761749*e+.2158037573099136*n,3),o=Math.pow(t-.1055613458156586*e-.0638541728258133*n,3),s=Math.pow(t-.0894841775298119*e-1.2914855480194092*n,3),i={mode:"lrgb",r:4.076741636075957*a-3.3077115392580616*o+.2309699031821044*s,g:-1.2684379732850317*a+2.6097573492876887*o-.3413193760026573*s,b:-.0041960761386756*a-.7034186179359362*o+1.7076146940746117*s};return r!==void 0&&(i.alpha=r),i},le=t=>er(zt(t));function Fe(t){const e=1.170873786407767;return .5*(e*t-.206+Math.sqrt((e*t-.206)*(e*t-.206)+4*.03*e*t))}function ce(t){return(t*t+.206*t)/(1.170873786407767*(t+.03))}function O0(t,e){let n,r,a,o,s,i,l,c;-1.88170328*t-.80936493*e>1?(n=1.19086277,r=1.76576728,a=.59662641,o=.75515197,s=.56771245,i=4.0767416621,l=-3.3077115913,c=.2309699292):1.81444104*t-1.19445276*e>1?(n=.73956515,r=-.45954404,a=.08285427,o=.1254107,s=.14503204,i=-1.2684380046,l=2.6097574011,c=-.3413193965):(n=1.35733652,r=-.00915799,a=-1.1513021,o=-.50559606,s=.00692167,i=-.0041960863,l=-.7034186147,c=1.707614701);let u=n+r*t+a*e+o*t*t+s*t*e,h=.3963377774*t+.2158037573*e,f=-.1055613458*t-.0638541728*e,d=-.0894841775*t-1.291485548*e;{let m=1+u*h,y=1+u*f,v=1+u*d,M=m*m*m,L=y*y*y,D=v*v*v,S=3*h*m*m,I=3*f*y*y,R=3*d*v*v,$=6*h*h*m,p=6*f*f*y,N=6*d*d*v,A=i*M+l*L+c*D,x=i*S+l*I+c*R,k=i*$+l*p+c*N;u=u-A*x/(x*x-.5*A*k)}return u}function Ye(t,e){let n=O0(t,e),r=zt({l:1,a:n*t,b:n*e}),a=Math.cbrt(1/Math.max(r.r,r.g,r.b)),o=a*n;return[a,o]}function E0(t,e,n,r,a,o=null){o||(o=Ye(t,e));let s;if((n-a)*o[1]-(o[0]-a)*r<=0)s=o[1]*a/(r*o[0]+o[1]*(a-n));else{s=o[1]*(a-1)/(r*(o[0]-1)+o[1]*(a-n));{let i=n-a,l=r,c=.3963377774*t+.2158037573*e,u=-.1055613458*t-.0638541728*e,h=-.0894841775*t-1.291485548*e,f=i+l*c,d=i+l*u,m=i+l*h;{let y=a*(1-s)+s*n,v=s*r,M=y+v*c,L=y+v*u,D=y+v*h,S=M*M*M,I=L*L*L,R=D*D*D,$=3*f*M*M,p=3*d*L*L,N=3*m*D*D,A=6*f*f*M,x=6*d*d*L,k=6*m*m*D,w=4.0767416621*S-3.3077115913*I+.2309699292*R-1,G=4.0767416621*$-3.3077115913*p+.2309699292*N,tt=4.0767416621*A-3.3077115913*x+.2309699292*k,et=G/(G*G-.5*w*tt),nt=-w*et,bt=-1.2684380046*S+2.6097574011*I-.3413193965*R-1,gt=-1.2684380046*$+2.6097574011*p-.3413193965*N,kt=-1.2684380046*A+2.6097574011*x-.3413193965*k,fe=gt/(gt*gt-.5*bt*kt),At=-bt*fe,jr=-.0041960863*S-.7034186147*I+1.707614701*R-1,an=-.0041960863*$-.7034186147*p+1.707614701*N,ci=-.0041960863*A-.7034186147*x+1.707614701*k,zr=an/(an*an-.5*jr*ci),on=-jr*zr;nt=et>=0?nt:1e6,At=fe>=0?At:1e6,on=zr>=0?on:1e6,s+=Math.min(nt,Math.min(At,on))}}}return s}function Xe(t,e,n=null){n||(n=Ye(t,e));let r=n[0],a=n[1];return[a/r,a/(1-r)]}function pr(t,e,n){let r=Ye(e,n),a=E0(e,n,t,1,t,r),o=Xe(e,n,r),s=.11516993+1/(7.4477897+4.1590124*n+e*(-2.19557347+1.75198401*n+e*(-2.13704948-10.02301043*n+e*(-4.24894561+5.38770819*n+4.69891013*e)))),i=.11239642+1/(1.6132032-.68124379*n+e*(.40370612+.90148123*n+e*(-.27087943+.6122399*n+e*(.00299215-.45399568*n-.14661872*e)))),l=a/Math.min(t*o[0],(1-t)*o[1]),c=t*s,u=(1-t)*i,h=.9*l*Math.sqrt(Math.sqrt(1/(1/(c*c*c*c)+1/(u*u*u*u))));return c=t*.4,u=(1-t)*.8,[Math.sqrt(1/(1/(c*c)+1/(u*u))),h,a]}function br(t){const e=t.l!==void 0?t.l:0,n=t.a!==void 0?t.a:0,r=t.b!==void 0?t.b:0,a={mode:"okhsl",l:Fe(e)};t.alpha!==void 0&&(a.alpha=t.alpha);let o=Math.sqrt(n*n+r*r);if(!o)return a.s=0,a;let[s,i,l]=pr(e,n/o,r/o),c;if(o<i){let u=0,h=.8*s,f=1-h/i;c=(o-u)/(h+f*(o-u))*.8}else{let u=i,h=.2*i*i*1.25*1.25/s,f=1-h/(l-i);c=.8+.2*((o-u)/(h+f*(o-u)))}return c&&(a.s=c,a.h=Q(Math.atan2(r,n)*180/Math.PI)),a}function gr(t){let e=t.h!==void 0?t.h:0,n=t.s!==void 0?t.s:0,r=t.l!==void 0?t.l:0;const a={mode:"oklab",l:ce(r)};if(t.alpha!==void 0&&(a.alpha=t.alpha),!n||r===1)return a.a=a.b=0,a;let o=Math.cos(e/180*Math.PI),s=Math.sin(e/180*Math.PI),[i,l,c]=pr(a.l,o,s),u,h,f,d;n<.8?(u=1.25*n,h=0,f=.8*i,d=1-f/l):(u=5*(n-.8),h=l,f=.2*l*l*1.25*1.25/i,d=1-f/(c-l));let m=h+u*f/(1-d*u);return a.a=m*o,a.b=m*s,a}const C0={...rr,mode:"okhsl",channels:["h","s","l","alpha"],parse:["--okhsl"],serialize:"--okhsl",fromMode:{oklab:br,rgb:t=>br(ie(t))},toMode:{oklab:gr,rgb:t=>le(gr(t))}};function mr(t){let e=t.l!==void 0?t.l:0,n=t.a!==void 0?t.a:0,r=t.b!==void 0?t.b:0,a=Math.sqrt(n*n+r*r),o=a?n/a:1,s=a?r/a:1,[i,l]=Xe(o,s),c=.5,u=1-c/i,h=l/(a+e*l),f=h*e,d=h*a,m=ce(f),y=d*m/f,v=zt({l:m,a:o*y,b:s*y}),M=Math.cbrt(1/Math.max(v.r,v.g,v.b,0));e=e/M,a=a/M*Fe(e)/e,e=Fe(e);const L={mode:"okhsv",s:a?(c+l)*d/(l*c+l*u*d):0,v:e?e/f:0};return L.s&&(L.h=Q(Math.atan2(r,n)*180/Math.PI)),t.alpha!==void 0&&(L.alpha=t.alpha),L}function vr(t){const e={mode:"oklab"};t.alpha!==void 0&&(e.alpha=t.alpha);const n=t.h!==void 0?t.h:0,r=t.s!==void 0?t.s:0,a=t.v!==void 0?t.v:0,o=Math.cos(n/180*Math.PI),s=Math.sin(n/180*Math.PI),[i,l]=Xe(o,s),c=.5,u=1-c/i,h=1-r*c/(c+l-l*u*r),f=r*l*c/(c+l-l*u*r),d=ce(h),m=f*d/h,y=zt({l:d,a:o*m,b:s*m}),v=Math.cbrt(1/Math.max(y.r,y.g,y.b,0)),M=ce(a*h),L=f*M/h;return e.l=M*v,e.a=L*o*v,e.b=L*s*v,e}const $0={...ar,mode:"okhsv",channels:["h","s","v","alpha"],parse:["--okhsv"],serialize:"--okhsv",fromMode:{oklab:mr,rgb:t=>mr(ie(t))},toMode:{oklab:vr,rgb:t=>le(vr(t))}};function _0(t,e){if(!e||e[0]!=="oklab")return;const n={mode:"oklab"},[,r,a,o,s]=e;if(!(r.type===g.Hue||a.type===g.Hue||o.type===g.Hue))return r.type!==g.None&&(n.l=Math.min(Math.max(0,r.type===g.Number?r.value:r.value/100),1)),a.type!==g.None&&(n.a=a.type===g.Number?a.value:a.value*.4/100),o.type!==g.None&&(n.b=o.type===g.Number?o.value:o.value*.4/100),s.type!==g.None&&(n.alpha=Math.min(1,Math.max(0,s.type===g.Number?s.value:s.value/100))),n}const P0={...hr,mode:"oklab",toMode:{lrgb:zt,rgb:le},fromMode:{lrgb:dr,rgb:ie},ranges:{l:[0,1],a:[-.4,.4],b:[-.4,.4]},parse:[_0],serialize:t=>`oklab(${t.l!==void 0?t.l:"none"} ${t.a!==void 0?t.a:"none"} ${t.b!==void 0?t.b:"none"}${t.alpha<1?` / ${t.alpha}`:""})`};function L0(t,e){if(!e||e[0]!=="oklch")return;const n={mode:"oklch"},[,r,a,o,s]=e;if(r.type!==g.None){if(r.type===g.Hue)return;n.l=Math.min(Math.max(0,r.type===g.Number?r.value:r.value/100),1)}if(a.type!==g.None&&(n.c=Math.max(0,a.type===g.Number?a.value:a.value*.4/100)),o.type!==g.None){if(o.type===g.Percentage)return;n.h=o.value}return s.type!==g.None&&(n.alpha=Math.min(1,Math.max(0,s.type===g.Number?s.value:s.value/100))),n}const D0={...fr,mode:"oklch",toMode:{oklab:t=>se(t,"oklab"),rgb:t=>le(se(t,"oklab"))},fromMode:{rgb:t=>oe(ie(t),"oklch"),oklab:t=>oe(t,"oklch")},parse:[L0],serialize:t=>`oklch(${t.l!==void 0?t.l:"none"} ${t.c!==void 0?t.c:"none"} ${t.h!==void 0?t.h:"none"}${t.alpha<1?` / ${t.alpha}`:""})`,ranges:{l:[0,1],c:[0,.4],h:[0,360]}};ht(h0);const S0=ht(hr),I0=ht(fr),R0=ht(rr),G0=ht(ar),H0=ht(C0),q0=ht(P0),B0=ht($0),K0=ht(D0);function j0([t,e,n]){const r=Ze(t),a=Ze(e),o=Ze(n);return .2126*r+.7152*a+.0722*o}function Ze(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function T(t){const e=new Map;return n=>{if(e.has(n))return e.get(n);const r=t(n);return e.set(n,r),r}}function Mr(t){const e=parseInt(t.slice(1),16);return[e>>16&255,e>>8&255,e&255]}const We=T(t=>{const[e,n,r]=Mr(t);return[e/255,n/255,r/255]}),z0=T(t=>J0(We(t))),ot=T(t=>{const{l:e,a:n,b:r}=q0(t);return[e,n,r]}),F0=T(t=>{const{h:e,s:n,l:r}=H0(t);return[e,n,r]}),Y0=T(t=>{const{h:e,s:n,v:r}=B0(t);return[e,n,r]}),X0=T(t=>{const{l:e,c:n,h:r}=K0(t);return[e,n,r]}),ft=T(t=>{const{l:e,c:n,h:r}=I0(t);return[e,n,r]}),Ue=T(t=>{const{l:e,a:n,b:r}=S0(t);return[e,n,r]}),Z0=T(t=>{const{h:e,s:n,l:r}=R0(t);return[e,n,r]}),W0=T(t=>{const{h:e,s:n,v:r}=G0(t);return[e,n,r]});function yt(t){return t===void 0}const yr=T(t=>j0(We(t)));function wr(t,e){const n=yr(t),r=yr(e);if(n!==r)return n-r;const a=ft(t),o=ft(e);return a[0]!==o[0]?a[0]-o[0]:a[1]!==o[1]?a[1]-o[1]:a[2]-o[2]}function dt(t,e,n=1,r=1,a=1){return P.deltaE(t,e,n,r,a)}function U0(t){return[t[0]/100,(t[1]+128)/255,(t[2]+128)/255]}function V0(t){return[Math.round(t[0]/100*255),Math.round(t[1]+128),Math.round(t[2]+128)]}function J0([t,e,n]){const r=1-Math.max(t,e,n),a=r<1?1/(1-r):0,o=(1-t-r)*a,s=(1-e-r)*a,i=(1-n-r)*a;return[o,s,i,r]}const kr=(2.016+2.045)/2;function Q0([t,e,n],[r,a,o]){let s=t-r,i=kr*(e-a),l=kr*(n-o);return Math.sqrt(s**2+i**2+l**2)}function T0(t,e){if(e==="rgb")return t.map(n=>[Mr(n),n]);if(e==="gl")return t.map(n=>[We(n),n]);if(e==="oklab")return t.map(n=>[ot(n),n]);if(e==="oklch")return t.map(n=>[X0(n),n]);if(e==="okhsl")return t.map(n=>[F0(n),n]);if(e==="okhsv")return t.map(n=>[Y0(n),n]);if(e==="lab")return t.map(n=>[Ue(n),n]);if(e==="lab_norm")return t.map(n=>[U0(Ue(n)),n]);if(e==="lab_int")return t.map(n=>[V0(Ue(n)),n]);if(e==="lch")return t.map(n=>[ft(n),n]);if(e==="hsl")return t.map(n=>[Z0(n),n]);if(e==="hsv")return t.map(n=>[W0(n),n]);if(e==="hex")return t.map(n=>[n,n]);if(e==="cmyk")return t.map(n=>[z0(n),n]);throw`Unknown model ${e}`}function Y(t,e){const n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(n*n+r*r+a*a)}function ts(t,e){const n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+a*a+o*o)}function es(t,e){let n=yt(t[0])&&yt(e[0])?0:t[0]-e[0]||0;const r=t[1]-e[1],a=t[2]-e[2];return n+=n>180?-360:n<-180?360:0,n/=180,Math.sqrt(n*n+r*r+a*a)}function ns(t,e){const n=t[0]-e[0],r=t[1]-e[1];let a=yt(t[2])&&yt(e[2])?0:t[2]-e[2]||0;return a+=a>180?-360:a<-180?360:0,a/=180,Math.sqrt(n*n+r*r+a*a)}function wt(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e===0?[0,0,0]:[t[0]/e,t[1]/e,t[2]/e]}function st(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function Gt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Nr(t){const e=t.reduce((n,r)=>[n[0]+r[0],n[1]+r[1],n[2]+r[2]],[0,0,0]);return[e[0]/t.length,e[1]/t.length,e[2]/t.length]}function j(t,e){return t[0]!==e[0]?t[0]-e[0]:t[1]!==e[1]?t[1]-e[1]:t[2]-e[2]}function Ft(t,e){return t[1]!==e[1]?t[1]-e[1]:t[2]!==e[2]?t[2]-e[2]:t[0]-e[0]}const xr={};function Ar(t){const e=t.name||t.toString(),n=xr[e]=xr[e]||new Map;return(r,a)=>{const o=[r,a].sort().join("|");let s=n.get(o);return s===void 0&&(s=t(r,a),n.set(o,s)),s}}function rs(t){return t.at(-1)==="h"?ns:t.at(-3)==="h"?es:t==="oklab"?Q0:t==="cmyk"?ts:Y}function K(t,e,n="gl",r,a){const o=new Map;let s=rs(n),i=s;typeof i!="function"&&(i.color?i=((y,v,...M)=>s.fn(f(y),f(v),...M)):i=s.fn);let l=r,c=l;c&&typeof c!="function"&&(c.color?c=((y,v,...M)=>l.fn(f(y),f(v),...M)):c=l.fn);const u=T0(t,n);for(const[y,v]of u)o.set(y,v);function h(y){return y.map(v=>o.get(v))}function f(y){return o.get(y)}const d={distance:Ar(i),delta:c?Ar(c):void 0,toColors:h,toColor:f},m=[...o.keys()];return e.call(d,m)?.map(y=>o.get(y))}function Or([t,e,n]){let r=0;for(let a=7;a>=0;a--){const o=1<<a,s=t&o?1:0,i=e&o?1:0,l=n&o?1:0;r=r<<3|as([s,i,l])}return r}function as([t,e,n]){return t<<2|e<<1|n}function os(t){const e=new Map;return[...t].sort((n,r)=>{let a,o;return e.has(n)?a=e.get(n):(a=Or(n),e.set(n,a)),e.has(r)?o=e.get(r):(o=Or(r),e.set(r,o)),a-o})}function Er(t,e="rgb"){const n=[...t].sort();return K(n,r=>os(r),e)}Er.params=[{name:"model",values:["rgb","lab_int"]}];class ss{populationSize;generations;maxStagnation;mutationRate;crossoverRate;eliteSize;tournamentSize;random;fitnessFunc;seedFunc;fitnessCompare;onGeneration;population;currentGeneration;bestIndividual;bestFitness;peakGeneration;constructor(e){this.populationSize=e.populationSize||100,this.generations=e.generations||200,this.maxStagnation=e.maxStagnation||20,this.mutationRate=e.mutationRate||.1,this.crossoverRate=e.crossoverRate||.9,this.eliteSize=e.eliteSize||5,this.tournamentSize=e.tournamentSize||5,this.random=e.random||Math.random,this.fitnessFunc=e.fitness||(()=>0),this.seedFunc=e.seed,this.fitnessCompare=e.compare||((n,r)=>r-n),this.onGeneration=e.onGeneration,this.population=[],this.currentGeneration=0,this.bestIndividual=null,this.bestFitness=-1/0,this.peakGeneration=0}initializePopulation(){this.population=[];for(let e=0;e<this.populationSize;e++){const n=this.seedFunc(),r=this.fitnessFunc(n);this.population.push({genome:n,fitness:r})}this.sortPopulation(),this.updateBest()}sortPopulation(){this.population.sort((e,n)=>this.fitnessCompare(e.fitness,n.fitness))}updateBest(){(this.bestFitness===-1/0||this.fitnessCompare(this.population[0].fitness,this.bestFitness)<0)&&(this.peakGeneration=this.currentGeneration,this.bestFitness=this.population[0].fitness,this.bestIndividual=[...this.population[0].genome])}tournamentSelect(){const e=[];for(let n=0;n<this.tournamentSize;n++){const r=Math.floor(this.random()*this.population.length);e.push(this.population[r])}return e.sort((n,r)=>this.fitnessCompare(n.fitness,r.fitness)),e[0]}orderCrossover(e,n){const r=e.length,a=Math.floor(this.random()*r),o=a+Math.floor(this.random()*(r-a)),s=Array(r);for(let u=a;u<=o;u++)s[u]=e[u];const i=new Set(s.slice(a,o+1)),l=[];for(let u=0;u<r;u++){const h=n[u];i.has(h)||l.push(h)}let c=0;for(let u=0;u<r;u++)s[u]===void 0&&(s[u]=l[c],c++);return s}swapMutate(e){const n=[...e],r=Math.floor(this.random()*n.length),a=Math.floor(this.random()*n.length);return[n[r],n[a]]=[n[a],n[r]],n}shiftMutate(e){const n=[...e];return n.push(n.shift()),n}cheatMutate(e){let n=this.shiftMutate(e),r=n,a=this.fitnessFunc(r);for(let s=1;s<e.length;s++){n=this.shiftMutate(n);const i=this.fitnessFunc(n);this.fitnessCompare(i,a)<0&&(a=i,r=n)}const o=[...r].reverse();return this.fitnessCompare(a,this.fitnessFunc(o))<0?o:r}evolve(){const e=[];for(let n=0;n<this.eliteSize;n++)e.push({genome:[...this.population[n].genome],fitness:this.population[n].fitness});for(;e.length<this.populationSize;){const n=this.tournamentSelect(),r=this.tournamentSelect();let a;if(this.random()<this.crossoverRate?a=this.orderCrossover(n.genome,r.genome):a=[...n.genome],this.random()<this.mutationRate){const s=this.random();s<.5?a=this.swapMutate(a):s<.7?a=this.shiftMutate(a):s<.9?a=[...a].reverse():a=this.cheatMutate(a)}const o=this.fitnessFunc(a);e.push({genome:a,fitness:o})}this.population=e,this.sortPopulation(),this.updateBest()}run(){this.initializePopulation();for(let e=0;e<this.generations&&(this.currentGeneration=e,this.onGeneration&&this.onGeneration({generation:e,bestFitness:this.population[0].fitness,bestGenome:this.population[0].genome,averageFitness:this.population.reduce((n,r)=>n+(typeof r.fitness=="number"?r.fitness:0),0)/this.population.length}),!(this.currentGeneration>this.peakGeneration+this.maxStagnation));e++)this.evolve();return{bestGenome:this.cheatMutate(this.bestIndividual),bestFitness:this.bestFitness,finalPopulation:this.population,peakGeneration:this.peakGeneration}}}function ue(t){if(t.length<2)return{totalDistance:0,avgAngleChange:0,maxAngleChange:0,meanDistance:0,devDistance:0};let e=0,n=[],r=null;const a=[];for(let c=1;c<t.length;c++){const u=Y(t[c-1],t[c]);e+=u,a.push(u);const h=wt(st(t[c],t[c-1]));if(r&&u>0){const f=Math.max(-1,Math.min(1,Gt(r,h))),d=Math.acos(f)*(180/Math.PI);n.push(d)}r=h}const o=e/(t.length-1),s=Math.sqrt(a.reduce((c,u)=>c+Math.pow(u-o,2),0)/(t.length-1)),i=n.length>0?n.reduce((c,u)=>c+u,0)/n.length:0,l=n.length>0?Math.max(...n):0;return{totalDistance:e,avgAngleChange:i,maxAngleChange:l,meanDistance:o,devDistance:s}}function is(t){let e=0;for(let n=0;n<t.length-1;n++){const r=ot(t[n]),a=ot(t[n+1]);e+=Y(r,a)}return-e}function ls(t,e){return e-t}function cs(t){return Cr(t,is,ls)}function Cr(t,e,n){let r=1;const a=[...t].sort(),o=()=>(r=r*16807%2147483647,r/2147483647),s=Math.min(40,Math.max(10,t.length))*5,i=t.length<50?250:Math.floor(31250*64/(s*t.length));return new ss({populationSize:s,generations:i,maxStagnation:t.length<50?20:10,mutationRate:.5,crossoverRate:.9,eliteSize:5,random:o,fitness:e,compare:n,seed:()=>[...a].sort(()=>o()-.5)}).run().bestGenome}function us(t){const e=t.map(o=>ot(o)),{avgAngleChange:n,maxAngleChange:r,totalDistance:a}=ue(e);return[-a,-n,-r]}function hs(t,e,n=.01){for(let r=0;r<t.length;r++){const a=(t[r]+e[r])/2,o=Math.abs(a*n),s=e[r]-t[r];if(Math.abs(s)>o)return s}return e[0]-t[0]}function fs(t){return Cr(t,us,hs)}function Ve(t,e){let n=!0;for(;n;){n=!1;for(let r=0;r<t.length-2;r++)for(let a=r+1;a<t.length-1;a++){const o=e(t[r],t[r+1])+e(t[a],t[a+1]);e(t[r],t[a])+e(t[r+1],t[a+1])<o&&(t=[...t.slice(0,r+1),...t.slice(r+1,a+1).reverse(),...t.slice(a+1)],n=!0)}}return t}function ds(t){const e=t.reduce((n,r)=>[n[0]+r[0],n[1]+r[1],n[2]+r[2]],[0,0,0]);return[e[0]/t.length,e[1]/t.length,e[2]/t.length]}function ps(t,e){const n=t.length,r=[[0,0,0],[0,0,0],[0,0,0]];for(const a of t){const o=st(a,e);for(let s=0;s<3;s++)for(let i=0;i<3;i++)r[s][i]+=o[s]*o[i]/n}return r}function bs(t){let e=[1,1,1];for(let n=0;n<100;n++){const r=[t[0][0]*e[0]+t[0][1]*e[1]+t[0][2]*e[2],t[1][0]*e[0]+t[1][1]*e[1]+t[1][2]*e[2],t[2][0]*e[0]+t[2][1]*e[1]+t[2][2]*e[2]];e=wt(r)}return e}function gs(t){if(t.length===0)return[];const e=ds(t),n=ps(t,e),r=bs(n);return[...t].sort((a,o)=>{const s=Gt(st(a,e),r),i=Gt(st(o,e),r);return s-i})}function ms(t){const e=t.length,n=t.reduce((r,a)=>[r[0]+a[0],r[1]+a[1],r[2]+a[2]],[0,0,0]).map(r=>r/e);return t.reduce((r,a)=>[r[0]+(a[0]-n[0])**2,r[1]+(a[1]-n[1])**2,r[2]+(a[2]-n[2])**2],[0,0,0]).map(r=>Math.sqrt(r/e)||1e-6)}function $r(t){const e=ms(t);return(n,r)=>Math.hypot((n[0]-r[0])/e[0],(n[1]-r[1])/e[1],(n[2]-r[2])/e[2])}function _r(t,e,n="raw"){return K(t,function(r){const a=[...r].sort(e.at(-3)?Ft:j),o=gs(a);if(n==="raw")return o;let s=this.distance,i=this.toColor;if(n==="tsp-adapt")if(e==="oklab")s=$r(a);else{const l=t.map(u=>ot(u)),c=$r(l);s=(u,h)=>c(ot(i(u)),ot(i(h)))}return Ve(o,s)},e)}_r.params=[{name:"model",values:["gl","lab","oklab"]},{name:"post",values:["raw","tsp","tsp-adapt"]}];function vs(t,e="hsl",n="bottom-up"){return t.map(r=>({vec:r,hsl:e.at(-1)==="h"?[...r].reverse():r})).sort((r,a)=>{let[o,s,i]=r.hsl,[l,c,u]=a.hsl;switch(o=o||0,l=l||0,n){case"bottom-up":return Math.abs(i-u)>.05?i-u:Math.abs(o-l)>5?o-l:s-c;case"top-down":return Math.abs(i-u)>.05?u-i:Math.abs(o-l)>5?o-l:s-c;case"outward":return Math.abs(s-c)>.05?s-c:Math.abs(o-l)>5?o-l:i-u;case"inward":return Math.abs(s-c)>.05?c-s:Math.abs(o-l)>5?o-l:i-u;default:return 0}}).map(r=>r.vec)}function Pr(t,e="hsl",n="bottom-up"){return K(t,function(r){const a=e.at(-3)?Ft:j,o=[...r].sort(a);return vs(o,e,n)},e)}Pr.params=[{name:"model",values:["hsl","hsv","lch","okhsl","okhsv","oklch"]},{name:"mode",values:["outward","inward","bottom-up","top-down"]}];function Ms(t,e="hsl",n="ascending"){const r=t.map(a=>{const o=e.at(-1)==="h"?[...a].reverse():a,s=(o[2]||0)*360+o[0];return{vec:a,hsl:o,spiralParam:s}});return r.sort((a,o)=>{const s=n==="ascending"?a.spiralParam-o.spiralParam:o.spiralParam-a.spiralParam;return Math.abs(s)<1?a.hsl[1]-o.hsl[1]:s}),r.map(a=>a.vec)}function Lr(t,e="hsl",n="ascending"){return K(t,function(r){const a=e.at(-3)?Ft:j,o=[...r].sort(a);return Ms(o,e,n)},e)}Lr.params=[{name:"model",values:["hsl","hsv","lch","okhsl","okhsv","oklch"]},{name:"direction",values:["ascending","descending"]}];function ys(){let t=1;return()=>(t=t*16807%2147483647,t/2147483647)}function ws(t,e){return he(t,e)[0]}function he(t,e){const n=[];for(let r=0;r<t.length;r++)for(let a=r+1;a<t.length;a++){const o=t[r][0]-t[a][0],s=t[r][1]-t[a][1],i=t[r][2]-t[a][2],l=Math.sqrt(o*o+s*s+i*i);n.push({data:[t[r],t[a]],dist:l})}return n.sort((r,a)=>{if(r.dist!==a.dist)return r.dist-a.dist;const o=[...r.data].sort(e),s=[...a.data].sort(e);return e(o[0],s[0])}),n.map(r=>r.data)}function Je(t,e){if(t.length===2)return[...t];let n=-1/0,r=null,a=null,o=null;for(let s=0;s<t.length;s++)for(let i=0;i<t.length;i++)if(i!==s)for(let l=0;l<t.length;l++){if(l===s||l===i)continue;const c=wt(st(t[i],t[s])),u=wt(st(t[l],t[i])),h=Gt(c,u);h>n&&(n=h,r=t[s],a=t[i],o=t[l])}return e.distance(r,a)<e.distance(a,o)?o=a:r=a,[r,o]}function ks(t,e,n="average"){switch(n){case"single":let r=1/0;for(const o of t.colors)for(const s of e.colors)r=Math.min(r,Y(o,s));return r;case"complete":let a=0;for(const o of t.colors)for(const s of e.colors)a=Math.max(a,Y(o,s));return a;default:return Y(t.centroid,e.centroid)}}function Ns(t,e="average"){let n=t.map(r=>({colors:[r],centroid:r,distance:0}));for(;n.length>1;){let r=1/0,a=0,o=1;for(let i=0;i<n.length;i++)for(let l=i+1;l<n.length;l++){const c=ks(n[i],n[l],e);c<r&&(r=c,a=i,o=l)}const s={colors:[...n[a].colors,...n[o].colors],left:n[a],right:n[o],centroid:Nr([...n[a].colors,...n[o].colors]),distance:r};n=n.filter((i,l)=>l!==a&&l!==o),n.push(s)}return n[0]}function pt(t,e="balanced"){if(!t.left&&!t.right||!t.left||!t.right)return t.colors;switch(e){case"depth-first":return[...pt(t.left,e),...pt(t.right,e)];case"breadth-first":return t.left.colors.length<=t.right.colors.length?[...pt(t.left,e),...pt(t.right,e)]:[...pt(t.right,e),...pt(t.left,e)];default:const n=pt(t.left,e),r=pt(t.right,e),a=Y(n[n.length-1],r[0]),o=Y(r[r.length-1],n[0]);return a<=o?[...n,...r]:[...r,...n]}}function xs(t,e="average",n="balanced"){if(t.length===0)return[];if(t.length===1)return t;const r=Ns(t,e);return pt(r,n)}function As(t,e,n){return[...t].sort(()=>n()-.5).slice(0,e)}function Os(t,e){return t.map(n=>{let r=1/0,a=0;return e.forEach((o,s)=>{const i=Y(n,o);i<r&&(r=i,a=s)}),a})}function Es(t,e,n,r){const a=[];for(let o=0;o<n;o++){const s=t.filter((i,l)=>e[l]===o);s.length>0?a.push(Nr(s)):a.push(t[Math.floor(r()*t.length)])}return a}function Cs(t,e=8,n=50){if(t.length===0)return[];if(t.length<=e)return t;const r=ys();let a=As(t,e,r),o=[];for(let c=0;c<n;c++){const u=Os(t,a);if(JSON.stringify(u)===JSON.stringify(o))break;o=u,a=Es(t,o,e,r)}const s=Array.from({length:e},()=>[]);t.forEach((c,u)=>{s[o[u]].push(c)});const i=s.map((c,u)=>({cluster:c,centroid:a[u]})).filter(c=>c.cluster.length>0).sort((c,u)=>{const h=c.centroid[0]+c.centroid[1]+c.centroid[2],f=u.centroid[0]+u.centroid[1]+u.centroid[2];return h-f}),l=[];for(const{cluster:c,centroid:u}of i){const h=c.sort((f,d)=>Y(f,u)-Y(d,u));l.push(...h)}return l}function Dr(t,e,n){const r=[],a=t[e];return t.forEach((o,s)=>{Y(a,o)<=n&&r.push(s)}),r}function $s(t,e=30,n=3){if(t.length===0)return[];const r=new Set,a=[],o=[];t.forEach((i,l)=>{if(r.has(l))return;r.add(l);const c=Dr(t,l,e);if(c.length<n)o.push(l);else{const u=[],h=[...c];for(;h.length>0;){const f=h.shift();if(!r.has(f)){r.add(f);const d=Dr(t,f,e);d.length>=n&&h.push(...d)}u.push(f)}a.push(u)}}),a.sort((i,l)=>{const c=i.reduce((h,f)=>{const d=t[f];return h+d[0]+d[1]+d[2]},0)/i.length,u=l.reduce((h,f)=>{const d=t[f];return h+d[0]+d[1]+d[2]},0)/l.length;return c-u});const s=[];for(const i of a){const l=new Set(i),c=[];let u=i[0];for(c.push(u),l.delete(u);l.size>0;){let h=-1,f=1/0;for(const d of l){const m=Y(t[u],t[d]);m<f&&(f=m,h=d)}if(h!==-1)c.push(h),l.delete(h),u=h;else break}s.push(...c.map(h=>t[h]))}return s.push(...o.map(i=>t[i])),s}const Qe={rgb:"gl",lab:"lab_norm"};function Sr(t,e="rgb",n="average",r="balanced"){return K(t,a=>{const o=[...a].sort(j);return xs(o,n,r)},Qe[e]||e)}Sr.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"linkage",values:["single","complete","average"]},{name:"traversal",values:["depth-first","breadth-first","balanced"]}];function Ir(t,e="rgb",n=.5,r=50){return K(t,a=>{const o=[...a].sort(j);return Cs(o,Math.ceil(n*a.length),r)},Qe[e]||e)}Ir.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"k",values:[.3,.5,.7]},{name:"iterations",values:[10,50,100,250]}];function Rr(t,e="rgb",n=.3,r=3){const a=e.at(-3)==="h"?Ft:j;return K(t,o=>{const s=[...o].sort(j),[i,l]=he(s,a).at(-1),c=Y(i,l)*n;return $s(s,c,r)},Qe[e]||e)}Rr.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"eps",values:[.1,.3,.5]},{name:"pts",values:[3,5,7]}];function _s(t,e){if(t.length===0)return[];if(t.length===1)return t;const{selectStart:n,distance:r,compareColors:a}=e,o=new Map;for(const c of t)o.set(c,t.filter(u=>u!==c));let s=n(t);const i=[s],l=new Set([s]);for(;i.length<t.length;){const c=o.get(s).filter(f=>!l.has(f));let u=c[0],h=r(s,u);for(let f=1;f<c.length;f++){const d=c[f],m=r(s,d);(m<h||m===h&&a(d,u)<0)&&(h=m,u=d)}s=u,l.add(s),i.push(s)}return i}function Te(t,e="rgb",n="bright",r="euclidean"){return K(t,function(a){const{toColors:o}=this;function s(l){const c=o(l),u=c.reduce((h,f)=>wr(f,h)>0?f:h);return l[c.indexOf(u)]}function i(l){const c=o(l),u=c.reduce((h,f)=>wr(f,h)<0?f:h);return l[c.indexOf(u)]}return _s(a,{selectStart:n==="bright"?s:i,distance:r==="euclidean"?this.distance:this.delta,compareColors:e.at(-3)==="h"?Ft:j})},e,{fn:dt,color:!0})}Te.params=[{name:"model",values:["hsl","hsv","oklch","oklab","okhsl","okhsv","lch","lab","rgb","cmyk"]},{name:"start",values:["bright","dark"]}];function Gr(t,e="bright"){return Te(t,"rgb",e,"delta")}Gr.params=[{name:"start",values:["bright","dark"]}];function Ps(t){let e=0,n=0,r=0;for(const[u,h,f]of t)e+=u,n+=h,r+=f||0;const a=e/t.length,o=n/t.length,s=r/t.length;let i=0,l=0,c=0;for(const[u,h,f]of t){const d=Math.abs(u-a)/(u+a)||0,m=Math.abs(h-o)/(h+o)||0,y=Math.abs(f-s)/(f+s)||0;i+=d,l+=m,c+=y}return[i,l,c]}function tn(t){const e=t.reduce((i,[l])=>i+l,0)/t.length,n=t.reduce((i,[,l])=>i+l,0)/t.length,r=Ls(t.map(([,,i])=>i).filter(i=>!yt(i))),a=t.reduce((i,[l])=>i+Math.pow(l-e,2),0)/t.length,o=t.reduce((i,[,l])=>i+Math.pow(l-n,2),0)/t.length,s=Ds(t.map(([,,i])=>i).filter(i=>!yt(i)),r);return{L:Math.sqrt(a),C:Math.sqrt(o),H:Math.sqrt(s),meanL:e,meanC:n,meanH:r}}function Ls(t){if(t.length===0)return 0;const e=t.filter(o=>!yt(o)).map(o=>o*Math.PI/180),n=e.reduce((o,s)=>o+Math.sin(s),0),r=e.reduce((o,s)=>o+Math.cos(s),0);let a=Math.atan2(n/t.length,r/t.length)*(180/Math.PI);return a<0&&(a+=360),a}function Ds(t,e){return t.length===0?0:t.map(n=>{let r=n-e;return r>180&&(r-=360),r<-180&&(r+=360),r*r}).reduce((n,r)=>n+r,0)/t.length}function Hr(t){const e=Math.max(Number.EPSILON,t.L+t.C+(t.H??0));return{Kl:(e-t.L)/(2*e),Kc:(e-t.C)/(2*e),Kh:(e-t.H)/(2*e)}}function en(t){const e=tn(t),n=t.map(([l])=>l),r=t.map(([,l])=>l),a=Math.max(...n)-Math.min(...n),o=Math.max(...r)-Math.min(...r),s=qr(t),i={...e,lightnessRange:a,chromaRange:o,hueSpread:s};return s>180&&e.H>70&&e.L<80?{Kl:.5,Kc:1,Kh:2,type:"Rainbow",data:i}:a>50&&e.L>20&&s<30?{Kl:2,Kc:.5,Kh:.5,type:"Monochromatic",data:i}:o>50&&e.C>15&&s<60?{Kl:.5,Kc:2,Kh:1,type:"Wide Chroma",data:i}:e.H<15&&e.L<15&&e.C<15?{Kl:1.2,Kc:1.2,Kh:1.2,type:"Uniform",data:i}:{Kl:1,Kc:1,Kh:1,type:"Balanced",data:i}}function Ss(t){if(t.length===0)return 0;const e=[...t].sort((a,o)=>a-o);let n=0;for(let a=0;a<e.length-1;a++){const o=e[a+1]-e[a];n=Math.max(n,o)}const r=360-(e[e.length-1]-e[0]);return n=Math.max(n,r),360-n}function qr(t){return Ss(t.map(([,,e])=>e).filter(e=>!yt(e)))}function Yt(t,e){const n=new Map;for(let s=0;s<t.length;s++){const i=new Set;for(let l=0;l<t.length;l++)s!==l&&i.add({color:t[l],distance:e(t[s],t[l])});n.set(t[s],i)}const r=[],a=new Set;function o(s){r.push(s),a.add(s);const i=[...n.get(s)].sort((l,c)=>l.distance-c.distance);for(const l of i)a.has(l.color)||o(l.color)}return o(t[0]),r}function Br(t,e="raw"){return K(t,function(n){const r=[...n].sort(),a=Yt(r,this.delta);return e==="raw"?a:Ve(a,this.delta)},"hex",dt)}Br.params=[{name:"post",values:["raw","tsp"]}];function Is(t){return K(t,function(e){const n=[...e].sort(j),r=Ps(n);return Yt(n,(a,o)=>this.delta(a,o,...r))},"lch",{fn:dt,color:!0})}function Rs(t){const e=t.map(s=>ft(s)),{Kl:n,Kc:r,Kh:a}=en(e),o=[n,r,a];return K(t,function(s){const i=[...s].sort();return Yt(i,(l,c)=>this.delta(l,c,...o))},"hex",dt)}function Gs(t){const e=t.map(i=>ft(i)),n=tn(e),{Kc:r,Kh:a,Kl:o}=Hr(n),s=[o,r,a];return K(t,function(i){const l=[...i].sort();return Yt(l,(c,u)=>this.delta(c,u,...s))},"hex",dt)}function Hs(t){const e=t.map(i=>ft(i)),n=tn(e),{Kc:r,Kh:a,Kl:o}=Hr(n),s=[o,r,a+.5];return K(t,function(i){const l=[...i].sort();return Yt(l,(c,u)=>this.delta(c,u,...s))},"hex",dt)}function nn(t,e,n,r,a=1e6){const o=r(t,e),s=wt(st(e,t));let i=o;if(n){const l=(1-Gt(n,s))*a;i=o*(1+l)}return{score:i,direction:s}}function rn(t,e,n,r,a,o=1e6){const s=a(t,e),i=r(t,e)*s/128,l=wt(st(e,t));let c=i;if(n){const u=(1-Gt(n,l))*o;c=i*(1+u)}return{score:c,direction:l}}function Ht(t,e,n){const r=new Set(t),a=[];let[o,s]=e;a.push(o,s),r.delete(o),r.delete(s);let i=wt(st(o,s)),l=wt(st(s,o));for(;r.size>0;){let c=[];for(const h of r){const f=n(o,h,i),d=n(s,h,l),m=Math.min(f.score,d.score);c.push({candidate:h,scoreStart:f,scoreEnd:d,minScore:m})}c.sort((h,f)=>h.minScore-f.minScore);const u=c[0];u.scoreStart.score<=u.scoreEnd.score?(a.unshift(u.candidate),i=u.scoreStart.direction,o=u.candidate):(a.push(u.candidate),l=u.scoreEnd.direction,s=u.candidate),r.delete(u.candidate)}return a}function qs(t){return K(t,function(e){const n=[...e].sort(j),r=(a,o,s)=>nn(a,o,s,this.distance);return Ht(n,ws(n,j),r)},"oklab")}function Kr(t,e="raw"){return K(t,function(n){const r=[...n].sort(j),a=he(r,j).slice(0,128),o=(i,l,c)=>nn(i,l,c,this.distance),s=a.map(i=>{const l=Ht(r,i,o);return{vectors:l,metrics:ue(this.toColors(l))}});return s.sort((i,l)=>i.metrics.totalDistance-l.metrics.totalDistance),e==="tsp"?Ve(s[0].vectors,this.distance):s[0].vectors},"oklab")}Kr.params=[{name:"post",values:["raw","tsp"]}];function Bs(t){return K(t,function(e){const n=[...e].sort(j),r=he(n,j).slice(0,128),a=(i,l)=>this.delta(i,l),o=(i,l,c)=>rn(i,l,c,this.distance,a),s=r.map(i=>{const l=Ht(n,i,o);return{vectors:l,metrics:ue(this.toColors(l))}});return s.sort((i,l)=>i.metrics.totalDistance-l.metrics.totalDistance),s[0].vectors},"oklab",{fn:dt,color:!0})}function Ks(t){return K(t,function(e){const n=[...e].sort(j),r=(a,o,s)=>nn(a,o,s,this.distance);return Ht(n,Je(n,this),r)},"oklab")}function js(t){return K(t,function(e){const n=[...e].sort(j),r=(o,s)=>this.delta(o,s),a=(o,s,i)=>rn(o,s,i,this.distance,r);return Ht(n,Je(n,this),a)},"oklab",{fn:dt,color:!0})}function zs(t){const e=t.map(s=>ft(s)),{Kl:n,Kc:r,Kh:a}=en(e),o=[n,r,a];return K(t,function(s){const i=[...s].sort(j),l=(u,h)=>this.delta(u,h,...o),c=(u,h,f)=>rn(u,h,f,this.distance,l);return Ht(i,Je(i,this),c)},"oklab",{fn:dt,color:!0})}const Fs=0,Ys=1,Xs=1,Zs=2,Ws=2,Us=2,Vs=3,Js=3,Qs=3,Ts=3,ti=70,ei={Original:Fs,SPI:Ys,CYL:Xs,HIL:Zs,KM:Ws,DBSCAN:Us,HARM:Vs,HARMED:Js,"NNA(DE) Lab":3,"NNA(DE+) Lab":3,"NNA(DE++) Lab":3,"NNA(DE+1) Lab":3,"NNA(DE+2) Lab":3,"MOM(Closest)-Oklab":3,PCA:Qs,CL:Ts,"MOM(Inlinest)-Oklab":4,"MOM(Inlinest,DE)-Oklab":4,"MOM(Inlinest,DE++)-Oklab":4,"MOM(Closest+)-Oklab":5,"MOM(Closest+,DE)-Oklab":5,"GEN-Oklab":5,"GEN3-Oklab":5,_TOTAL:ti},X={PCA:["PCA","Principal component analysis","https://en.wikipedia.org/wiki/Principal_component_analysis"],HIL:["HIL","Hilbert curve","https://en.wikipedia.org/wiki/Hilbert_curve"],GEN:["GEN","Genetic algorithm","https://en.wikipedia.org/wiki/Genetic_algorithm"],NNA:["NNA","Nearest neighbour algorithm","https://en.wikipedia.org/wiki/Nearest_neighbour_algorithm"],MOM:["MON","Greedy with momentum"," https://en.wikipedia.org/wiki/Greedy_algorithm"]},Z={RGB:["RGB","https://en.wikipedia.org/wiki/RGB_color_model"],LAB:["CIELAB","https://en.wikipedia.org/wiki/CIELAB_color_space"],OKLAB:["Oklab","https://en.wikipedia.org/wiki/Oklab_color_space"]},xt={DE:["DE","Delta E","http://www.brucelindbloom.com/index.html?Eqn_DeltaE_CIE2000.html"]},ni=[{name:"Original",fn:t=>t,mid:"Original",description:{model:null}},{name:"HARM",fn:Te,mid:"HARM",description:{}},{name:"HARMED",fn:Gr,mid:"HARMED",description:{}},{name:"NNA(Delta E)",fn:Br,mid:"NNA(DE) Lab",description:{method:X.NNA,model:Z.LAB,diff:xt.DE}},{name:"NNA(Delta E+)",fn:Is,mid:"NNA(DE+) Lab",description:{method:X.NNA,model:Z.LAB,diff:xt.DE}},{name:"NNA(Delta E++)",fn:Rs,mid:"NNA(DE++) Lab",description:{method:X.NNA,model:Z.LAB,diff:xt.DE}},{name:"NNA(Delta E+1)",fn:Gs,mid:"NNA(DE+1) Lab",description:{method:X.NNA,model:Z.LAB,diff:xt.DE}},{name:"NNA(Delta E+2)",fn:Hs,mid:"NNA(DE+2) Lab",description:{method:X.NNA,model:Z.LAB,diff:xt.DE}},{name:"MOM(Closest) Oklab",fn:qs,mid:"MOM(Closest)-Oklab",description:{method:X.MOM,model:Z.OKLAB}},{name:"MOM(Closest+) Oklab",fn:Kr,mid:"MOM(Closest+)-Oklab",description:{method:X.MOM,model:Z.OKLAB}},{name:"MOM(Closest+, Delta E) Oklab",fn:Bs,mid:"MOM(Closest+,DE)-Oklab",description:{method:X.MOM,model:Z.OKLAB}},{name:"MOM(Inlinest) Oklab",fn:Ks,mid:"MOM(Inlinest)-Oklab",description:{method:X.MOM,model:Z.OKLAB}},{name:"MOM(Inlinest, Delta E) Oklab",fn:js,mid:"MOM(Inlinest,DE)-Oklab",description:{method:X.MOM,model:Z.OKLAB,diff:xt.DE}},{name:"MOM(Inlinest, Delta E++) Oklab",fn:zs,mid:"MOM(Inlinest,DE++)-Oklab",description:{method:X.MOM,model:Z.OKLAB,diff:xt.DE}},{name:"Genetic Oklab",fn:cs,mid:"GEN-Oklab",description:{method:X.GEN,model:Z.OKLAB}},{name:"Genetic3 Oklab",fn:fs,mid:"GEN3-Oklab",description:{method:X.GEN,model:Z.OKLAB}},{name:"Hilbert",fn:Er,mid:"HIL",description:{method:X.HIL,model:Z.RGB}},{name:"PCA",fn:_r,mid:"PCA",description:{method:X.PCA}},{name:"Spiral",fn:Pr,mid:"SPI",description:{}},{name:"Cylindrical",fn:Lr,mid:"CYL",description:{}},{name:"Cluster",fn:Sr,mid:"CL",description:{}},{name:"K-means",fn:Ir,mid:"KM",description:{}},{name:"DBSCAN",fn:Rr,mid:"DBSCAN",description:{}}];function ri(t){return t.reduce((e,{values:n})=>e.flatMap(r=>n.map(a=>[...r,a])),[[]])}const ai=ni.reduce((t,e)=>{if(e.fn.params){const n=ri(e.fn.params);for(const r of n)t.push({...e,name:`${e.name} [${r.join(",")}]`,mid:`${e.mid}:[${r.join(",")}]`,speed:ei[e.mid]||0,fn:a=>e.fn.call(null,a,...r)})}else t.push(e);return t},[]);function oi(t){if(t.length<2)return{totalDistance:0,avgAngleChange:0,maxAngleChange:0,meanDistance:0,devDistance:0,totalCurveDistance:0,meanCurveDistance:0,devCurveDistance:0,lchAvgChange:{L:0,C:0,H:0},lchMaxChange:{L:0,C:0,H:0},lchDeviation:{L:0,C:0,H:0},curveRatio:0,perceptualUniformity:0,curveUniformity:0,harmonicScore:0,harmonicCurveScore:0};const e=t.map(k=>ot(k)),n=t.map(k=>ft(k)),{totalDistance:r,avgAngleChange:a,devDistance:o,maxAngleChange:s,meanDistance:i}=ue(e),l=qr(n);let c=0;const u=[],h=[e[0],...e,e[e.length-1]],f=[],d=[],m=[];for(let k=1;k<e.length;k++){const w=ii(h[k-1],h[k],h[k+1],h[k+2]);c+=w,u.push(w);const[G,tt,et]=n[k-1],[nt,bt,gt]=n[k];if(f.push(Math.abs(nt-G)),d.push(Math.abs(bt-tt)),!isNaN(et)&&!isNaN(gt)){let kt=Math.abs(gt-et);kt>180&&(kt=360-kt),m.push(kt)}else isNaN(et)&&isNaN(gt)?m.push(0):m.push(90)}const y=c/(e.length-1),v=Math.sqrt(u.reduce((k,w)=>k+Math.pow(w-y,2),0)/(e.length-1)),M={L:f.reduce((k,w)=>k+w,0)/f.length,C:d.reduce((k,w)=>k+w,0)/d.length,H:m.reduce((k,w)=>k+w,0)/m.length},L={L:Math.max(...f),C:Math.max(...d),H:Math.max(...m)},D=M.L,S=M.C,I=M.H,R={L:Math.sqrt(f.reduce((k,w)=>k+Math.pow(w-D,2),0)/f.length),C:Math.sqrt(d.reduce((k,w)=>k+Math.pow(w-S,2),0)/d.length),H:Math.sqrt(m.reduce((k,w)=>k+Math.pow(w-I,2),0)/m.length)},$=1/(1+o),p=1/(1+v),N=c/r-1,A=$*.4+Math.min(l/180,1)*.3+1/(1+R.H/45)*.3,x=p*.4+Math.min(l/180,1)*.3+1/(1+R.H/45)*.3;return{totalDistance:r,avgAngleChange:a,maxAngleChange:s,meanDistance:i,devDistance:o,totalCurveDistance:c,meanCurveDistance:y,devCurveDistance:v,lchAvgChange:M,lchMaxChange:L,lchDeviation:R,curveRatio:N,perceptualUniformity:$,curveUniformity:p,harmonicScore:A,harmonicCurveScore:x}}function si(t,e,n,r,a){const o=a*a,s=o*a;return[.5*(2*e[0]+(-t[0]+n[0])*a+(2*t[0]-5*e[0]+4*n[0]-r[0])*o+(-t[0]+3*e[0]-3*n[0]+r[0])*s),.5*(2*e[1]+(-t[1]+n[1])*a+(2*t[1]-5*e[1]+4*n[1]-r[1])*o+(-t[1]+3*e[1]-3*n[1]+r[1])*s),.5*(2*e[2]+(-t[2]+n[2])*a+(2*t[2]-5*e[2]+4*n[2]-r[2])*o+(-t[2]+3*e[2]-3*n[2]+r[2])*s)]}function ii(t,e,n,r,a=12){let o=0,s=e;for(let i=1;i<=a;i++){const l=i/a,c=si(t,e,n,r,l);o+=Y(s,c),s=c}return o}async function li(t){const e=performance.now(),n=await t(),r=performance.now()-e;return{result:n,elapsed:r}}self.onmessage=async t=>{const{sortName:e,getPaletteType:n,palette:r}=t.data;if(e){const a=ai.find(u=>u.name===e).fn,{result:o,elapsed:s}=await li(async()=>await a(r)),i=ot(o[0]),l=ot(o.at(-1));i[0]>l[0]&&o.reverse();const c=oi(o);self.postMessage({result:o,metrics:c,elapsed:s})}else if(n){const a=n.map(o=>ft(o));self.postMessage(en(a))}}})();
