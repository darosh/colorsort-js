(function(){"use strict";const{min:Kn,max:qn}=Math;var gt=(t,e=0,n=1)=>Kn(qn(e,t),n),Ft=t=>{t._clipped=!1,t._unclipped=t.slice(0);for(let e=0;e<=3;e++)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]=gt(t[e],0,255)):e===3&&(t[e]=gt(t[e],0,1));return t};const xe={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])xe[`[object ${t}]`]=t.toLowerCase();function O(t){return xe[Object.prototype.toString.call(t)]||"object"}var A=(t,e=null)=>t.length>=3?Array.prototype.slice.call(t):O(t[0])=="object"&&e?e.split("").filter(n=>t[0][n]!==void 0).map(n=>t[0][n]):t[0].slice(0),wt=t=>{if(t.length<2)return null;const e=t.length-1;return O(t[e])=="string"?t[e].toLowerCase():null};const{PI:Pt,min:Oe,max:Se}=Math,F=t=>Math.round(t*100)/100,Wt=t=>Math.round(t*100)/100,et=Pt*2,Zt=Pt/3,Tn=Pt/180,Yn=180/Pt;function Le(t){return[...t.slice(0,3).reverse(),...t.slice(3)]}var N={format:{},autodetect:[]};class g{constructor(...e){const n=this;if(O(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let s=wt(e),r=!1;if(!s){r=!0,N.sorted||(N.autodetect=N.autodetect.sort((o,c)=>c.p-o.p),N.sorted=!0);for(let o of N.autodetect)if(s=o.test(...e),s)break}if(N.format[s]){const o=N.format[s].apply(null,r?e:e.slice(0,-1));n._rgb=Ft(o)}else throw new Error("unknown format: "+e);n._rgb.length===3&&n._rgb.push(1)}toString(){return O(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const Xn="3.2.0",E=(...t)=>new g(...t);E.version=Xn;const _t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Fn=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Wn=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,De=t=>{if(t.match(Fn)){(t.length===4||t.length===7)&&(t=t.substr(1)),t.length===3&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=parseInt(t,16),n=e>>16,s=e>>8&255,r=e&255;return[n,s,r,1]}if(t.match(Wn)){(t.length===5||t.length===9)&&(t=t.substr(1)),t.length===4&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16),n=e>>24&255,s=e>>16&255,r=e>>8&255,o=Math.round((e&255)/255*100)/100;return[n,s,r,o]}throw new Error(`unknown hex color: ${t}`)},{round:Bt}=Math,Re=(...t)=>{let[e,n,s,r]=A(t,"rgba"),o=wt(t)||"auto";r===void 0&&(r=1),o==="auto"&&(o=r<1?"rgba":"rgb"),e=Bt(e),n=Bt(n),s=Bt(s);let i="000000"+(e<<16|n<<8|s).toString(16);i=i.substr(i.length-6);let a="0"+Bt(r*255).toString(16);switch(a=a.substr(a.length-2),o.toLowerCase()){case"rgba":return`#${i}${a}`;case"argb":return`#${a}${i}`;default:return`#${i}`}};g.prototype.name=function(){const t=Re(this._rgb,"rgb");for(let e of Object.keys(_t))if(_t[e]===t)return e.toLowerCase();return t},N.format.named=t=>{if(t=t.toLowerCase(),_t[t])return De(_t[t]);throw new Error("unknown color name: "+t)},N.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&O(t)==="string"&&_t[t.toLowerCase()])return"named"}}),g.prototype.alpha=function(t,e=!1){return t!==void 0&&O(t)==="number"?e?(this._rgb[3]=t,this):new g([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},g.prototype.clipped=function(){return this._rgb._clipped||!1};const tt={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},Zn=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function nt(t){const e=Zn.get(String(t).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+t);tt.labWhitePoint=t,tt.Xn=e[0],tt.Zn=e[1]}function Dt(){return tt.labWhitePoint}const Vt=(...t)=>{t=A(t,"lab");const[e,n,s]=t,[r,o,c]=Vn(e,n,s),[i,a,l]=$e(r,o,c);return[i,a,l,t.length>3?t[3]:1]},Vn=(t,e,n)=>{const{kE:s,kK:r,kKE:o,Xn:c,Yn:i,Zn:a}=tt,l=(t+16)/116,f=.002*e+l,u=l-.005*n,h=f*f*f,b=u*u*u,M=h>s?h:(116*f-16)/r,_=t>o?Math.pow((t+16)/116,3):t/r,d=b>s?b:(116*u-16)/r,p=M*c,D=_*i,S=d*a;return[p,D,S]},Ut=t=>{const e=Math.sign(t);return t=Math.abs(t),(t<=.0031308?t*12.92:1.055*Math.pow(t,1/2.4)-.055)*e},$e=(t,e,n)=>{const{MtxAdaptMa:s,MtxAdaptMaI:r,MtxXYZ2RGB:o,RefWhiteRGB:c,Xn:i,Yn:a,Zn:l}=tt,f=i*s.m00+a*s.m10+l*s.m20,u=i*s.m01+a*s.m11+l*s.m21,h=i*s.m02+a*s.m12+l*s.m22,b=c.X*s.m00+c.Y*s.m10+c.Z*s.m20,M=c.X*s.m01+c.Y*s.m11+c.Z*s.m21,_=c.X*s.m02+c.Y*s.m12+c.Z*s.m22,d=(t*s.m00+e*s.m10+n*s.m20)*(b/f),p=(t*s.m01+e*s.m11+n*s.m21)*(M/u),D=(t*s.m02+e*s.m12+n*s.m22)*(_/h),S=d*r.m00+p*r.m10+D*r.m20,R=d*r.m01+p*r.m11+D*r.m21,$=d*r.m02+p*r.m12+D*r.m22,P=Ut(S*o.m00+R*o.m10+$*o.m20),x=Ut(S*o.m01+R*o.m11+$*o.m21),m=Ut(S*o.m02+R*o.m12+$*o.m22);return[P*255,x*255,m*255]},Jt=(...t)=>{const[e,n,s,...r]=A(t,"rgb"),[o,c,i]=Ge(e,n,s),[a,l,f]=Un(o,c,i);return[a,l,f,...r.length>0&&r[0]<1?[r[0]]:[]]};function Un(t,e,n){const{Xn:s,Yn:r,Zn:o,kE:c,kK:i}=tt,a=t/s,l=e/r,f=n/o,u=a>c?Math.pow(a,1/3):(i*a+16)/116,h=l>c?Math.pow(l,1/3):(i*l+16)/116,b=f>c?Math.pow(f,1/3):(i*f+16)/116;return[116*h-16,500*(u-h),200*(h-b)]}function Qt(t){const e=Math.sign(t);return t=Math.abs(t),(t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))*e}const Ge=(t,e,n)=>{t=Qt(t/255),e=Qt(e/255),n=Qt(n/255);const{MtxRGB2XYZ:s,MtxAdaptMa:r,MtxAdaptMaI:o,Xn:c,Yn:i,Zn:a,As:l,Bs:f,Cs:u}=tt;let h=t*s.m00+e*s.m10+n*s.m20,b=t*s.m01+e*s.m11+n*s.m21,M=t*s.m02+e*s.m12+n*s.m22;const _=c*r.m00+i*r.m10+a*r.m20,d=c*r.m01+i*r.m11+a*r.m21,p=c*r.m02+i*r.m12+a*r.m22;let D=h*r.m00+b*r.m10+M*r.m20,S=h*r.m01+b*r.m11+M*r.m21,R=h*r.m02+b*r.m12+M*r.m22;return D*=_/l,S*=d/f,R*=p/u,h=D*o.m00+S*o.m10+R*o.m20,b=D*o.m01+S*o.m11+R*o.m21,M=D*o.m02+S*o.m12+R*o.m22,[h,b,M]};g.prototype.lab=function(){return Jt(this._rgb)},Object.assign(E,{lab:(...t)=>new g(...t,"lab"),getLabWhitePoint:Dt,setLabWhitePoint:nt}),N.format.lab=Vt,N.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"lab"),O(t)==="array"&&t.length===3)return"lab"}}),g.prototype.darken=function(t=1){const e=this,n=e.lab();return n[0]-=tt.Kn*t,new g(n,"lab").alpha(e.alpha(),!0)},g.prototype.brighten=function(t=1){return this.darken(-t)},g.prototype.darker=g.prototype.darken,g.prototype.brighter=g.prototype.brighten,g.prototype.get=function(t){const[e,n]=t.split("."),s=this[e]();if(n){const r=e.indexOf(n)-(e.substr(0,2)==="ok"?2:0);if(r>-1)return s[r];throw new Error(`unknown channel ${n} in mode ${e}`)}else return s};const{pow:Jn}=Math,Qn=1e-7,ts=20;g.prototype.luminance=function(t,e="rgb"){if(t!==void 0&&O(t)==="number"){if(t===0)return new g([0,0,0,this._rgb[3]],"rgb");if(t===1)return new g([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),s=ts;const r=(c,i)=>{const a=c.interpolate(i,.5,e),l=a.luminance();return Math.abs(t-l)<Qn||!s--?a:l>t?r(c,a):r(a,i)},o=(n>t?r(new g([0,0,0]),this):r(this,new g([255,255,255]))).rgb();return new g([...o,this._rgb[3]])}return es(...this._rgb.slice(0,3))};const es=(t,e,n)=>(t=te(t),e=te(e),n=te(n),.2126*t+.7152*e+.0722*n),te=t=>(t/=255,t<=.03928?t/12.92:Jn((t+.055)/1.055,2.4));var j={},yt=(t,e,n=.5,...s)=>{let r=s[0]||"lrgb";if(!j[r]&&!s.length&&(r=Object.keys(j)[0]),!j[r])throw new Error(`interpolation mode ${r} is not defined`);return O(t)!=="object"&&(t=new g(t)),O(e)!=="object"&&(e=new g(e)),j[r](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))};g.prototype.mix=g.prototype.interpolate=function(t,e=.5,...n){return yt(this,t,e,...n)},g.prototype.premultiply=function(t=!1){const e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new g([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};const{sin:ns,cos:ss}=Math,Pe=(...t)=>{let[e,n,s]=A(t,"lch");return isNaN(s)&&(s=0),s=s*Tn,[e,ss(s)*n,ns(s)*n]},ee=(...t)=>{t=A(t,"lch");const[e,n,s]=t,[r,o,c]=Pe(e,n,s),[i,a,l]=Vt(r,o,c);return[i,a,l,t.length>3?t[3]:1]},rs=(...t)=>{const e=Le(A(t,"hcl"));return ee(...e)},{sqrt:os,atan2:cs,round:is}=Math,Be=(...t)=>{const[e,n,s]=A(t,"lab"),r=os(n*n+s*s);let o=(cs(s,n)*Yn+360)%360;return is(r*1e4)===0&&(o=Number.NaN),[e,r,o]},ne=(...t)=>{const[e,n,s,...r]=A(t,"rgb"),[o,c,i]=Jt(e,n,s),[a,l,f]=Be(o,c,i);return[a,l,f,...r.length>0&&r[0]<1?[r[0]]:[]]};g.prototype.lch=function(){return ne(this._rgb)},g.prototype.hcl=function(){return Le(ne(this._rgb))},Object.assign(E,{lch:(...t)=>new g(...t,"lch"),hcl:(...t)=>new g(...t,"hcl")}),N.format.lch=ee,N.format.hcl=rs,["lch","hcl"].forEach(t=>N.autodetect.push({p:2,test:(...e)=>{if(e=A(e,t),O(e)==="array"&&e.length===3)return t}})),g.prototype.saturate=function(t=1){const e=this,n=e.lch();return n[1]+=tt.Kn*t,n[1]<0&&(n[1]=0),new g(n,"lch").alpha(e.alpha(),!0)},g.prototype.desaturate=function(t=1){return this.saturate(-t)},g.prototype.set=function(t,e,n=!1){const[s,r]=t.split("."),o=this[s]();if(r){const c=s.indexOf(r)-(s.substr(0,2)==="ok"?2:0);if(c>-1){if(O(e)=="string")switch(e.charAt(0)){case"+":o[c]+=+e;break;case"-":o[c]+=+e;break;case"*":o[c]*=+e.substr(1);break;case"/":o[c]/=+e.substr(1);break;default:o[c]=+e}else if(O(e)==="number")o[c]=e;else throw new Error("unsupported value for Color.set");const i=new g(o,s);return n?(this._rgb=i._rgb,this):i}throw new Error(`unknown channel ${r} in mode ${s}`)}else return o},g.prototype.tint=function(t=.5,...e){return yt(this,"white",t,...e)},g.prototype.shade=function(t=.5,...e){return yt(this,"black",t,...e)};const as=(t,e,n)=>{const s=t._rgb,r=e._rgb;return new g(s[0]+n*(r[0]-s[0]),s[1]+n*(r[1]-s[1]),s[2]+n*(r[2]-s[2]),"rgb")};j.rgb=as;const{sqrt:se,pow:vt}=Math,ls=(t,e,n)=>{const[s,r,o]=t._rgb,[c,i,a]=e._rgb;return new g(se(vt(s,2)*(1-n)+vt(c,2)*n),se(vt(r,2)*(1-n)+vt(i,2)*n),se(vt(o,2)*(1-n)+vt(a,2)*n),"rgb")};j.lrgb=ls;const fs=(t,e,n)=>{const s=t.lab(),r=e.lab();return new g(s[0]+n*(r[0]-s[0]),s[1]+n*(r[1]-s[1]),s[2]+n*(r[2]-s[2]),"lab")};j.lab=fs;var Ct=(t,e,n,s)=>{let r,o;s==="hsl"?(r=t.hsl(),o=e.hsl()):s==="hsv"?(r=t.hsv(),o=e.hsv()):s==="hcg"?(r=t.hcg(),o=e.hcg()):s==="hsi"?(r=t.hsi(),o=e.hsi()):s==="lch"||s==="hcl"?(s="hcl",r=t.hcl(),o=e.hcl()):s==="oklch"&&(r=t.oklch().reverse(),o=e.oklch().reverse());let c,i,a,l,f,u;(s.substr(0,1)==="h"||s==="oklch")&&([c,a,f]=r,[i,l,u]=o);let h,b,M,_;return!isNaN(c)&&!isNaN(i)?(i>c&&i-c>180?_=i-(c+360):i<c&&c-i>180?_=i+360-c:_=i-c,b=c+n*_):isNaN(c)?isNaN(i)?b=Number.NaN:(b=i,(f==1||f==0)&&s!="hsv"&&(h=l)):(b=c,(u==1||u==0)&&s!="hsv"&&(h=a)),h===void 0&&(h=a+n*(l-a)),M=f+n*(u-f),s==="oklch"?new g([M,h,b],s):new g([b,h,M],s)};const Ie=(t,e,n)=>Ct(t,e,n,"lch");j.lch=Ie,j.hcl=Ie;const us=t=>{if(O(t)=="number"&&t>=0&&t<=16777215){const e=t>>16,n=t>>8&255,s=t&255;return[e,n,s,1]}throw new Error("unknown num color: "+t)},hs=(...t)=>{const[e,n,s]=A(t,"rgb");return(e<<16)+(n<<8)+s};g.prototype.num=function(){return hs(this._rgb)},Object.assign(E,{num:(...t)=>new g(...t,"num")}),N.format.num=us,N.autodetect.push({p:5,test:(...t)=>{if(t.length===1&&O(t[0])==="number"&&t[0]>=0&&t[0]<=16777215)return"num"}});const ds=(t,e,n)=>{const s=t.num(),r=e.num();return new g(s+n*(r-s),"num")};j.num=ds;const{floor:ms}=Math,bs=(...t)=>{t=A(t,"hcg");let[e,n,s]=t,r,o,c;s=s*255;const i=n*255;if(n===0)r=o=c=s;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const a=ms(e),l=e-a,f=s*(1-n),u=f+i*(1-l),h=f+i*l,b=f+i;switch(a){case 0:[r,o,c]=[b,h,f];break;case 1:[r,o,c]=[u,b,f];break;case 2:[r,o,c]=[f,b,h];break;case 3:[r,o,c]=[f,u,b];break;case 4:[r,o,c]=[h,f,b];break;case 5:[r,o,c]=[b,f,u];break}}return[r,o,c,t.length>3?t[3]:1]},gs=(...t)=>{const[e,n,s]=A(t,"rgb"),r=Oe(e,n,s),o=Se(e,n,s),c=o-r,i=c*100/255,a=r/(255-c)*100;let l;return c===0?l=Number.NaN:(e===o&&(l=(n-s)/c),n===o&&(l=2+(s-e)/c),s===o&&(l=4+(e-n)/c),l*=60,l<0&&(l+=360)),[l,i,a]};g.prototype.hcg=function(){return gs(this._rgb)};const ps=(...t)=>new g(...t,"hcg");E.hcg=ps,N.format.hcg=bs,N.autodetect.push({p:1,test:(...t)=>{if(t=A(t,"hcg"),O(t)==="array"&&t.length===3)return"hcg"}});const Ms=(t,e,n)=>Ct(t,e,n,"hcg");j.hcg=Ms;const{cos:Nt}=Math,ks=(...t)=>{t=A(t,"hsi");let[e,n,s]=t,r,o,c;return isNaN(e)&&(e=0),isNaN(n)&&(n=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(c=(1-n)/3,r=(1+n*Nt(et*e)/Nt(Zt-et*e))/3,o=1-(c+r)):e<2/3?(e-=1/3,r=(1-n)/3,o=(1+n*Nt(et*e)/Nt(Zt-et*e))/3,c=1-(r+o)):(e-=2/3,o=(1-n)/3,c=(1+n*Nt(et*e)/Nt(Zt-et*e))/3,r=1-(o+c)),r=gt(s*r*3),o=gt(s*o*3),c=gt(s*c*3),[r*255,o*255,c*255,t.length>3?t[3]:1]},{min:ws,sqrt:_s,acos:ys}=Math,vs=(...t)=>{let[e,n,s]=A(t,"rgb");e/=255,n/=255,s/=255;let r;const o=ws(e,n,s),c=(e+n+s)/3,i=c>0?1-o/c:0;return i===0?r=NaN:(r=(e-n+(e-s))/2,r/=_s((e-n)*(e-n)+(e-s)*(n-s)),r=ys(r),s>n&&(r=et-r),r/=et),[r*360,i,c]};g.prototype.hsi=function(){return vs(this._rgb)};const Cs=(...t)=>new g(...t,"hsi");E.hsi=Cs,N.format.hsi=ks,N.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"hsi"),O(t)==="array"&&t.length===3)return"hsi"}});const Ns=(t,e,n)=>Ct(t,e,n,"hsi");j.hsi=Ns;const re=(...t)=>{t=A(t,"hsl");const[e,n,s]=t;let r,o,c;if(n===0)r=o=c=s*255;else{const i=[0,0,0],a=[0,0,0],l=s<.5?s*(1+n):s+n-s*n,f=2*s-l,u=e/360;i[0]=u+1/3,i[1]=u,i[2]=u-1/3;for(let h=0;h<3;h++)i[h]<0&&(i[h]+=1),i[h]>1&&(i[h]-=1),6*i[h]<1?a[h]=f+(l-f)*6*i[h]:2*i[h]<1?a[h]=l:3*i[h]<2?a[h]=f+(l-f)*(2/3-i[h])*6:a[h]=f;[r,o,c]=[a[0]*255,a[1]*255,a[2]*255]}return t.length>3?[r,o,c,t[3]]:[r,o,c,1]},He=(...t)=>{t=A(t,"rgba");let[e,n,s]=t;e/=255,n/=255,s/=255;const r=Oe(e,n,s),o=Se(e,n,s),c=(o+r)/2;let i,a;return o===r?(i=0,a=Number.NaN):i=c<.5?(o-r)/(o+r):(o-r)/(2-o-r),e==o?a=(n-s)/(o-r):n==o?a=2+(s-e)/(o-r):s==o&&(a=4+(e-n)/(o-r)),a*=60,a<0&&(a+=360),t.length>3&&t[3]!==void 0?[a,i,c,t[3]]:[a,i,c]};g.prototype.hsl=function(){return He(this._rgb)};const As=(...t)=>new g(...t,"hsl");E.hsl=As,N.format.hsl=re,N.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"hsl"),O(t)==="array"&&t.length===3)return"hsl"}});const Es=(t,e,n)=>Ct(t,e,n,"hsl");j.hsl=Es;const{floor:xs}=Math,Os=(...t)=>{t=A(t,"hsv");let[e,n,s]=t,r,o,c;if(s*=255,n===0)r=o=c=s;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const i=xs(e),a=e-i,l=s*(1-n),f=s*(1-n*a),u=s*(1-n*(1-a));switch(i){case 0:[r,o,c]=[s,u,l];break;case 1:[r,o,c]=[f,s,l];break;case 2:[r,o,c]=[l,s,u];break;case 3:[r,o,c]=[l,f,s];break;case 4:[r,o,c]=[u,l,s];break;case 5:[r,o,c]=[s,l,f];break}}return[r,o,c,t.length>3?t[3]:1]},{min:Ss,max:Ls}=Math,Ds=(...t)=>{t=A(t,"rgb");let[e,n,s]=t;const r=Ss(e,n,s),o=Ls(e,n,s),c=o-r;let i,a,l;return l=o/255,o===0?(i=Number.NaN,a=0):(a=c/o,e===o&&(i=(n-s)/c),n===o&&(i=2+(s-e)/c),s===o&&(i=4+(e-n)/c),i*=60,i<0&&(i+=360)),[i,a,l]};g.prototype.hsv=function(){return Ds(this._rgb)};const Rs=(...t)=>new g(...t,"hsv");E.hsv=Rs,N.format.hsv=Os,N.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"hsv"),O(t)==="array"&&t.length===3)return"hsv"}});const $s=(t,e,n)=>Ct(t,e,n,"hsv");j.hsv=$s;function It(t,e){let n=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(c=>[c]));let s=e[0].length,r=e[0].map((c,i)=>e.map(a=>a[i])),o=t.map(c=>r.map(i=>Array.isArray(c)?c.reduce((a,l,f)=>a+l*(i[f]||0),0):i.reduce((a,l)=>a+l*c,0)));return n===1&&(o=o[0]),s===1?o.map(c=>c[0]):o}const oe=(...t)=>{t=A(t,"lab");const[e,n,s,...r]=t,[o,c,i]=Gs([e,n,s]),[a,l,f]=$e(o,c,i);return[a,l,f,...r.length>0&&r[0]<1?[r[0]]:[]]};function Gs(t){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],n=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],s=It(n,t);return It(e,s.map(r=>r**3))}const ce=(...t)=>{const[e,n,s,...r]=A(t,"rgb"),o=Ge(e,n,s);return[...Ps(o),...r.length>0&&r[0]<1?[r[0]]:[]]};function Ps(t){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],n=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],s=It(e,t);return It(n,s.map(r=>Math.cbrt(r)))}g.prototype.oklab=function(){return ce(this._rgb)},Object.assign(E,{oklab:(...t)=>new g(...t,"oklab")}),N.format.oklab=oe,N.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"oklab"),O(t)==="array"&&t.length===3)return"oklab"}});const Bs=(t,e,n)=>{const s=t.oklab(),r=e.oklab();return new g(s[0]+n*(r[0]-s[0]),s[1]+n*(r[1]-s[1]),s[2]+n*(r[2]-s[2]),"oklab")};j.oklab=Bs;const Is=(t,e,n)=>Ct(t,e,n,"oklch");j.oklch=Is;const{pow:ie,sqrt:ae,PI:le,cos:ze,sin:je,atan2:Hs}=Math;var zs=(t,e="lrgb",n=null)=>{const s=t.length;n||(n=Array.from(new Array(s)).map(()=>1));const r=s/n.reduce(function(u,h){return u+h});if(n.forEach((u,h)=>{n[h]*=r}),t=t.map(u=>new g(u)),e==="lrgb")return js(t,n);const o=t.shift(),c=o.get(e),i=[];let a=0,l=0;for(let u=0;u<c.length;u++)if(c[u]=(c[u]||0)*n[0],i.push(isNaN(c[u])?0:n[0]),e.charAt(u)==="h"&&!isNaN(c[u])){const h=c[u]/180*le;a+=ze(h)*n[0],l+=je(h)*n[0]}let f=o.alpha()*n[0];t.forEach((u,h)=>{const b=u.get(e);f+=u.alpha()*n[h+1];for(let M=0;M<c.length;M++)if(!isNaN(b[M]))if(i[M]+=n[h+1],e.charAt(M)==="h"){const _=b[M]/180*le;a+=ze(_)*n[h+1],l+=je(_)*n[h+1]}else c[M]+=b[M]*n[h+1]});for(let u=0;u<c.length;u++)if(e.charAt(u)==="h"){let h=Hs(l/i[u],a/i[u])/le*180;for(;h<0;)h+=360;for(;h>=360;)h-=360;c[u]=h}else c[u]=c[u]/i[u];return f/=s,new g(c,e).alpha(f>.99999?1:f,!0)};const js=(t,e)=>{const n=t.length,s=[0,0,0,0];for(let r=0;r<t.length;r++){const o=t[r],c=e[r]/n,i=o._rgb;s[0]+=ie(i[0],2)*c,s[1]+=ie(i[1],2)*c,s[2]+=ie(i[2],2)*c,s[3]+=i[3]*c}return s[0]=ae(s[0]),s[1]=ae(s[1]),s[2]=ae(s[2]),s[3]>.9999999&&(s[3]=1),new g(Ft(s))},{pow:Ks}=Math;function Ht(t){let e="rgb",n=E("#ccc"),s=0,r=[0,1],o=[0,1],c=[],i=[0,0],a=!1,l=[],f=!1,u=0,h=1,b=!1,M={},_=!0,d=1;const p=function(m){if(m=m||["#fff","#000"],m&&O(m)==="string"&&E.brewer&&E.brewer[m.toLowerCase()]&&(m=E.brewer[m.toLowerCase()]),O(m)==="array"){m.length===1&&(m=[m[0],m[0]]),m=m.slice(0);for(let k=0;k<m.length;k++)m[k]=E(m[k]);c.length=0;for(let k=0;k<m.length;k++)c.push(k/(m.length-1))}return P(),l=m},D=function(m){if(a!=null){const k=a.length-1;let y=0;for(;y<k&&m>=a[y];)y++;return y-1}return 0};let S=m=>m,R=m=>m;const $=function(m,k){let y,w;if(k==null&&(k=!1),isNaN(m)||m===null)return n;k?w=m:a&&a.length>2?w=D(m)/(a.length-2):h!==u?w=(m-u)/(h-u):w=1,w=R(w),k||(w=S(w)),d!==1&&(w=Ks(w,d)),w=i[0]+w*(1-i[0]-i[1]),w=gt(w,0,1);const L=Math.floor(w*1e4);if(_&&M[L])y=M[L];else{if(O(l)==="array")for(let v=0;v<c.length;v++){const B=c[v];if(w<=B){y=l[v];break}if(w>=B&&v===c.length-1){y=l[v];break}if(w>B&&w<c[v+1]){w=(w-B)/(c[v+1]-B),y=E.interpolate(l[v],l[v+1],w,e);break}}else O(l)==="function"&&(y=l(w));_&&(M[L]=y)}return y};var P=()=>M={};p(t);const x=function(m){const k=E($(m));return f&&k[f]?k[f]():k};return x.classes=function(m){if(m!=null){if(O(m)==="array")a=m,r=[m[0],m[m.length-1]];else{const k=E.analyze(r);m===0?a=[k.min,k.max]:a=E.limits(k,"e",m)}return x}return a},x.domain=function(m){if(!arguments.length)return o;o=m.slice(0),u=m[0],h=m[m.length-1],c=[];const k=l.length;if(m.length===k&&u!==h)for(let y of Array.from(m))c.push((y-u)/(h-u));else{for(let y=0;y<k;y++)c.push(y/(k-1));if(m.length>2){const y=m.map((L,v)=>v/(m.length-1)),w=m.map(L=>(L-u)/(h-u));w.every((L,v)=>y[v]===L)||(R=L=>{if(L<=0||L>=1)return L;let v=0;for(;L>=w[v+1];)v++;const B=(L-w[v])/(w[v+1]-w[v]);return y[v]+B*(y[v+1]-y[v])})}}return r=[u,h],x},x.mode=function(m){return arguments.length?(e=m,P(),x):e},x.range=function(m,k){return p(m),x},x.out=function(m){return f=m,x},x.spread=function(m){return arguments.length?(s=m,x):s},x.correctLightness=function(m){return m==null&&(m=!0),b=m,P(),b?S=function(k){const y=$(0,!0).lab()[0],w=$(1,!0).lab()[0],L=y>w;let v=$(k,!0).lab()[0];const B=y+(w-y)*k;let X=v-B,lt=0,Q=1,ft=20;for(;Math.abs(X)>.01&&ft-- >0;)(function(){return L&&(X*=-1),X<0?(lt=k,k+=(Q-k)*.5):(Q=k,k+=(lt-k)*.5),v=$(k,!0).lab()[0],X=v-B})();return k}:S=k=>k,x},x.padding=function(m){return m!=null?(O(m)==="number"&&(m=[m,m]),i=m,x):i},x.colors=function(m,k){arguments.length<2&&(k="hex");let y=[];if(arguments.length===0)y=l.slice(0);else if(m===1)y=[x(.5)];else if(m>1){const w=r[0],L=r[1]-w;y=qs(0,m).map(v=>x(w+v/(m-1)*L))}else{t=[];let w=[];if(a&&a.length>2)for(let L=1,v=a.length,B=1<=v;B?L<v:L>v;B?L++:L--)w.push((a[L-1]+a[L])*.5);else w=r;y=w.map(L=>x(L))}return E[k]&&(y=y.map(w=>w[k]())),y},x.cache=function(m){return m!=null?(_=m,x):_},x.gamma=function(m){return m!=null?(d=m,x):d},x.nodata=function(m){return m!=null?(n=E(m),x):n},x}function qs(t,e,n){let s=[],r=t<e,o=e;for(let c=t;r?c<o:c>o;r?c++:c--)s.push(c);return s}const Ts=function(t){let e=[1,1];for(let n=1;n<t;n++){let s=[1];for(let r=1;r<=e.length;r++)s[r]=(e[r]||0)+e[r-1];e=s}return e},Ys=function(t){let e,n,s,r;if(t=t.map(o=>new g(o)),t.length===2)[n,s]=t.map(o=>o.lab()),e=function(o){const c=[0,1,2].map(i=>n[i]+o*(s[i]-n[i]));return new g(c,"lab")};else if(t.length===3)[n,s,r]=t.map(o=>o.lab()),e=function(o){const c=[0,1,2].map(i=>(1-o)*(1-o)*n[i]+2*(1-o)*o*s[i]+o*o*r[i]);return new g(c,"lab")};else if(t.length===4){let o;[n,s,r,o]=t.map(c=>c.lab()),e=function(c){const i=[0,1,2].map(a=>(1-c)*(1-c)*(1-c)*n[a]+3*(1-c)*(1-c)*c*s[a]+3*(1-c)*c*c*r[a]+c*c*c*o[a]);return new g(i,"lab")}}else if(t.length>=5){let o,c,i;o=t.map(a=>a.lab()),i=t.length-1,c=Ts(i),e=function(a){const l=1-a,f=[0,1,2].map(u=>o.reduce((h,b,M)=>h+c[M]*l**(i-M)*a**M*b[u],0));return new g(f,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e};var Xs=t=>{const e=Ys(t);return e.scale=()=>Ht(e),e};const{round:Ke}=Math;g.prototype.rgb=function(t=!0){return t===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Ke)},g.prototype.rgba=function(t=!0){return this._rgb.slice(0,4).map((e,n)=>n<3?t===!1?e:Ke(e):e)},Object.assign(E,{rgb:(...t)=>new g(...t,"rgb")}),N.format.rgb=(...t)=>{const e=A(t,"rgba");return e[3]===void 0&&(e[3]=1),e},N.autodetect.push({p:3,test:(...t)=>{if(t=A(t,"rgba"),O(t)==="array"&&(t.length===3||t.length===4&&O(t[3])=="number"&&t[3]>=0&&t[3]<=1))return"rgb"}});const Z=(t,e,n)=>{if(!Z[n])throw new Error("unknown blend mode "+n);return Z[n](t,e)},ht=t=>(e,n)=>{const s=E(n).rgb(),r=E(e).rgb();return E.rgb(t(s,r))},dt=t=>(e,n)=>{const s=[];return s[0]=t(e[0],n[0]),s[1]=t(e[1],n[1]),s[2]=t(e[2],n[2]),s},Fs=t=>t,Ws=(t,e)=>t*e/255,Zs=(t,e)=>t>e?e:t,Vs=(t,e)=>t>e?t:e,Us=(t,e)=>255*(1-(1-t/255)*(1-e/255)),Js=(t,e)=>e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255)),Qs=(t,e)=>255*(1-(1-e/255)/(t/255)),tr=(t,e)=>t===255?255:(t=255*(e/255)/(1-t/255),t>255?255:t);Z.normal=ht(dt(Fs)),Z.multiply=ht(dt(Ws)),Z.screen=ht(dt(Us)),Z.overlay=ht(dt(Js)),Z.darken=ht(dt(Zs)),Z.lighten=ht(dt(Vs)),Z.dodge=ht(dt(tr)),Z.burn=ht(dt(Qs));const{pow:er,sin:nr,cos:sr}=Math;function rr(t=300,e=-1.5,n=1,s=1,r=[0,1]){let o=0,c;O(r)==="array"?c=r[1]-r[0]:(c=0,r=[r,r]);const i=function(a){const l=et*((t+120)/360+e*a),f=er(r[0]+c*a,s),h=(o!==0?n[0]+a*o:n)*f*(1-f)/2,b=sr(l),M=nr(l),_=f+h*(-.14861*b+1.78277*M),d=f+h*(-.29227*b-.90649*M),p=f+h*(1.97294*b);return E(Ft([_*255,d*255,p*255,1]))};return i.start=function(a){return a==null?t:(t=a,i)},i.rotations=function(a){return a==null?e:(e=a,i)},i.gamma=function(a){return a==null?s:(s=a,i)},i.hue=function(a){return a==null?n:(n=a,O(n)==="array"?(o=n[1]-n[0],o===0&&(n=n[1])):o=0,i)},i.lightness=function(a){return a==null?r:(O(a)==="array"?(r=a,c=a[1]-a[0]):(r=[a,a],c=0),i)},i.scale=()=>E.scale(i),i.hue(n),i}const or="0123456789abcdef",{floor:cr,random:ir}=Math;var ar=(t=ir)=>{let e="#";for(let n=0;n<6;n++)e+=or.charAt(cr(t()*16));return new g(e,"hex")};const{log:qe,pow:lr,floor:fr,abs:ur}=Math;function Te(t,e=null){const n={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return O(t)==="object"&&(t=Object.values(t)),t.forEach(s=>{e&&O(s)==="object"&&(s=s[e]),s!=null&&!isNaN(s)&&(n.values.push(s),n.sum+=s,s<n.min&&(n.min=s),s>n.max&&(n.max=s),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(s,r)=>Ye(n,s,r),n}function Ye(t,e="equal",n=7){O(t)=="array"&&(t=Te(t));const{min:s,max:r}=t,o=t.values.sort((i,a)=>i-a);if(n===1)return[s,r];const c=[];if(e.substr(0,1)==="c"&&(c.push(s),c.push(r)),e.substr(0,1)==="e"){c.push(s);for(let i=1;i<n;i++)c.push(s+i/n*(r-s));c.push(r)}else if(e.substr(0,1)==="l"){if(s<=0)throw new Error("Logarithmic scales are only possible for values > 0");const i=Math.LOG10E*qe(s),a=Math.LOG10E*qe(r);c.push(s);for(let l=1;l<n;l++)c.push(lr(10,i+l/n*(a-i)));c.push(r)}else if(e.substr(0,1)==="q"){c.push(s);for(let i=1;i<n;i++){const a=(o.length-1)*i/n,l=fr(a);if(l===a)c.push(o[l]);else{const f=a-l;c.push(o[l]*(1-f)+o[l+1]*f)}}c.push(r)}else if(e.substr(0,1)==="k"){let i;const a=o.length,l=new Array(a),f=new Array(n);let u=!0,h=0,b=null;b=[],b.push(s);for(let d=1;d<n;d++)b.push(s+d/n*(r-s));for(b.push(r);u;){for(let p=0;p<n;p++)f[p]=0;for(let p=0;p<a;p++){const D=o[p];let S=Number.MAX_VALUE,R;for(let $=0;$<n;$++){const P=ur(b[$]-D);P<S&&(S=P,R=$),f[R]++,l[p]=R}}const d=new Array(n);for(let p=0;p<n;p++)d[p]=null;for(let p=0;p<a;p++)i=l[p],d[i]===null?d[i]=o[p]:d[i]+=o[p];for(let p=0;p<n;p++)d[p]*=1/f[p];u=!1;for(let p=0;p<n;p++)if(d[p]!==b[p]){u=!0;break}b=d,h++,h>200&&(u=!1)}const M={};for(let d=0;d<n;d++)M[d]=[];for(let d=0;d<a;d++)i=l[d],M[i].push(o[d]);let _=[];for(let d=0;d<n;d++)_.push(M[d][0]),_.push(M[d][M[d].length-1]);_=_.sort((d,p)=>d-p),c.push(_[0]);for(let d=1;d<_.length;d+=2){const p=_[d];!isNaN(p)&&c.indexOf(p)===-1&&c.push(p)}}return c}var hr=(t,e)=>{t=new g(t),e=new g(e);const n=t.luminance(),s=e.luminance();return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)};const Xe=.027,dr=5e-4,mr=.1,Fe=1.14,zt=.022,We=1.414;var br=(t,e)=>{t=new g(t),e=new g(e),t.alpha()<1&&(t=yt(e,t,t.alpha(),"rgb"));const n=Ze(...t.rgb()),s=Ze(...e.rgb()),r=n>=zt?n:n+Math.pow(zt-n,We),o=s>=zt?s:s+Math.pow(zt-s,We),c=Math.pow(o,.56)-Math.pow(r,.57),i=Math.pow(o,.65)-Math.pow(r,.62),a=Math.abs(o-r)<dr?0:r<o?c*Fe:i*Fe;return(Math.abs(a)<mr?0:a>0?a-Xe:a+Xe)*100};function Ze(t,e,n){return .2126729*Math.pow(t/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(n/255,2.4)}const{sqrt:st,pow:I,min:gr,max:pr,atan2:Ve,abs:Ue,cos:jt,sin:Je,exp:Mr,PI:Qe}=Math;function kr(t,e,n=1,s=1,r=1){var o=function(ut){return 360*ut/(2*Qe)},c=function(ut){return 2*Qe*ut/360};t=new g(t),e=new g(e);const[i,a,l]=Array.from(t.lab()),[f,u,h]=Array.from(e.lab()),b=(i+f)/2,M=st(I(a,2)+I(l,2)),_=st(I(u,2)+I(h,2)),d=(M+_)/2,p=.5*(1-st(I(d,7)/(I(d,7)+I(25,7)))),D=a*(1+p),S=u*(1+p),R=st(I(D,2)+I(l,2)),$=st(I(S,2)+I(h,2)),P=(R+$)/2,x=o(Ve(l,D)),m=o(Ve(h,S)),k=x>=0?x:x+360,y=m>=0?m:m+360,w=Ue(k-y)>180?(k+y+360)/2:(k+y)/2,L=1-.17*jt(c(w-30))+.24*jt(c(2*w))+.32*jt(c(3*w+6))-.2*jt(c(4*w-63));let v=y-k;v=Ue(v)<=180?v:y<=k?v+360:v-360,v=2*st(R*$)*Je(c(v)/2);const B=f-i,X=$-R,lt=1+.015*I(b-50,2)/st(20+I(b-50,2)),Q=1+.045*P,ft=1+.015*P*L,kt=30*Mr(-I((w-275)/25,2)),G=-(2*st(I(P,7)/(I(P,7)+I(25,7))))*Je(2*c(kt)),bt=st(I(B/(n*lt),2)+I(X/(s*Q),2)+I(v/(r*ft),2)+G*(X/(s*Q))*(v/(r*ft)));return pr(0,gr(100,bt))}function wr(t,e,n="lab"){t=new g(t),e=new g(e);const s=t.get(n),r=e.get(n);let o=0;for(let c in s){const i=(s[c]||0)-(r[c]||0);o+=i*i}return Math.sqrt(o)}var _r=(...t)=>{try{return new g(...t),!0}catch{return!1}},yr={cool(){return Ht([E.hsl(180,1,.9),E.hsl(250,.7,.4)])},hot(){return Ht(["#000","#f00","#ff0","#fff"]).mode("rgb")}};const fe={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},tn=Object.keys(fe),en=new Map(tn.map(t=>[t.toLowerCase(),t])),vr=typeof Proxy=="function"?new Proxy(fe,{get(t,e){const n=e.toLowerCase();if(en.has(n))return t[en.get(n)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(tn)}}):fe,Cr=(...t)=>{t=A(t,"cmyk");const[e,n,s,r]=t,o=t.length>4?t[4]:1;return r===1?[0,0,0,o]:[e>=1?0:255*(1-e)*(1-r),n>=1?0:255*(1-n)*(1-r),s>=1?0:255*(1-s)*(1-r),o]},{max:nn}=Math,Nr=(...t)=>{let[e,n,s]=A(t,"rgb");e=e/255,n=n/255,s=s/255;const r=1-nn(e,nn(n,s)),o=r<1?1/(1-r):0,c=(1-e-r)*o,i=(1-n-r)*o,a=(1-s-r)*o;return[c,i,a,r]};g.prototype.cmyk=function(){return Nr(this._rgb)},Object.assign(E,{cmyk:(...t)=>new g(...t,"cmyk")}),N.format.cmyk=Cr,N.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"cmyk"),O(t)==="array"&&t.length===4)return"cmyk"}});const Ar=(...t)=>{const e=A(t,"hsla");let n=wt(t)||"lsa";return e[0]=F(e[0]||0)+"deg",e[1]=F(e[1]*100)+"%",e[2]=F(e[2]*100)+"%",n==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),n="hsla"):e.length=3,`${n.substr(0,3)}(${e.join(" ")})`},Er=(...t)=>{const e=A(t,"lab");let n=wt(t)||"lab";return e[0]=F(e[0])+"%",e[1]=F(e[1]),e[2]=F(e[2]),n==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},xr=(...t)=>{const e=A(t,"lch");let n=wt(t)||"lab";return e[0]=F(e[0])+"%",e[1]=F(e[1]),e[2]=isNaN(e[2])?"none":F(e[2])+"deg",n==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},Or=(...t)=>{const e=A(t,"lab");return e[0]=F(e[0]*100)+"%",e[1]=Wt(e[1]),e[2]=Wt(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},sn=(...t)=>{const[e,n,s,...r]=A(t,"rgb"),[o,c,i]=ce(e,n,s),[a,l,f]=Be(o,c,i);return[a,l,f,...r.length>0&&r[0]<1?[r[0]]:[]]},Sr=(...t)=>{const e=A(t,"lch");return e[0]=F(e[0]*100)+"%",e[1]=Wt(e[1]),e[2]=isNaN(e[2])?"none":F(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:ue}=Math,Lr=(...t)=>{const e=A(t,"rgba");let n=wt(t)||"rgb";if(n.substr(0,3)==="hsl")return Ar(He(e),n);if(n.substr(0,3)==="lab"){const s=Dt();nt("d50");const r=Er(Jt(e),n);return nt(s),r}if(n.substr(0,3)==="lch"){const s=Dt();nt("d50");const r=xr(ne(e),n);return nt(s),r}return n.substr(0,5)==="oklab"?Or(ce(e)):n.substr(0,5)==="oklch"?Sr(sn(e)):(e[0]=ue(e[0]),e[1]=ue(e[1]),e[2]=ue(e[2]),(n==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),n="rgba"),`${n.substr(0,3)}(${e.slice(0,n==="rgb"?3:4).join(" ")})`)},rn=(...t)=>{t=A(t,"lch");const[e,n,s,...r]=t,[o,c,i]=Pe(e,n,s),[a,l,f]=oe(o,c,i);return[a,l,f,...r.length>0&&r[0]<1?[r[0]]:[]]},rt=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,V=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Kt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,W=/\s*/.source,At=/\s+/.source,he=/\s*,\s*/.source,qt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,Et=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,on=new RegExp("^rgba?\\("+W+[rt,rt,rt].join(At)+Et+"\\)$"),cn=new RegExp("^rgb\\("+W+[rt,rt,rt].join(he)+W+"\\)$"),an=new RegExp("^rgba\\("+W+[rt,rt,rt,V].join(he)+W+"\\)$"),ln=new RegExp("^hsla?\\("+W+[qt,Kt,Kt].join(At)+Et+"\\)$"),fn=new RegExp("^hsl?\\("+W+[qt,Kt,Kt].join(he)+W+"\\)$"),un=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,hn=new RegExp("^lab\\("+W+[V,V,V].join(At)+Et+"\\)$"),dn=new RegExp("^lch\\("+W+[V,V,qt].join(At)+Et+"\\)$"),mn=new RegExp("^oklab\\("+W+[V,V,V].join(At)+Et+"\\)$"),bn=new RegExp("^oklch\\("+W+[V,V,qt].join(At)+Et+"\\)$"),{round:gn}=Math,xt=t=>t.map((e,n)=>n<=2?gt(gn(e),0,255):e),H=(t,e=0,n=100,s=!1)=>(typeof t=="string"&&t.endsWith("%")&&(t=parseFloat(t.substring(0,t.length-1))/100,s?t=e+(t+1)*.5*(n-e):t=e+t*(n-e)),+t),q=(t,e)=>t==="none"?e:t,de=t=>{if(t=t.toLowerCase().trim(),t==="transparent")return[0,0,0,0];let e;if(N.format.named)try{return N.format.named(t)}catch{}if((e=t.match(on))||(e=t.match(cn))){let n=e.slice(1,4);for(let r=0;r<3;r++)n[r]=+H(q(n[r],0),0,255);n=xt(n);const s=e[4]!==void 0?+H(e[4],0,1):1;return n[3]=s,n}if(e=t.match(an)){const n=e.slice(1,5);for(let s=0;s<4;s++)n[s]=+H(n[s],0,255);return n}if((e=t.match(ln))||(e=t.match(fn))){const n=e.slice(1,4);n[0]=+q(n[0].replace("deg",""),0),n[1]=+H(q(n[1],0),0,100)*.01,n[2]=+H(q(n[2],0),0,100)*.01;const s=xt(re(n)),r=e[4]!==void 0?+H(e[4],0,1):1;return s[3]=r,s}if(e=t.match(un)){const n=e.slice(1,4);n[1]*=.01,n[2]*=.01;const s=re(n);for(let r=0;r<3;r++)s[r]=gn(s[r]);return s[3]=+e[4],s}if(e=t.match(hn)){const n=e.slice(1,4);n[0]=H(q(n[0],0),0,100),n[1]=H(q(n[1],0),-125,125,!0),n[2]=H(q(n[2],0),-125,125,!0);const s=Dt();nt("d50");const r=xt(Vt(n));nt(s);const o=e[4]!==void 0?+H(e[4],0,1):1;return r[3]=o,r}if(e=t.match(dn)){const n=e.slice(1,4);n[0]=H(n[0],0,100),n[1]=H(q(n[1],0),0,150,!1),n[2]=+q(n[2].replace("deg",""),0);const s=Dt();nt("d50");const r=xt(ee(n));nt(s);const o=e[4]!==void 0?+H(e[4],0,1):1;return r[3]=o,r}if(e=t.match(mn)){const n=e.slice(1,4);n[0]=H(q(n[0],0),0,1),n[1]=H(q(n[1],0),-.4,.4,!0),n[2]=H(q(n[2],0),-.4,.4,!0);const s=xt(oe(n)),r=e[4]!==void 0?+H(e[4],0,1):1;return s[3]=r,s}if(e=t.match(bn)){const n=e.slice(1,4);n[0]=H(q(n[0],0),0,1),n[1]=H(q(n[1],0),0,.4,!1),n[2]=+q(n[2].replace("deg",""),0);const s=xt(rn(n)),r=e[4]!==void 0?+H(e[4],0,1):1;return s[3]=r,s}};de.test=t=>on.test(t)||ln.test(t)||hn.test(t)||dn.test(t)||mn.test(t)||bn.test(t)||cn.test(t)||an.test(t)||fn.test(t)||un.test(t)||t==="transparent",g.prototype.css=function(t){return Lr(this._rgb,t)};const Dr=(...t)=>new g(...t,"css");E.css=Dr,N.format.css=de,N.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&O(t)==="string"&&de.test(t))return"css"}}),N.format.gl=(...t)=>{const e=A(t,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const Rr=(...t)=>new g(...t,"gl");E.gl=Rr,g.prototype.gl=function(){const t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]},g.prototype.hex=function(t){return Re(this._rgb,t)};const $r=(...t)=>new g(...t,"hex");E.hex=$r,N.format.hex=De,N.autodetect.push({p:4,test:(t,...e)=>{if(!e.length&&O(t)==="string"&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});const{log:Tt}=Math,pn=t=>{const e=t/100;let n,s,r;return e<66?(n=255,s=e<6?0:-155.25485562709179-.44596950469579133*(s=e-2)+104.49216199393888*Tt(s),r=e<20?0:-254.76935184120902+.8274096064007395*(r=e-10)+115.67994401066147*Tt(r)):(n=351.97690566805693+.114206453784165*(n=e-55)-40.25366309332127*Tt(n),s=325.4494125711974+.07943456536662342*(s=e-50)-28.0852963507957*Tt(s),r=255),[n,s,r,1]},{round:Gr}=Math,Pr=(...t)=>{const e=A(t,"rgb"),n=e[0],s=e[2];let r=1e3,o=4e4;const c=.4;let i;for(;o-r>c;){i=(o+r)*.5;const a=pn(i);a[2]/a[0]>=s/n?o=i:r=i}return Gr(i)};g.prototype.temp=g.prototype.kelvin=g.prototype.temperature=function(){return Pr(this._rgb)};const me=(...t)=>new g(...t,"temp");Object.assign(E,{temp:me,kelvin:me,temperature:me}),N.format.temp=N.format.kelvin=N.format.temperature=pn,g.prototype.oklch=function(){return sn(this._rgb)},Object.assign(E,{oklch:(...t)=>new g(...t,"oklch")}),N.format.oklch=rn,N.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"oklch"),O(t)==="array"&&t.length===3)return"oklch"}}),Object.assign(E,{analyze:Te,average:zs,bezier:Xs,blend:Z,brewer:vr,Color:g,colors:_t,contrast:hr,contrastAPCA:br,cubehelix:rr,deltaE:kr,distance:wr,input:N,interpolate:yt,limits:Ye,mix:yt,random:ar,scale:Ht,scales:yr,valid:_r});function ot(t){return .04045<t?Math.pow((t+.055)/1.055,2.4):t/12.92}function Mn(t,e,n){const s=.4122214708*t+.5363325363*e+.0514459929*n,r=.2119034982*t+.6806995451*e+.1073969566*n,o=.0883024619*t+.2817188376*e+.6299787005*n,c=Math.cbrt(s),i=Math.cbrt(r),a=Math.cbrt(o);return[.2104542553*c+.793617785*i-.0040720468*a,1.9779984951*c-2.428592205*i+.4505937099*a,.0259040371*c+.7827717662*i-.808675766*a]}function kn(t,e,n){const s=t+.3963377774*e+.2158037573*n,r=t-.1055613458*e-.0638541728*n,o=t-.0894841775*e-1.291485548*n,c=s*s*s,i=r*r*r,a=o*o*o;return[4.0767416621*c-3.3077115913*i+.2309699292*a,-1.2684380046*c+2.6097574011*i-.3413193965*a,-.0041960863*c-.7034186147*i+1.707614701*a]}function wn(t){const s=1.170873786407767;return .5*(s*t-.206+Math.sqrt((s*t-.206)*(s*t-.206)+4*.03*s*t))}function Br(t){return(t*t+.206*t)/(1.170873786407767*(t+.03))}function Ir(t,e){let n,s,r,o,c,i,a,l;-1.88170328*t-.80936493*e>1?(n=1.19086277,s=1.76576728,r=.59662641,o=.75515197,c=.56771245,i=4.0767416621,a=-3.3077115913,l=.2309699292):1.81444104*t-1.19445276*e>1?(n=.73956515,s=-.45954404,r=.08285427,o=.1254107,c=.14503204,i=-1.2684380046,a=2.6097574011,l=-.3413193965):(n=1.35733652,s=-.00915799,r=-1.1513021,o=-.50559606,c=.00692167,i=-.0041960863,a=-.7034186147,l=1.707614701);const f=n+s*t+r*e+o*t*t+c*t*e,u=.3963377774*t+.2158037573*e,h=-.1055613458*t-.0638541728*e,b=-.0894841775*t-1.291485548*e,M=1+f*u,_=1+f*h,d=1+f*b,p=M*M*M,D=_*_*_,S=d*d*d,R=3*u*M*M,$=3*h*_*_,P=3*b*d*d,x=6*u*u*M,m=6*h*h*_,k=6*b*b*d,y=i*p+a*D+l*S,w=i*R+a*$+l*P,L=i*x+a*m+l*k;return f-y*w/(w*w-.5*y*L)}function be(t,e){const n=Ir(t,e),s=kn(1,n*t,n*e),r=Math.cbrt(1/Math.max(Math.max(s[0],s[1]),s[2])),o=r*n;return[r,o]}function Hr(t,e,n,s,r,o=null){o||(o=be(t,e));let c;if((n-r)*o[1]-(o[0]-r)*s<=0)c=o[1]*r/(s*o[0]+o[1]*(r-n));else{c=o[1]*(r-1)/(s*(o[0]-1)+o[1]*(r-n));const i=n-r,a=s,l=.3963377774*t+.2158037573*e,f=-.1055613458*t-.0638541728*e,u=-.0894841775*t-1.291485548*e,h=i+a*l,b=i+a*f,M=i+a*u;{const _=r*(1-c)+c*n,d=c*s,p=_+d*l,D=_+d*f,S=_+d*u,R=p*p*p,$=D*D*D,P=S*S*S,x=3*h*p*p,m=3*b*D*D,k=3*M*S*S,y=6*h*h*p,w=6*b*b*D,L=6*M*M*S,v=4.0767416621*R-3.3077115913*$+.2309699292*P-1,B=4.0767416621*x-3.3077115913*m+.2309699292*k,X=4.0767416621*y-3.3077115913*w+.2309699292*L,lt=B/(B*B-.5*v*X);let Q=-v*lt;const ft=-1.2684380046*R+2.6097574011*$-.3413193965*P-1,kt=-1.2684380046*x+2.6097574011*m-.3413193965*k,C=-1.2684380046*y+2.6097574011*w-.3413193965*L,G=kt/(kt*kt-.5*ft*C);let bt=-ft*G;const ut=-.0041960863*R-.7034186147*$+1.707614701*P-1,$t=-.0041960863*x-.7034186147*m+1.707614701*k,Ae=-.0041960863*y-.7034186147*w+1.707614701*L,St=$t/($t*$t-.5*ut*Ae);let Gt=-ut*St;Q=lt>=0?Q:1e6,bt=G>=0?bt:1e6,Gt=St>=0?Gt:1e6,c+=Math.min(Q,Math.min(bt,Gt))}}return c}function _n(t,e,n=null){n||(n=be(t,e));const s=n[0],r=n[1];return[r/s,r/(1-s)]}function zr(t,e,n){const s=be(e,n),r=Hr(e,n,t,1,t,s),o=_n(e,n,s),c=.11516993+1/(7.4477897+4.1590124*n+e*(-2.19557347+1.75198401*n+e*(-2.13704948-10.02301043*n+e*(-4.24894561+5.38770819*n+4.69891013*e)))),i=.11239642+1/(1.6132032-.68124379*n+e*(.40370612+.90148123*n+e*(-.27087943+.6122399*n+e*(.00299215-.45399568*n-.14661872*e)))),a=r/Math.min(t*o[0],(1-t)*o[1]);let l;{const u=t*c,h=(1-t)*i;l=.9*a*Math.sqrt(Math.sqrt(1/(1/(u*u*u*u)+1/(h*h*h*h))))}let f;{const u=t*.4,h=(1-t)*.8;f=Math.sqrt(1/(1/(u*u)+1/(h*h)))}return[f,l,r]}function jr([t,e,n]){const s=Mn(ot(t/255),ot(e/255),ot(n/255)),r=Math.sqrt(s[1]*s[1]+s[2]*s[2]),o=s[1]/r,c=s[2]/r,i=s[0],a=.5+.5*Math.atan2(-s[2],-s[1])/Math.PI,l=zr(i,o,c),f=l[0],u=l[1],h=l[2];let b;if(r<u){const d=.8*f,p=1-d/u;b=(r-0)/(d+p*(r-0))*.8}else{const _=u,d=.2*u*u*1.25*1.25/f,p=1-d/(h-u);b=.8+.2*((r-_)/(d+p*(r-_)))}const M=wn(i);return[a,b,M]}function Kr([t,e,n]){const s=Mn(ot(t/255),ot(e/255),ot(n/255)),r=Math.sqrt(s[1]*s[1]+s[2]*s[2]),o=s[1]/r,c=s[2]/r;let i=s[0];const a=.5+.5*Math.atan2(-s[2],-s[1])/Math.PI,l=_n(o,c),f=l[0],u=.5,h=l[1],b=1-u/f,M=h/(r+i*h),_=M*i,d=M*r,p=Br(_),D=d*p/_,S=kn(p,o*D,c*D),R=Math.cbrt(1/Math.max(S[0],S[1],S[2],0));i=i/R,i=wn(i);const $=i/_,P=(u+h)*d/(h*u+h*b*d);return[a,P,$]}function mt(t){const e=new Map;return n=>{if(e.has(n))return e.get(n);const s=t(n);return e.set(n,s),s}}function ge(t){const e=parseInt(t.slice(1),16);return[e>>16&255,e>>8&255,e&255]}const U=mt(t=>Wr(ge(t))),qr=mt(t=>Zr(t)),Tr=mt(t=>Vr(t)),Yr=mt(t=>Jr(U(t))),yn=mt(t=>E(t).lch()),Xr=mt(t=>E(t).lab()),Fr=mt(t=>E.lab(...t).lch()),Yt=mt(t=>E(t).luminance());function Wr([t,e,n]){const s=ot(t/255),r=ot(e/255),o=ot(n/255),c=.4122214708*s+.5363325363*r+.0514459929*o,i=.2119034982*s+.6806995451*r+.1073969566*o,a=.0883024619*s+.2817188376*r+.6299787005*o,l=Math.cbrt(c),f=Math.cbrt(i),u=Math.cbrt(a);return[.2104542553*l+.793617785*f-.0040720468*u,1.9779984951*l-2.428592205*f+.4505937099*u,.0259040371*l+.7827717662*f-.808675766*u]}function Zr(t){return jr(ge(t))}function Vr(t){return Kr(ge(t))}const Ur=180/Math.PI;function Jr(t){const e=Math.sqrt(Math.pow(t[1],2)+Math.pow(t[2],2));let n=Math.atan2(t[2],t[1])*Ur;return n<0&&(n=n+360),e<=4e-6&&(n=NaN),[t[0],e,n]}const vn=(2.016+2.045)/2;function Qr([t,e,n],[s,r,o]){let c=t-s,i=vn*(e-r),a=vn*(n-o);return Math.sqrt(c**2+i**2+a**2)}function ct(t,e,n=1,s=1,r=1){return E.deltaE(t,e,n,s,r)}function K(t,e){const n=t[0]-e[0],s=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(n*n+s*s+r*r)}function to(t,e){const n=t[0]-e[0],s=t[1]-e[1],r=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+s*s+r*r+o*o)}function eo(t,e){let n=Number.isNaN(t[0])&&Number.isNaN(e[0])?0:t[0]-e[0]||0;const s=t[1]-e[1],r=t[2]-e[2];return n+=n>180?-360:n<-180?360:0,n/=180,Math.sqrt(n*n+s*s+r*r)}function no(t,e){const n=t[0]-e[0],s=t[1]-e[1];let r=Number.isNaN(t[2])&&Number.isNaN(e[2])?0:t[2]-e[2]||0;return r+=r>180?-360:r<-180?360:0,r/=180,Math.sqrt(n*n+s*s+r*r)}function it(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e===0?[0,0,0]:[t[0]/e,t[1]/e,t[2]/e]}function J(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function pt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Cn(t){const e=t.reduce((n,s)=>[n[0]+s[0],n[1]+s[1],n[2]+s[2]],[0,0,0]);return[e[0]/t.length,e[1]/t.length,e[2]/t.length]}function so(t){return[(t[0]+128)/255,(t[1]+128)/255,(t[2]+128)/255]}const Nn={};function An(t){const e=t.name||t.toString(),n=Nn[e]=Nn[e]||new Map;return(s,r)=>{const o=[s,r].sort().join("|");let c=n.get(o);return c===void 0&&(c=t(s,r),n.set(o,c)),c}}function ro(t){return t.at(-1)==="h"?no:t.at(-3)==="h"?eo:t==="oklab"?Qr:t==="cmyk"?to:K}function z(t,e,n="gl",s,r){const o=new Map;let c=ro(n),i=c;typeof i!="function"&&(i.color?i=((d,p,...D)=>c.fn(h(d),h(p),...D)):i=c.fn);let a=s,l=a;l&&typeof l!="function"&&(l.color?l=((d,p,...D)=>a.fn(h(d),h(p),...D)):l=a.fn);let f;n==="oklab"?f=t.map(d=>[U(d),d]):n==="lab-norm"?f=t.map(d=>[so(E(d).lab()),d]):n==="oklch"?f=t.map(d=>[Yr(d),d]):n==="okhsl"?f=t.map(d=>[qr(d),d]):n==="okhsv"?f=t.map(d=>[Tr(d),d]):n==="hex"?f=t.map(d=>[d,d]):f=t.map(d=>[E(d).get(n),d]);for(const[d,p]of f)o.set(d,p);function u(d){return d.map(p=>o.get(p))}function h(d){return o.get(d)}const b={distance:An(i),delta:l?An(l):void 0,toColors:u,toColor:h},M=[...o.keys()];return e.call(b,M).map(d=>o.get(d))}function En(t,e,n,s=8){let r=0;for(let o=s-1;o>=0;o--){const c=1<<o,i=t&c?1:0,a=e&c?1:0,l=n&c?1:0;r=r<<3|oo(i,a,l)}return r}function oo(t,e,n){return t<<2|e<<1|n}function co(t,e=8){return[...t].sort((n,s)=>{const r=En(n[0],n[1],n[2],e),o=En(s[0],s[1],s[2],e);return r-o})}function xn(t,e="gl"){return z(t,co,e)}xn.params=[{name:"model",values:["gl","oklab","lab-norm"]}];class io{populationSize;generations;maxStagnation;mutationRate;crossoverRate;eliteSize;tournamentSize;random;fitnessFunc;seedFunc;fitnessCompare;onGeneration;population;currentGeneration;bestIndividual;bestFitness;peakGeneration;constructor(e){this.populationSize=e.populationSize||100,this.generations=e.generations||200,this.maxStagnation=e.maxStagnation||20,this.mutationRate=e.mutationRate||.1,this.crossoverRate=e.crossoverRate||.9,this.eliteSize=e.eliteSize||5,this.tournamentSize=e.tournamentSize||5,this.random=e.random||Math.random,this.fitnessFunc=e.fitness||(()=>0),this.seedFunc=e.seed,this.fitnessCompare=e.compare||((n,s)=>s-n),this.onGeneration=e.onGeneration,this.population=[],this.currentGeneration=0,this.bestIndividual=null,this.bestFitness=-1/0,this.peakGeneration=0}initializePopulation(){this.population=[];for(let e=0;e<this.populationSize;e++){const n=this.seedFunc(),s=this.fitnessFunc(n);this.population.push({genome:n,fitness:s})}this.sortPopulation(),this.updateBest()}sortPopulation(){this.population.sort((e,n)=>this.fitnessCompare(e.fitness,n.fitness))}updateBest(){(this.bestFitness===-1/0||this.fitnessCompare(this.population[0].fitness,this.bestFitness)<0)&&(this.peakGeneration=this.currentGeneration,this.bestFitness=this.population[0].fitness,this.bestIndividual=[...this.population[0].genome])}tournamentSelect(){const e=[];for(let n=0;n<this.tournamentSize;n++){const s=Math.floor(this.random()*this.population.length);e.push(this.population[s])}return e.sort((n,s)=>this.fitnessCompare(n.fitness,s.fitness)),e[0]}orderCrossover(e,n){const s=e.length,r=Math.floor(this.random()*s),o=r+Math.floor(this.random()*(s-r)),c=Array(s);for(let f=r;f<=o;f++)c[f]=e[f];const i=new Set(c.slice(r,o+1)),a=[];for(let f=0;f<s;f++){const u=n[f];i.has(u)||a.push(u)}let l=0;for(let f=0;f<s;f++)c[f]===void 0&&(c[f]=a[l],l++);return c}swapMutate(e){const n=[...e],s=Math.floor(this.random()*n.length),r=Math.floor(this.random()*n.length);return[n[s],n[r]]=[n[r],n[s]],n}shiftMutate(e){const n=[...e];return n.push(n.shift()),n}cheatMutate(e){let n=this.shiftMutate(e),s=n,r=this.fitnessFunc(s);for(let c=1;c<e.length;c++){n=this.shiftMutate(n);const i=this.fitnessFunc(n);this.fitnessCompare(i,r)<0&&(r=i,s=n)}const o=[...s].reverse();return this.fitnessCompare(r,this.fitnessFunc(o))<0?o:s}evolve(){const e=[];for(let n=0;n<this.eliteSize;n++)e.push({genome:[...this.population[n].genome],fitness:this.population[n].fitness});for(;e.length<this.populationSize;){const n=this.tournamentSelect(),s=this.tournamentSelect();let r;if(this.random()<this.crossoverRate?r=this.orderCrossover(n.genome,s.genome):r=[...n.genome],this.random()<this.mutationRate){const c=this.random();c<.5?r=this.swapMutate(r):c<.7?r=this.shiftMutate(r):c<.9?r=[...r].reverse():r=this.cheatMutate(r)}const o=this.fitnessFunc(r);e.push({genome:r,fitness:o})}this.population=e,this.sortPopulation(),this.updateBest()}run(){this.initializePopulation();for(let e=0;e<this.generations&&(this.currentGeneration=e,this.onGeneration&&this.onGeneration({generation:e,bestFitness:this.population[0].fitness,bestGenome:this.population[0].genome,averageFitness:this.population.reduce((n,s)=>n+(typeof s.fitness=="number"?s.fitness:0),0)/this.population.length}),!(this.currentGeneration>this.peakGeneration+this.maxStagnation));e++)this.evolve();return{bestGenome:this.cheatMutate(this.bestIndividual),bestFitness:this.bestFitness,finalPopulation:this.population,peakGeneration:this.peakGeneration}}}function pe(t){const e=t.map(f=>U(f));if(e.length<2)return{totalDistance:0,avgAngleChange:0,maxAngleChange:0,meanDistance:0,devDistance:0};let n=0,s=[],r=null;const o=[];for(let f=1;f<e.length;f++){const u=K(e[f-1],e[f]);n+=u,o.push(u);const h=it(J(e[f],e[f-1]));if(r&&u>0){const b=Math.max(-1,Math.min(1,pt(r,h))),M=Math.acos(b)*(180/Math.PI);s.push(M)}r=h}const c=n/(e.length-1),i=Math.sqrt(o.reduce((f,u)=>f+Math.pow(u-c,2),0)/(e.length-1)),a=s.length>0?s.reduce((f,u)=>f+u,0)/s.length:0,l=s.length>0?Math.max(...s):0;return{totalDistance:n,avgAngleChange:a,maxAngleChange:l,meanDistance:c,devDistance:i}}function ao(t){let e=0;for(let n=0;n<t.length-1;n++){const s=U(t[n]),r=U(t[n+1]);e+=K(s,r)}return-e}function lo(t,e){return e-t}function fo(t){return On(t,ao,lo)}function On(t,e,n){let s=1;const r=()=>(s=s*16807%2147483647,s/2147483647),o=Math.min(40,Math.max(10,t.length))*5,c=t.length<50?250:Math.floor(31250*64/(o*t.length));return new io({populationSize:o,generations:c,maxStagnation:t.length<50?20:10,mutationRate:.5,crossoverRate:.9,eliteSize:5,random:r,fitness:e,compare:n,seed:()=>[...t].sort(()=>r()-.5)}).run().bestGenome}function uo(t){const{avgAngleChange:e,maxAngleChange:n,totalDistance:s}=pe(t);return[-s,-e,-n]}function ho(t,e,n=.01){for(let s=0;s<t.length;s++){const r=(t[s]+e[s])/2,o=Math.abs(r*n),c=e[s]-t[s];if(Math.abs(c)>o)return c}return e[0]-t[0]}function mo(t){return On(t,uo,ho)}function Me(t,e){let n=!0;for(;n;){n=!1;for(let s=0;s<t.length-2;s++)for(let r=s+1;r<t.length-1;r++){const o=e(t[s],t[s+1])+e(t[r],t[r+1]);e(t[s],t[r])+e(t[s+1],t[r+1])<o&&(t=[...t.slice(0,s+1),...t.slice(s+1,r+1).reverse(),...t.slice(r+1)],n=!0)}}return t}function bo(t){const e=t.reduce((n,s)=>[n[0]+s[0],n[1]+s[1],n[2]+s[2]],[0,0,0]);return[e[0]/t.length,e[1]/t.length,e[2]/t.length]}function go(t,e){const n=t.length,s=[[0,0,0],[0,0,0],[0,0,0]];for(const r of t){const o=J(r,e);for(let c=0;c<3;c++)for(let i=0;i<3;i++)s[c][i]+=o[c]*o[i]/n}return s}function po(t){let e=[1,1,1];for(let n=0;n<100;n++){const s=[t[0][0]*e[0]+t[0][1]*e[1]+t[0][2]*e[2],t[1][0]*e[0]+t[1][1]*e[1]+t[1][2]*e[2],t[2][0]*e[0]+t[2][1]*e[1]+t[2][2]*e[2]];e=it(s)}return e}function Mo(t){if(t.length===0)return[];const e=bo(t),n=go(t,e),s=po(n);return[...t].sort((r,o)=>{const c=pt(J(r,e),s),i=pt(J(o,e),s);return c-i})}function ko(t){const e=t.length,n=t.reduce((r,o)=>[r[0]+o[0],r[1]+o[1],r[2]+o[2]],[0,0,0]).map(r=>r/e);return t.reduce((r,o)=>[r[0]+(o[0]-n[0])**2,r[1]+(o[1]-n[1])**2,r[2]+(o[2]-n[2])**2],[0,0,0]).map(r=>Math.sqrt(r/e)||1e-6)}function Sn(t){const e=ko(t);return(n,s)=>Math.hypot((n[0]-s[0])/e[0],(n[1]-s[1])/e[1],(n[2]-s[2])/e[2])}function Ln(t,e,n="raw"){return z(t,function(s){const r=Mo(s);if(n==="raw")return r;let o=this.distance,c=this.toColor;if(n==="tsp-adapt")if(e==="oklab")o=Sn(s);else{const i=t.map(l=>U(l)),a=Sn(i);o=(l,f)=>a(U(c(l)),U(c(f)))}return Me(r,o)},e)}Ln.params=[{name:"model",values:["gl","lab","oklab"]},{name:"post",values:["raw","tsp","tsp-adapt"]}];function wo(t,e="hsl",n="bottom-up"){return t.map(r=>({vec:r,hsl:e.at(-1)==="h"?[...r].reverse():r})).sort((r,o)=>{let[c,i,a]=r.hsl,[l,f,u]=o.hsl;switch(c=c||0,l=l||0,n){case"bottom-up":return Math.abs(a-u)>.05?a-u:Math.abs(c-l)>5?c-l:i-f;case"top-down":return Math.abs(a-u)>.05?u-a:Math.abs(c-l)>5?c-l:i-f;case"outward":return Math.abs(i-f)>.05?i-f:Math.abs(c-l)>5?c-l:a-u;case"inward":return Math.abs(i-f)>.05?f-i:Math.abs(c-l)>5?c-l:a-u;default:return 0}}).map(r=>r.vec)}function Dn(t,e="hsl",n="bottom-up"){return z(t,function(s){return wo(s,e,n)},e)}Dn.params=[{name:"model",values:["hsl","hsv","lch","okhsl","okhsv","oklch"]},{name:"mode",values:["outward","inward","bottom-up","top-down"]}];function _o(t,e="hsl",n="ascending"){const s=t.map(r=>{const o=e.at(-1)==="h"?[...r].reverse():r,c=(o[2]||0)*360+o[0];return{vec:r,hsl:o,spiralParam:c}});return s.sort((r,o)=>{const c=n==="ascending"?r.spiralParam-o.spiralParam:o.spiralParam-r.spiralParam;return Math.abs(c)<1?r.hsl[1]-o.hsl[1]:c}),s.map(r=>r.vec)}function Rn(t,e="hsl",n="ascending"){return z(t,function(s){return _o(s,e,n)},e)}Rn.params=[{name:"model",values:["hsl","hsv","lch","okhsl","okhsv","oklch"]},{name:"direction",values:["ascending","descending"]}];function yo(){let t=1;return()=>(t=t*16807%2147483647,t/2147483647)}function vo(t){return Xt(t)[0]}function Xt(t){const e=[];for(let n=0;n<t.length;n++)for(let s=n+1;s<t.length;s++){const r=t[n][0]-t[s][0],o=t[n][1]-t[s][1],c=t[n][2]-t[s][2],i=Math.sqrt(r*r+o*o+c*c);e.push({data:[t[n],t[s]],dist:i})}return e.sort((n,s)=>n.dist-s.dist),e.map(n=>n.data)}function ke(t,e){if(t.length===2)return[...t];let n=-1/0,s=null,r=null,o=null;for(let c=0;c<t.length;c++)for(let i=0;i<t.length;i++)if(i!==c)for(let a=0;a<t.length;a++){if(a===c||a===i)continue;const l=it(J(t[i],t[c])),f=it(J(t[a],t[i])),u=pt(l,f);u>n&&(n=u,s=t[c],r=t[i],o=t[a])}return e.distance(s,r)<e.distance(r,o)?o=r:s=r,[s,o]}function Co(t,e,n="average"){switch(n){case"single":let s=1/0;for(const o of t.colors)for(const c of e.colors)s=Math.min(s,K(o,c));return s;case"complete":let r=0;for(const o of t.colors)for(const c of e.colors)r=Math.max(r,K(o,c));return r;default:return K(t.centroid,e.centroid)}}function No(t,e="average"){let n=t.map(s=>({colors:[s],centroid:s,distance:0}));for(;n.length>1;){let s=1/0,r=0,o=1;for(let i=0;i<n.length;i++)for(let a=i+1;a<n.length;a++){const l=Co(n[i],n[a],e);l<s&&(s=l,r=i,o=a)}const c={colors:[...n[r].colors,...n[o].colors],left:n[r],right:n[o],centroid:Cn([...n[r].colors,...n[o].colors]),distance:s};n=n.filter((i,a)=>a!==r&&a!==o),n.push(c)}return n[0]}function at(t,e="balanced"){if(!t.left&&!t.right||!t.left||!t.right)return t.colors;switch(e){case"depth-first":return[...at(t.left,e),...at(t.right,e)];case"breadth-first":return t.left.colors.length<=t.right.colors.length?[...at(t.left,e),...at(t.right,e)]:[...at(t.right,e),...at(t.left,e)];default:const n=at(t.left,e),s=at(t.right,e),r=K(n[n.length-1],s[0]),o=K(s[s.length-1],n[0]);return r<=o?[...n,...s]:[...s,...n]}}function Ao(t,e="average",n="balanced"){if(t.length===0)return[];if(t.length===1)return t;const s=No(t,e);return at(s,n)}function Eo(t,e,n){return[...t].sort(()=>n()-.5).slice(0,e)}function xo(t,e){return t.map(n=>{let s=1/0,r=0;return e.forEach((o,c)=>{const i=K(n,o);i<s&&(s=i,r=c)}),r})}function Oo(t,e,n,s){const r=[];for(let o=0;o<n;o++){const c=t.filter((i,a)=>e[a]===o);c.length>0?r.push(Cn(c)):r.push(t[Math.floor(s()*t.length)])}return r}function So(t,e=8,n=50){if(t.length===0)return[];if(t.length<=e)return t;const s=yo();let r=Eo(t,e,s),o=[];for(let l=0;l<n;l++){const f=xo(t,r);if(JSON.stringify(f)===JSON.stringify(o))break;o=f,r=Oo(t,o,e,s)}const c=Array.from({length:e},()=>[]);t.forEach((l,f)=>{c[o[f]].push(l)});const i=c.map((l,f)=>({cluster:l,centroid:r[f]})).filter(l=>l.cluster.length>0).sort((l,f)=>{const u=l.centroid[0]+l.centroid[1]+l.centroid[2],h=f.centroid[0]+f.centroid[1]+f.centroid[2];return u-h}),a=[];for(const{cluster:l,centroid:f}of i){const u=l.sort((h,b)=>K(h,f)-K(b,f));a.push(...u)}return a}function $n(t,e,n){const s=[],r=t[e];return t.forEach((o,c)=>{K(r,o)<=n&&s.push(c)}),s}function Lo(t,e=30,n=3){if(t.length===0)return[];const s=new Set,r=[],o=[];t.forEach((i,a)=>{if(s.has(a))return;s.add(a);const l=$n(t,a,e);if(l.length<n)o.push(a);else{const f=[],u=[...l];for(;u.length>0;){const h=u.shift();if(!s.has(h)){s.add(h);const b=$n(t,h,e);b.length>=n&&u.push(...b)}f.push(h)}r.push(f)}}),r.sort((i,a)=>{const l=i.reduce((u,h)=>{const b=t[h];return u+b[0]+b[1]+b[2]},0)/i.length,f=a.reduce((u,h)=>{const b=t[h];return u+b[0]+b[1]+b[2]},0)/a.length;return l-f});const c=[];for(const i of r){const a=new Set(i),l=[];let f=i[0];for(l.push(f),a.delete(f);a.size>0;){let u=-1,h=1/0;for(const b of a){const M=K(t[f],t[b]);M<h&&(h=M,u=b)}if(u!==-1)l.push(u),a.delete(u),f=u;else break}c.push(...l.map(u=>t[u]))}return c.push(...o.map(i=>t[i])),c}const we={rgb:"gl",lab:"lab-norm"};function Gn(t,e="rgb",n="average",s="balanced"){return z(t,r=>Ao(r,n,s),we[e]||e)}Gn.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"linkage",values:["single","complete","average"]},{name:"traversal",values:["depth-first","breadth-first","balanced"]}];function Pn(t,e="rgb",n=.5,s=50){return z(t,r=>So(r,Math.ceil(n*r.length),s),we[e]||e)}Pn.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"k",values:[.1,.3,.5,.7]},{name:"iterations",values:[10,50,100,250]}];function Bn(t,e="rgb",n=.3,s=3){return z(t,r=>{const[o,c]=Xt(r).at(-1),i=K(o,c)*n;return Lo(r,i,s)},we[e]||e)}Bn.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"eps",values:[.1,.3,.5]},{name:"pts",values:[3,5,7]}];function Do(t,e){if(t.length===0)return[];if(t.length===1)return t;const{selectStart:n,distance:s}=e,r=new Map;for(const a of t)r.set(a,t.filter(l=>l!==a));let o=n(t);const c=[o],i=new Set([o]);for(;c.length<t.length;){const l=r.get(o).filter(h=>!i.has(h));let f=l[0],u=s(o,f);for(let h=1;h<l.length;h++){const b=s(o,l[h]);b<u&&(u=b,f=l[h])}o=f,i.add(o),c.push(o)}return c}function _e(t,e="rgb",n="bright",s="euclidean"){return z(t,function(r){const{toColors:o}=this;function c(a){const l=o(a),f=l.reduce((u,h)=>Yt(h)>Yt(u)?h:u);return a[l.indexOf(f)]}function i(a){const l=o(a),f=l.reduce((u,h)=>Yt(h)<Yt(u)?h:u);return a[l.indexOf(f)]}return Do(r,{selectStart:n==="bright"?c:i,distance:s==="euclidean"?this.distance:this.delta})},e,{fn:ct,color:!0})}_e.params=[{name:"model",values:["hsl","hcl","hsv","oklch","oklab","okhsl","okhsv","lch","lab","rgb","cmyk"]},{name:"start",values:["bright","dark"]}];function In(t,e="bright"){return _e(t,"rgb",e,"delta")}In.params=[{name:"start",values:["bright","dark"]}];function Ro(t){let e=0,n=0,s=0;for(const[f,u,h]of t)e+=f,n+=u,s+=h||0;const r=e/t.length,o=n/t.length,c=s/t.length;let i=0,a=0,l=0;for(const[f,u,h]of t){const b=Math.abs(f-r)/(f+r)||0,M=Math.abs(u-o)/(u+o)||0,_=Math.abs(h-c)/(h+c)||0;i+=b,a+=M,l+=_}return[i,a,l]}function ye(t){const e=t.map(l=>Xr(l)),n=e.reduce((l,[f])=>l+f,0)/e.length,s=e.map(l=>Fr(l)),r=s.reduce((l,[,f])=>l+f,0)/s.length,o=$o(s.map(([,,l])=>l).filter(l=>!Number.isNaN(l))),c=e.reduce((l,[f])=>l+Math.pow(f-n,2),0)/e.length,i=s.reduce((l,[,f])=>l+Math.pow(f-r,2),0)/s.length,a=Go(s.map(([,,l])=>l).filter(l=>!Number.isNaN(l)),o);return{L:Math.sqrt(c),C:Math.sqrt(i),H:Math.sqrt(a),meanC:r,meanH:o}}function $o(t){if(t.length===0)return 0;const e=t.filter(o=>!Number.isNaN(o)).map(o=>o*Math.PI/180),n=e.reduce((o,c)=>o+Math.sin(c),0),s=e.reduce((o,c)=>o+Math.cos(c),0);let r=Math.atan2(n/t.length,s/t.length)*(180/Math.PI);return r<0&&(r+=360),r}function Go(t,e){return t.length===0?0:t.map(s=>{let r=s-e;return r>180&&(r-=360),r<-180&&(r+=360),r*r}).reduce((s,r)=>s+r,0)/t.length}function Hn(t){const e=Math.max(Number.EPSILON,t.L+t.C+(t.H??0));return{Kl:(e-t.L)/(2*e),Kc:(e-t.C)/(2*e),Kh:(e-t.H)/(2*e)}}function ve(t){const e=ye(t),n=t.map(f=>yn(f)),s=n.map(([f])=>f),r=n.map(([,f])=>f),o=n.map(([,,f])=>f),c=Math.max(...s)-Math.min(...s),i=Math.max(...r)-Math.min(...r),a=Po(o.filter(f=>!Number.isNaN(f))),l={...e,lightnessRange:c,chromaRange:i,hueSpread:a};return a>180&&e.H>70&&e.L<80?{Kl:.5,Kc:1,Kh:2,type:"Rainbow",data:l}:c>50&&e.L>20&&a<30?{Kl:2,Kc:.5,Kh:.5,type:"Monochromatic",data:l}:i>50&&e.C>15&&a<60?{Kl:.5,Kc:2,Kh:1,type:"Wide Chroma",data:l}:e.H<15&&e.L<15&&e.C<15?{Kl:1.2,Kc:1.2,Kh:1.2,type:"Uniform",data:l}:{Kl:1,Kc:1,Kh:1,type:"Balanced",data:l}}function Po(t){if(t.length===0)return 0;const e=[...t].sort((r,o)=>r-o);let n=0;for(let r=0;r<e.length-1;r++){const o=e[r+1]-e[r];n=Math.max(n,o)}const s=360-(e[e.length-1]-e[0]);return n=Math.max(n,s),360-n}function Rt(t,e){const n=new Map;for(let c=0;c<t.length;c++){const i=new Set;for(let a=0;a<t.length;a++)c!==a&&i.add({color:t[a],distance:e(t[c],t[a])});n.set(t[c],i)}const s=[],r=new Set;function o(c){s.push(c),r.add(c);const i=[...n.get(c)].sort((a,l)=>a.distance-l.distance);for(const a of i)r.has(a.color)||o(a.color)}return o(t[0]),s}function zn(t,e="raw"){return z(t,function(n){const s=Rt(n,this.delta);return e==="raw"?s:Me(s,this.delta)},"hex",ct)}zn.params=[{name:"post",values:["raw","tsp"]}];function Bo(t){return z(t,function(e){const n=Ro(e);return Rt(e,(s,r)=>this.delta(s,r,...n))},"lch",{fn:ct,color:!0})}function Io(t){const{Kl:e,Kc:n,Kh:s}=ve(t),r=[e,n,s];return z(t,function(o){return Rt(o,(c,i)=>this.delta(c,i,...r))},"hex",ct)}function Ho(t){const e=ye(t),{Kc:n,Kh:s,Kl:r}=Hn(e),o=[r,n,s];return z(t,function(c){return Rt(c,(i,a)=>this.delta(i,a,...o))},"hex",ct)}function zo(t){const e=ye(t),{Kc:n,Kh:s,Kl:r}=Hn(e),o=[r,n,s+.5];return z(t,function(c){return Rt(c,(i,a)=>this.delta(i,a,...o))},"hex",ct)}function Ce(t,e,n,s,r=1e6){const o=s(t,e),c=it(J(e,t));let i=o;if(n){const l=(1-pt(n,c))*r;i=o*(1+l)}return{score:i,direction:c}}function Ne(t,e,n,s,r,o=1e6){const c=r(t,e),i=s(t,e)*c/128,a=it(J(e,t));let l=i;if(n){const u=(1-pt(n,a))*o;l=i*(1+u)}return{score:l,direction:a}}function Ot(t,e,n){const s=new Set(t),r=[];let[o,c]=e;r.push(o,c),s.delete(o),s.delete(c);let i=it(J(o,c)),a=it(J(c,o));for(;s.size>0;){let l=[];for(const u of s){const h=n(o,u,i),b=n(c,u,a),M=Math.min(h.score,b.score);l.push({candidate:u,scoreStart:h,scoreEnd:b,minScore:M})}l.sort((u,h)=>u.minScore-h.minScore);const f=l[0];f.scoreStart.score<=f.scoreEnd.score?(r.unshift(f.candidate),i=f.scoreStart.direction,o=f.candidate):(r.push(f.candidate),a=f.scoreEnd.direction,c=f.candidate),s.delete(f.candidate)}return r}function jo(t){return z(t,function(e){const n=(s,r,o)=>Ce(s,r,o,this.distance);return Ot(e,vo(e),n)},"oklab")}function jn(t,e="raw"){return z(t,function(n){const s=Xt(n).slice(0,128),r=(c,i,a)=>Ce(c,i,a,this.distance),o=s.map(c=>{const i=Ot(n,c,r);return{vectors:i,metrics:pe(this.toColors(i))}});return o.sort((c,i)=>c.metrics.totalDistance-i.metrics.totalDistance),e==="tsp"?Me(o[0].vectors,this.distance):o[0].vectors},"oklab")}jn.params=[{name:"post",values:["raw","tsp"]}];function Ko(t){return z(t,function(e){const n=Xt(e).slice(0,128),s=(c,i)=>this.delta(c,i),r=(c,i,a)=>Ne(c,i,a,this.distance,s),o=n.map(c=>{const i=Ot(e,c,r);return{vectors:i,metrics:pe(this.toColors(i))}});return o.sort((c,i)=>c.metrics.totalDistance-i.metrics.totalDistance),o[0].vectors},"oklab",{fn:ct,color:!0})}function qo(t){return z(t,function(e){const n=(s,r,o)=>Ce(s,r,o,this.distance);return Ot(e,ke(e,this),n)},"oklab")}function To(t){return z(t,function(e){const n=(r,o)=>this.delta(r,o),s=(r,o,c)=>Ne(r,o,c,this.distance,n);return Ot(e,ke(e,this),s)},"oklab",{fn:ct,color:!0})}function Yo(t){const{Kl:e,Kc:n,Kh:s}=ve(t),r=[e,n,s];return z(t,function(o){const c=(a,l)=>this.delta(a,l,...r),i=(a,l,f)=>Ne(a,l,f,this.distance,c);return Ot(o,ke(o,this),i)},"oklab",{fn:ct,color:!0})}var Xo={Original:0,SPI:1,CYL:1,KM:1,HARM:2,HARMED:2,"NNA(DE) Lab":2,"NNA(DE++) Lab":2,"NNA(DE+1) Lab":2,"NNA(DE+2) Lab":2,"MOM(Closest)-Oklab":2,"HIL-RGB":2,PCA:2,CL:2,DBSCAN:2,"NNA(DE+) Lab":3,"MOM(Inlinest)-Oklab":3,"MOM(Inlinest,DE)-Oklab":3,"MOM(Inlinest,DE++)-Oklab":3,"MOM(Closest+)-Oklab":4,"MOM(Closest+,DE)-Oklab":4,"GEN-Oklab":4,"GEN3-Oklab":4,_TOTAL:53};const T={PCA:["PCA","Principal component analysis","https://en.wikipedia.org/wiki/Principal_component_analysis"],HIL:["HIL","Hilbert curve","https://en.wikipedia.org/wiki/Hilbert_curve"],GEN:["GEN","Genetic algorithm","https://en.wikipedia.org/wiki/Genetic_algorithm"],NNA:["NNA","Nearest neighbour algorithm","https://en.wikipedia.org/wiki/Nearest_neighbour_algorithm"],MOM:["MON","Greedy with momentum"," https://en.wikipedia.org/wiki/Greedy_algorithm"]},Y={RGB:["RGB","https://en.wikipedia.org/wiki/RGB_color_model"],LAB:["CIELAB","https://en.wikipedia.org/wiki/CIELAB_color_space"],OKLAB:["Oklab","https://en.wikipedia.org/wiki/Oklab_color_space"]},Mt={DE:["DE","Delta E","http://www.brucelindbloom.com/index.html?Eqn_DeltaE_CIE2000.html"]},Fo=[{name:"Original",fn:t=>t,mid:"Original",description:{model:null}},{name:"HARM",fn:_e,mid:"HARM",description:{}},{name:"HARMED",fn:In,mid:"HARMED",description:{}},{name:"NNA(Delta E)",fn:zn,mid:"NNA(DE) Lab",description:{method:T.NNA,model:Y.LAB,diff:Mt.DE}},{name:"NNA(Delta E+)",fn:Bo,mid:"NNA(DE+) Lab",description:{method:T.NNA,model:Y.LAB,diff:Mt.DE}},{name:"NNA(Delta E++)",fn:Io,mid:"NNA(DE++) Lab",description:{method:T.NNA,model:Y.LAB,diff:Mt.DE}},{name:"NNA(Delta E+1)",fn:Ho,mid:"NNA(DE+1) Lab",description:{method:T.NNA,model:Y.LAB,diff:Mt.DE}},{name:"NNA(Delta E+2)",fn:zo,mid:"NNA(DE+2) Lab",description:{method:T.NNA,model:Y.LAB,diff:Mt.DE}},{name:"MOM(Closest) Oklab",fn:jo,mid:"MOM(Closest)-Oklab",description:{method:T.MOM,model:Y.OKLAB}},{name:"MOM(Closest+) Oklab",fn:jn,mid:"MOM(Closest+)-Oklab",description:{method:T.MOM,model:Y.OKLAB}},{name:"MOM(Closest+, Delta E) Oklab",fn:Ko,mid:"MOM(Closest+,DE)-Oklab",description:{method:T.MOM,model:Y.OKLAB}},{name:"MOM(Inlinest) Oklab",fn:qo,mid:"MOM(Inlinest)-Oklab",description:{method:T.MOM,model:Y.OKLAB}},{name:"MOM(Inlinest, Delta E) Oklab",fn:To,mid:"MOM(Inlinest,DE)-Oklab",description:{method:T.MOM,model:Y.OKLAB,diff:Mt.DE}},{name:"MOM(Inlinest, Delta E++) Oklab",fn:Yo,mid:"MOM(Inlinest,DE++)-Oklab",description:{method:T.MOM,model:Y.OKLAB,diff:Mt.DE}},{name:"Genetic Oklab",fn:fo,mid:"GEN-Oklab",description:{method:T.GEN,model:Y.OKLAB}},{name:"Genetic3 Oklab",fn:mo,mid:"GEN3-Oklab",description:{method:T.GEN,model:Y.OKLAB}},{name:"Hilbert RGB",fn:xn,mid:"HIL-RGB",description:{method:T.HIL,model:Y.RGB}},{name:"PCA",fn:Ln,mid:"PCA",description:{method:T.PCA}},{name:"Spiral",fn:Dn,mid:"SPI",description:{}},{name:"Cylindrical",fn:Rn,mid:"CYL",description:{}},{name:"Cluster",fn:Gn,mid:"CL",description:{}},{name:"K-means",fn:Pn,mid:"KM",description:{}},{name:"DBSCAN",fn:Bn,mid:"DBSCAN",description:{}}];function Wo(t){return t.reduce((e,{values:n})=>e.flatMap(s=>n.map(r=>[...s,r])),[[]])}const Zo=Fo.reduce((t,e)=>{if(e.fn.params){const n=Wo(e.fn.params);for(const s of n)t.push({...e,name:`${e.name} [${s.join(",")}]`,mid:`${e.mid}:[${s.join(",")}]`,speed:Xo[e.mid]||0,fn:r=>e.fn.call(null,r,...s)})}else t.push(e);return t},[]);function Vo(t){const e=t.map(C=>U(C)),n=t.map(C=>yn(C));if(e.length<2)return{totalDistance:0,avgAngleChange:0,maxAngleChange:0,meanDistance:0,devDistance:0,totalCurveDistance:0,meanCurveDistance:0,devCurveDistance:0,lchAvgChange:{L:0,C:0,H:0},lchMaxChange:{L:0,C:0,H:0},lchDeviation:{L:0,C:0,H:0},curveRatio:0,perceptualUniformity:0,curveUniformity:0,hueSpread:0,chromaRange:0,lightnessRange:0,harmonicScore:0,harmonicCurveScore:0};let s=0,r=0,o=[],c=null;const i=[],a=[],l=[e[0],...e,e[e.length-1]],f=[],u=[],h=[];for(let C=1;C<e.length;C++){const G=K(e[C-1],e[C]);s+=G,i.push(G);const bt=Qo(l[C-1],l[C],l[C+1],l[C+2]);r+=bt,a.push(bt);const ut=it(J(e[C],e[C-1]));if(c&&G>0){const Lt=Math.max(-1,Math.min(1,pt(c,ut))),nc=Math.acos(Lt)*(180/Math.PI);o.push(nc)}c=ut;const[$t,Ae,St]=n[C-1],[Gt,ec,Ee]=n[C];if(f.push(Math.abs(Gt-$t)),u.push(Math.abs(ec-Ae)),!isNaN(St)&&!isNaN(Ee)){let Lt=Math.abs(Ee-St);Lt>180&&(Lt=360-Lt),h.push(Lt)}else isNaN(St)&&isNaN(Ee)?h.push(0):h.push(90)}const b=s/(e.length-1),M=Math.sqrt(i.reduce((C,G)=>C+Math.pow(G-b,2),0)/(e.length-1)),_=r/(e.length-1),d=Math.sqrt(a.reduce((C,G)=>C+Math.pow(G-_,2),0)/(e.length-1)),p=o.length>0?o.reduce((C,G)=>C+G,0)/o.length:0,D=o.length>0?Math.max(...o):0,S={L:f.reduce((C,G)=>C+G,0)/f.length,C:u.reduce((C,G)=>C+G,0)/u.length,H:h.reduce((C,G)=>C+G,0)/h.length},R={L:Math.max(...f),C:Math.max(...u),H:Math.max(...h)},$=S.L,P=S.C,x=S.H,m={L:Math.sqrt(f.reduce((C,G)=>C+Math.pow(G-$,2),0)/f.length),C:Math.sqrt(u.reduce((C,G)=>C+Math.pow(G-P,2),0)/u.length),H:Math.sqrt(h.reduce((C,G)=>C+Math.pow(G-x,2),0)/h.length)},k=1/(1+M),y=1/(1+d),w=r/s-1,L=n.map(([,,C])=>C).filter(C=>!isNaN(C)),v=L.length>1?Uo(L):0,B=n.map(([,C])=>C),X=n.map(([C])=>C),lt=Math.max(...B)-Math.min(...B),Q=Math.max(...X)-Math.min(...X),ft=k*.4+Math.min(v/180,1)*.3+1/(1+m.H/45)*.3,kt=y*.4+Math.min(v/180,1)*.3+1/(1+m.H/45)*.3;return{totalDistance:s,avgAngleChange:p,maxAngleChange:D,meanDistance:b,devDistance:M,totalCurveDistance:r,meanCurveDistance:_,devCurveDistance:d,lchAvgChange:S,lchMaxChange:R,lchDeviation:m,curveRatio:w,perceptualUniformity:k,curveUniformity:y,hueSpread:v,chromaRange:lt,lightnessRange:Q,harmonicScore:ft,harmonicCurveScore:kt}}function Uo(t){if(t.length<2)return 0;const e=[...t],n=[];for(let s=1;s<e.length;s++)n.push(e[s]-e[s-1]);return n.push(360-e[e.length-1]+e[0]),n.reduce((s,r)=>s+r,0)/n.length}function Jo(t,e,n,s,r){const o=r*r,c=o*r;return[.5*(2*e[0]+(-t[0]+n[0])*r+(2*t[0]-5*e[0]+4*n[0]-s[0])*o+(-t[0]+3*e[0]-3*n[0]+s[0])*c),.5*(2*e[1]+(-t[1]+n[1])*r+(2*t[1]-5*e[1]+4*n[1]-s[1])*o+(-t[1]+3*e[1]-3*n[1]+s[1])*c),.5*(2*e[2]+(-t[2]+n[2])*r+(2*t[2]-5*e[2]+4*n[2]-s[2])*o+(-t[2]+3*e[2]-3*n[2]+s[2])*c)]}function Qo(t,e,n,s,r=12){let o=0,c=e;for(let i=1;i<=r;i++){const a=i/r,l=Jo(t,e,n,s,a);o+=K(c,l),c=l}return o}async function tc(t){const e=performance.now(),n=await t(),s=performance.now()-e;return{result:n,elapsed:s}}self.onmessage=async t=>{const{sortName:e,getPaletteType:n,palette:s}=t.data;if(e){const r=Zo.find(f=>f.name===e).fn,{result:o,elapsed:c}=await tc(async()=>await r(s)),i=U(o[0]),a=U(o.at(-1));i[0]>a[0]&&o.reverse();const l=Vo(o);self.postMessage({result:o,metrics:l,elapsed:c})}else n&&self.postMessage(ve(n))}})();
