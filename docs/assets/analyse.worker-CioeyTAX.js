(function(){"use strict";function p(c,a=16){if(!c.length)return[];const r=new Map;for(const t of c)if(!(t.colors.length>a))for(const s of t.groups)for(const e of s.methods){const o=e.method?.mid;if(!o)continue;r.has(o)||r.set(o,{mid:o,name:e.method.name,scores:[],bestCount:0,onlyBestCount:0,totalCount:0,avgScore:0,medianScore:0,stdDev:0,winRate:0,paletteTypes:new Map,palettes:[]});const n=r.get(o);n.scores.push(s.record.score),n.totalCount++;const u=e.best||s.methods.some(d=>d.best);u&&(n.bestCount++,n.palettes.push(t.key)),u&&s.methods.length===1&&n.onlyBestCount++;const l=t.type?.type||"unknown";n.paletteTypes.has(l)||n.paletteTypes.set(l,{scores:[],bestCount:0});const h=n.paletteTypes.get(l);h.scores.push(s.record.score),u&&h.bestCount++}return r.forEach(t=>{t.scores.sort((e,o)=>e-o),t.avgScore=t.scores.reduce((e,o)=>e+o,0)/t.scores.length,t.medianScore=t.scores[Math.floor(t.scores.length/2)];const s=t.scores.reduce((e,o)=>e+Math.pow(o-t.avgScore,2),0)/t.scores.length;t.stdDev=Math.sqrt(s),t.winRate=t.bestCount/t.totalCount*100}),Array.from(r.values()).sort((t,s)=>t.avgScore-s.avgScore)}self.onmessage=async c=>{const{records:a,maxColors:r}=c.data;self.postMessage(p(a,r).sort((t,s)=>s.bestCount-t.bestCount))}})();
