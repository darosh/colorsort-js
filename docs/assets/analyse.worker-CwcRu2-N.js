(function(){"use strict";function l(c){if(!c.length)return[];const r=new Map;for(const t of c)for(const s of t.groups)for(const o of s.methods){const e=o.method?.mid;if(!e||!s.record.score)continue;r.has(e)||r.set(e,{mid:e,name:o.method.name,scores:[],bestCount:0,onlyBestCount:0,totalCount:0,avgScore:0,medianScore:0,stdDev:0,winRate:0,paletteTypes:new Map,palettes:[]});const n=r.get(e);n.scores.push(s.record.score),n.totalCount++;const a=o.best||s.methods.some(p=>p.best);a&&(n.bestCount++,n.palettes.push(t.key)),a&&s.methods.length===1&&n.onlyBestCount++;const u=t.type?.type||"unknown";n.paletteTypes.has(u)||n.paletteTypes.set(u,{scores:[],bestCount:0});const h=n.paletteTypes.get(u);h.scores.push(s.record.score),a&&h.bestCount++}return r.forEach(t=>{t.scores.sort((o,e)=>o-e),t.avgScore=t.scores.reduce((o,e)=>o+e,0)/t.scores.length,t.medianScore=t.scores[Math.floor(t.scores.length/2)];const s=t.scores.reduce((o,e)=>o+Math.pow(e-t.avgScore,2),0)/t.scores.length;t.stdDev=Math.sqrt(s),t.winRate=t.bestCount/t.totalCount*100}),Array.from(r.values()).sort((t,s)=>t.avgScore-s.avgScore)}self.onmessage=async c=>{const{records:r}=c.data;self.postMessage(l(r).sort((t,s)=>s.bestCount-t.bestCount))}})();
