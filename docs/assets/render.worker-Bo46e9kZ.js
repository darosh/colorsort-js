(function(){"use strict";const{min:Kr,max:jr}=Math,yt=(t,e=0,n=1)=>Kr(jr(e,t),n),fe=t=>{t._clipped=!1,t._unclipped=t.slice(0);for(let e=0;e<=3;e++)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]=yt(t[e],0,255)):e===3&&(t[e]=yt(t[e],0,1));return t},on={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])on[`[object ${t}]`]=t.toLowerCase();function _(t){return on[Object.prototype.toString.call(t)]||"object"}const E=(t,e=null)=>t.length>=3?Array.prototype.slice.call(t):_(t[0])=="object"&&e?e.split("").filter(n=>t[0][n]!==void 0).map(n=>t[0][n]):t[0].slice(0),At=t=>{if(t.length<2)return null;const e=t.length-1;return _(t[e])=="string"?t[e].toLowerCase():null},{PI:Ft,min:sn,max:ln}=Math,X=t=>Math.round(t*100)/100,de=t=>Math.round(t*100)/100,st=Ft*2,pe=Ft/3,zr=Ft/180,Fr=180/Ft;function cn(t){return[...t.slice(0,3).reverse(),...t.slice(3)]}const O={format:{},autodetect:[]};class b{constructor(...e){const n=this;if(_(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let r=At(e),a=!1;if(!r){a=!0,O.sorted||(O.autodetect=O.autodetect.sort((o,s)=>s.p-o.p),O.sorted=!0);for(let o of O.autodetect)if(r=o.test(...e),r)break}if(O.format[r]){const o=O.format[r].apply(null,a?e:e.slice(0,-1));n._rgb=fe(o)}else throw new Error("unknown format: "+e);n._rgb.length===3&&n._rgb.push(1)}toString(){return _(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const Yr="3.2.0",P=(...t)=>new b(...t);P.version=Yr;const Ct={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Zr=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Xr=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,un=t=>{if(t.match(Zr)){(t.length===4||t.length===7)&&(t=t.substr(1)),t.length===3&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=parseInt(t,16),n=e>>16,r=e>>8&255,a=e&255;return[n,r,a,1]}if(t.match(Xr)){(t.length===5||t.length===9)&&(t=t.substr(1)),t.length===4&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16),n=e>>24&255,r=e>>16&255,a=e>>8&255,o=Math.round((e&255)/255*100)/100;return[n,r,a,o]}throw new Error(`unknown hex color: ${t}`)},{round:Yt}=Math,hn=(...t)=>{let[e,n,r,a]=E(t,"rgba"),o=At(t)||"auto";a===void 0&&(a=1),o==="auto"&&(o=a<1?"rgba":"rgb"),e=Yt(e),n=Yt(n),r=Yt(r);let s="000000"+(e<<16|n<<8|r).toString(16);s=s.substr(s.length-6);let i="0"+Yt(a*255).toString(16);switch(i=i.substr(i.length-2),o.toLowerCase()){case"rgba":return`#${s}${i}`;case"argb":return`#${i}${s}`;default:return`#${s}`}};b.prototype.name=function(){const t=hn(this._rgb,"rgb");for(let e of Object.keys(Ct))if(Ct[e]===t)return e.toLowerCase();return t},O.format.named=t=>{if(t=t.toLowerCase(),Ct[t])return un(Ct[t]);throw new Error("unknown color name: "+t)},O.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&_(t)==="string"&&Ct[t.toLowerCase()])return"named"}}),b.prototype.alpha=function(t,e=!1){return t!==void 0&&_(t)==="number"?e?(this._rgb[3]=t,this):new b([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},b.prototype.clipped=function(){return this._rgb._clipped||!1};const nt={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},Ur=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function it(t){const e=Ur.get(String(t).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+t);nt.labWhitePoint=t,nt.Xn=e[0],nt.Zn=e[1]}function qt(){return nt.labWhitePoint}const be=(...t)=>{t=E(t,"lab");const[e,n,r]=t,[a,o,s]=Wr(e,n,r),[i,l,c]=fn(a,o,s);return[i,l,c,t.length>3?t[3]:1]},Wr=(t,e,n)=>{const{kE:r,kK:a,kKE:o,Xn:s,Yn:i,Zn:l}=nt,c=(t+16)/116,u=.002*e+c,h=c-.005*n,f=u*u*u,p=h*h*h,v=f>r?f:(116*u-16)/a,w=t>o?Math.pow((t+16)/116,3):t/a,g=p>r?p:(116*h-16)/a,M=v*s,L=w*i,D=g*l;return[M,L,D]},me=t=>{const e=Math.sign(t);return t=Math.abs(t),(t<=.0031308?t*12.92:1.055*Math.pow(t,1/2.4)-.055)*e},fn=(t,e,n)=>{const{MtxAdaptMa:r,MtxAdaptMaI:a,MtxXYZ2RGB:o,RefWhiteRGB:s,Xn:i,Yn:l,Zn:c}=nt,u=i*r.m00+l*r.m10+c*r.m20,h=i*r.m01+l*r.m11+c*r.m21,f=i*r.m02+l*r.m12+c*r.m22,p=s.X*r.m00+s.Y*r.m10+s.Z*r.m20,v=s.X*r.m01+s.Y*r.m11+s.Z*r.m21,w=s.X*r.m02+s.Y*r.m12+s.Z*r.m22,g=(t*r.m00+e*r.m10+n*r.m20)*(p/u),M=(t*r.m01+e*r.m11+n*r.m21)*(v/h),L=(t*r.m02+e*r.m12+n*r.m22)*(w/f),D=g*a.m00+M*a.m10+L*a.m20,I=g*a.m01+M*a.m11+L*a.m21,R=g*a.m02+M*a.m12+L*a.m22,S=me(D*o.m00+I*o.m10+R*o.m20),$=me(D*o.m01+I*o.m11+R*o.m21),d=me(D*o.m02+I*o.m12+R*o.m22);return[S*255,$*255,d*255]},ge=(...t)=>{const[e,n,r,...a]=E(t,"rgb"),[o,s,i]=dn(e,n,r),[l,c,u]=Jr(o,s,i);return[l,c,u,...a.length>0&&a[0]<1?[a[0]]:[]]};function Jr(t,e,n){const{Xn:r,Yn:a,Zn:o,kE:s,kK:i}=nt,l=t/r,c=e/a,u=n/o,h=l>s?Math.pow(l,1/3):(i*l+16)/116,f=c>s?Math.pow(c,1/3):(i*c+16)/116,p=u>s?Math.pow(u,1/3):(i*u+16)/116;return[116*f-16,500*(h-f),200*(f-p)]}function ve(t){const e=Math.sign(t);return t=Math.abs(t),(t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))*e}const dn=(t,e,n)=>{t=ve(t/255),e=ve(e/255),n=ve(n/255);const{MtxRGB2XYZ:r,MtxAdaptMa:a,MtxAdaptMaI:o,Xn:s,Yn:i,Zn:l,As:c,Bs:u,Cs:h}=nt;let f=t*r.m00+e*r.m10+n*r.m20,p=t*r.m01+e*r.m11+n*r.m21,v=t*r.m02+e*r.m12+n*r.m22;const w=s*a.m00+i*a.m10+l*a.m20,g=s*a.m01+i*a.m11+l*a.m21,M=s*a.m02+i*a.m12+l*a.m22;let L=f*a.m00+p*a.m10+v*a.m20,D=f*a.m01+p*a.m11+v*a.m21,I=f*a.m02+p*a.m12+v*a.m22;return L*=w/c,D*=g/u,I*=M/h,f=L*o.m00+D*o.m10+I*o.m20,p=L*o.m01+D*o.m11+I*o.m21,v=L*o.m02+D*o.m12+I*o.m22,[f,p,v]};b.prototype.lab=function(){return ge(this._rgb)},Object.assign(P,{lab:(...t)=>new b(...t,"lab"),getLabWhitePoint:qt,setLabWhitePoint:it}),O.format.lab=be,O.autodetect.push({p:2,test:(...t)=>{if(t=E(t,"lab"),_(t)==="array"&&t.length===3)return"lab"}}),b.prototype.darken=function(t=1){const e=this,n=e.lab();return n[0]-=nt.Kn*t,new b(n,"lab").alpha(e.alpha(),!0)},b.prototype.brighten=function(t=1){return this.darken(-t)},b.prototype.darker=b.prototype.darken,b.prototype.brighter=b.prototype.brighten,b.prototype.get=function(t){const[e,n]=t.split("."),r=this[e]();if(n){const a=e.indexOf(n)-(e.substr(0,2)==="ok"?2:0);if(a>-1)return r[a];throw new Error(`unknown channel ${n} in mode ${e}`)}else return r};const{pow:Vr}=Math,Qr=1e-7,Tr=20;b.prototype.luminance=function(t,e="rgb"){if(t!==void 0&&_(t)==="number"){if(t===0)return new b([0,0,0,this._rgb[3]],"rgb");if(t===1)return new b([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),r=Tr;const a=(s,i)=>{const l=s.interpolate(i,.5,e),c=l.luminance();return Math.abs(t-c)<Qr||!r--?l:c>t?a(s,l):a(l,i)},o=(n>t?a(new b([0,0,0]),this):a(this,new b([255,255,255]))).rgb();return new b([...o,this._rgb[3]])}return ta(...this._rgb.slice(0,3))};const ta=(t,e,n)=>(t=Me(t),e=Me(e),n=Me(n),.2126*t+.7152*e+.0722*n),Me=t=>(t/=255,t<=.03928?t/12.92:Vr((t+.055)/1.055,2.4)),j={},Ot=(t,e,n=.5,...r)=>{let a=r[0]||"lrgb";if(!j[a]&&!r.length&&(a=Object.keys(j)[0]),!j[a])throw new Error(`interpolation mode ${a} is not defined`);return _(t)!=="object"&&(t=new b(t)),_(e)!=="object"&&(e=new b(e)),j[a](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))};b.prototype.mix=b.prototype.interpolate=function(t,e=.5,...n){return Ot(this,t,e,...n)},b.prototype.premultiply=function(t=!1){const e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new b([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};const{sin:ea,cos:na}=Math,pn=(...t)=>{let[e,n,r]=E(t,"lch");return isNaN(r)&&(r=0),r=r*zr,[e,na(r)*n,ea(r)*n]},we=(...t)=>{t=E(t,"lch");const[e,n,r]=t,[a,o,s]=pn(e,n,r),[i,l,c]=be(a,o,s);return[i,l,c,t.length>3?t[3]:1]},ra=(...t)=>{const e=cn(E(t,"hcl"));return we(...e)},{sqrt:aa,atan2:oa,round:sa}=Math,bn=(...t)=>{const[e,n,r]=E(t,"lab"),a=aa(n*n+r*r);let o=(oa(r,n)*Fr+360)%360;return sa(a*1e4)===0&&(o=Number.NaN),[e,a,o]},ye=(...t)=>{const[e,n,r,...a]=E(t,"rgb"),[o,s,i]=ge(e,n,r),[l,c,u]=bn(o,s,i);return[l,c,u,...a.length>0&&a[0]<1?[a[0]]:[]]};b.prototype.lch=function(){return ye(this._rgb)},b.prototype.hcl=function(){return cn(ye(this._rgb))},Object.assign(P,{lch:(...t)=>new b(...t,"lch"),hcl:(...t)=>new b(...t,"hcl")}),O.format.lch=we,O.format.hcl=ra,["lch","hcl"].forEach(t=>O.autodetect.push({p:2,test:(...e)=>{if(e=E(e,t),_(e)==="array"&&e.length===3)return t}})),b.prototype.saturate=function(t=1){const e=this,n=e.lch();return n[1]+=nt.Kn*t,n[1]<0&&(n[1]=0),new b(n,"lch").alpha(e.alpha(),!0)},b.prototype.desaturate=function(t=1){return this.saturate(-t)},b.prototype.set=function(t,e,n=!1){const[r,a]=t.split("."),o=this[r]();if(a){const s=r.indexOf(a)-(r.substr(0,2)==="ok"?2:0);if(s>-1){if(_(e)=="string")switch(e.charAt(0)){case"+":o[s]+=+e;break;case"-":o[s]+=+e;break;case"*":o[s]*=+e.substr(1);break;case"/":o[s]/=+e.substr(1);break;default:o[s]=+e}else if(_(e)==="number")o[s]=e;else throw new Error("unsupported value for Color.set");const i=new b(o,r);return n?(this._rgb=i._rgb,this):i}throw new Error(`unknown channel ${a} in mode ${r}`)}else return o},b.prototype.tint=function(t=.5,...e){return Ot(this,"white",t,...e)},b.prototype.shade=function(t=.5,...e){return Ot(this,"black",t,...e)};const ia=(t,e,n)=>{const r=t._rgb,a=e._rgb;return new b(r[0]+n*(a[0]-r[0]),r[1]+n*(a[1]-r[1]),r[2]+n*(a[2]-r[2]),"rgb")};j.rgb=ia;const{sqrt:ke,pow:Et}=Math,la=(t,e,n)=>{const[r,a,o]=t._rgb,[s,i,l]=e._rgb;return new b(ke(Et(r,2)*(1-n)+Et(s,2)*n),ke(Et(a,2)*(1-n)+Et(i,2)*n),ke(Et(o,2)*(1-n)+Et(l,2)*n),"rgb")};j.lrgb=la;const ca=(t,e,n)=>{const r=t.lab(),a=e.lab();return new b(r[0]+n*(a[0]-r[0]),r[1]+n*(a[1]-r[1]),r[2]+n*(a[2]-r[2]),"lab")};j.lab=ca;const $t=(t,e,n,r)=>{let a,o;r==="hsl"?(a=t.hsl(),o=e.hsl()):r==="hsv"?(a=t.hsv(),o=e.hsv()):r==="hcg"?(a=t.hcg(),o=e.hcg()):r==="hsi"?(a=t.hsi(),o=e.hsi()):r==="lch"||r==="hcl"?(r="hcl",a=t.hcl(),o=e.hcl()):r==="oklch"&&(a=t.oklch().reverse(),o=e.oklch().reverse());let s,i,l,c,u,h;(r.substr(0,1)==="h"||r==="oklch")&&([s,l,u]=a,[i,c,h]=o);let f,p,v,w;return!isNaN(s)&&!isNaN(i)?(i>s&&i-s>180?w=i-(s+360):i<s&&s-i>180?w=i+360-s:w=i-s,p=s+n*w):isNaN(s)?isNaN(i)?p=Number.NaN:(p=i,(u==1||u==0)&&r!="hsv"&&(f=c)):(p=s,(h==1||h==0)&&r!="hsv"&&(f=l)),f===void 0&&(f=l+n*(c-l)),v=u+n*(h-u),r==="oklch"?new b([v,f,p],r):new b([p,f,v],r)},mn=(t,e,n)=>$t(t,e,n,"lch");j.lch=mn,j.hcl=mn;const ua=t=>{if(_(t)=="number"&&t>=0&&t<=16777215){const e=t>>16,n=t>>8&255,r=t&255;return[e,n,r,1]}throw new Error("unknown num color: "+t)},ha=(...t)=>{const[e,n,r]=E(t,"rgb");return(e<<16)+(n<<8)+r};b.prototype.num=function(){return ha(this._rgb)},Object.assign(P,{num:(...t)=>new b(...t,"num")}),O.format.num=ua,O.autodetect.push({p:5,test:(...t)=>{if(t.length===1&&_(t[0])==="number"&&t[0]>=0&&t[0]<=16777215)return"num"}});const fa=(t,e,n)=>{const r=t.num(),a=e.num();return new b(r+n*(a-r),"num")};j.num=fa;const{floor:da}=Math,pa=(...t)=>{t=E(t,"hcg");let[e,n,r]=t,a,o,s;r=r*255;const i=n*255;if(n===0)a=o=s=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const l=da(e),c=e-l,u=r*(1-n),h=u+i*(1-c),f=u+i*c,p=u+i;switch(l){case 0:[a,o,s]=[p,f,u];break;case 1:[a,o,s]=[h,p,u];break;case 2:[a,o,s]=[u,p,f];break;case 3:[a,o,s]=[u,h,p];break;case 4:[a,o,s]=[f,u,p];break;case 5:[a,o,s]=[p,u,h];break}}return[a,o,s,t.length>3?t[3]:1]},ba=(...t)=>{const[e,n,r]=E(t,"rgb"),a=sn(e,n,r),o=ln(e,n,r),s=o-a,i=s*100/255,l=a/(255-s)*100;let c;return s===0?c=Number.NaN:(e===o&&(c=(n-r)/s),n===o&&(c=2+(r-e)/s),r===o&&(c=4+(e-n)/s),c*=60,c<0&&(c+=360)),[c,i,l]};b.prototype.hcg=function(){return ba(this._rgb)};const ma=(...t)=>new b(...t,"hcg");P.hcg=ma,O.format.hcg=pa,O.autodetect.push({p:1,test:(...t)=>{if(t=E(t,"hcg"),_(t)==="array"&&t.length===3)return"hcg"}});const ga=(t,e,n)=>$t(t,e,n,"hcg");j.hcg=ga;const{cos:_t}=Math,va=(...t)=>{t=E(t,"hsi");let[e,n,r]=t,a,o,s;return isNaN(e)&&(e=0),isNaN(n)&&(n=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(s=(1-n)/3,a=(1+n*_t(st*e)/_t(pe-st*e))/3,o=1-(s+a)):e<2/3?(e-=1/3,a=(1-n)/3,o=(1+n*_t(st*e)/_t(pe-st*e))/3,s=1-(a+o)):(e-=2/3,o=(1-n)/3,s=(1+n*_t(st*e)/_t(pe-st*e))/3,a=1-(o+s)),a=yt(r*a*3),o=yt(r*o*3),s=yt(r*s*3),[a*255,o*255,s*255,t.length>3?t[3]:1]},{min:Ma,sqrt:wa,acos:ya}=Math,ka=(...t)=>{let[e,n,r]=E(t,"rgb");e/=255,n/=255,r/=255;let a;const o=Ma(e,n,r),s=(e+n+r)/3,i=s>0?1-o/s:0;return i===0?a=NaN:(a=(e-n+(e-r))/2,a/=wa((e-n)*(e-n)+(e-r)*(n-r)),a=ya(a),r>n&&(a=st-a),a/=st),[a*360,i,s]};b.prototype.hsi=function(){return ka(this._rgb)};const Na=(...t)=>new b(...t,"hsi");P.hsi=Na,O.format.hsi=va,O.autodetect.push({p:2,test:(...t)=>{if(t=E(t,"hsi"),_(t)==="array"&&t.length===3)return"hsi"}});const xa=(t,e,n)=>$t(t,e,n,"hsi");j.hsi=xa;const Ne=(...t)=>{t=E(t,"hsl");const[e,n,r]=t;let a,o,s;if(n===0)a=o=s=r*255;else{const i=[0,0,0],l=[0,0,0],c=r<.5?r*(1+n):r+n-r*n,u=2*r-c,h=e/360;i[0]=h+1/3,i[1]=h,i[2]=h-1/3;for(let f=0;f<3;f++)i[f]<0&&(i[f]+=1),i[f]>1&&(i[f]-=1),6*i[f]<1?l[f]=u+(c-u)*6*i[f]:2*i[f]<1?l[f]=c:3*i[f]<2?l[f]=u+(c-u)*(2/3-i[f])*6:l[f]=u;[a,o,s]=[l[0]*255,l[1]*255,l[2]*255]}return t.length>3?[a,o,s,t[3]]:[a,o,s,1]},gn=(...t)=>{t=E(t,"rgba");let[e,n,r]=t;e/=255,n/=255,r/=255;const a=sn(e,n,r),o=ln(e,n,r),s=(o+a)/2;let i,l;return o===a?(i=0,l=Number.NaN):i=s<.5?(o-a)/(o+a):(o-a)/(2-o-a),e==o?l=(n-r)/(o-a):n==o?l=2+(r-e)/(o-a):r==o&&(l=4+(e-n)/(o-a)),l*=60,l<0&&(l+=360),t.length>3&&t[3]!==void 0?[l,i,s,t[3]]:[l,i,s]};b.prototype.hsl=function(){return gn(this._rgb)};const Aa=(...t)=>new b(...t,"hsl");P.hsl=Aa,O.format.hsl=Ne,O.autodetect.push({p:2,test:(...t)=>{if(t=E(t,"hsl"),_(t)==="array"&&t.length===3)return"hsl"}});const Ca=(t,e,n)=>$t(t,e,n,"hsl");j.hsl=Ca;const{floor:Oa}=Math,Ea=(...t)=>{t=E(t,"hsv");let[e,n,r]=t,a,o,s;if(r*=255,n===0)a=o=s=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const i=Oa(e),l=e-i,c=r*(1-n),u=r*(1-n*l),h=r*(1-n*(1-l));switch(i){case 0:[a,o,s]=[r,h,c];break;case 1:[a,o,s]=[u,r,c];break;case 2:[a,o,s]=[c,r,h];break;case 3:[a,o,s]=[c,u,r];break;case 4:[a,o,s]=[h,c,r];break;case 5:[a,o,s]=[r,c,u];break}}return[a,o,s,t.length>3?t[3]:1]},{min:$a,max:_a}=Math,Pa=(...t)=>{t=E(t,"rgb");let[e,n,r]=t;const a=$a(e,n,r),o=_a(e,n,r),s=o-a;let i,l,c;return c=o/255,o===0?(i=Number.NaN,l=0):(l=s/o,e===o&&(i=(n-r)/s),n===o&&(i=2+(r-e)/s),r===o&&(i=4+(e-n)/s),i*=60,i<0&&(i+=360)),[i,l,c]};b.prototype.hsv=function(){return Pa(this._rgb)};const La=(...t)=>new b(...t,"hsv");P.hsv=La,O.format.hsv=Ea,O.autodetect.push({p:2,test:(...t)=>{if(t=E(t,"hsv"),_(t)==="array"&&t.length===3)return"hsv"}});const Da=(t,e,n)=>$t(t,e,n,"hsv");j.hsv=Da;function Zt(t,e){let n=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(s=>[s]));let r=e[0].length,a=e[0].map((s,i)=>e.map(l=>l[i])),o=t.map(s=>a.map(i=>Array.isArray(s)?s.reduce((l,c,u)=>l+c*(i[u]||0),0):i.reduce((l,c)=>l+c*s,0)));return n===1&&(o=o[0]),r===1?o.map(s=>s[0]):o}const xe=(...t)=>{t=E(t,"lab");const[e,n,r,...a]=t,[o,s,i]=Ia([e,n,r]),[l,c,u]=fn(o,s,i);return[l,c,u,...a.length>0&&a[0]<1?[a[0]]:[]]};function Ia(t){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],n=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],r=Zt(n,t);return Zt(e,r.map(a=>a**3))}const Ae=(...t)=>{const[e,n,r,...a]=E(t,"rgb"),o=dn(e,n,r);return[...Ra(o),...a.length>0&&a[0]<1?[a[0]]:[]]};function Ra(t){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],n=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=Zt(e,t);return Zt(n,r.map(a=>Math.cbrt(a)))}b.prototype.oklab=function(){return Ae(this._rgb)},Object.assign(P,{oklab:(...t)=>new b(...t,"oklab")}),O.format.oklab=xe,O.autodetect.push({p:2,test:(...t)=>{if(t=E(t,"oklab"),_(t)==="array"&&t.length===3)return"oklab"}});const Sa=(t,e,n)=>{const r=t.oklab(),a=e.oklab();return new b(r[0]+n*(a[0]-r[0]),r[1]+n*(a[1]-r[1]),r[2]+n*(a[2]-r[2]),"oklab")};j.oklab=Sa;const Ga=(t,e,n)=>$t(t,e,n,"oklch");j.oklch=Ga;const{pow:Ce,sqrt:Oe,PI:Ee,cos:vn,sin:Mn,atan2:qa}=Math,Ha=(t,e="lrgb",n=null)=>{const r=t.length;n||(n=Array.from(new Array(r)).map(()=>1));const a=r/n.reduce(function(h,f){return h+f});if(n.forEach((h,f)=>{n[f]*=a}),t=t.map(h=>new b(h)),e==="lrgb")return Ba(t,n);const o=t.shift(),s=o.get(e),i=[];let l=0,c=0;for(let h=0;h<s.length;h++)if(s[h]=(s[h]||0)*n[0],i.push(isNaN(s[h])?0:n[0]),e.charAt(h)==="h"&&!isNaN(s[h])){const f=s[h]/180*Ee;l+=vn(f)*n[0],c+=Mn(f)*n[0]}let u=o.alpha()*n[0];t.forEach((h,f)=>{const p=h.get(e);u+=h.alpha()*n[f+1];for(let v=0;v<s.length;v++)if(!isNaN(p[v]))if(i[v]+=n[f+1],e.charAt(v)==="h"){const w=p[v]/180*Ee;l+=vn(w)*n[f+1],c+=Mn(w)*n[f+1]}else s[v]+=p[v]*n[f+1]});for(let h=0;h<s.length;h++)if(e.charAt(h)==="h"){let f=qa(c/i[h],l/i[h])/Ee*180;for(;f<0;)f+=360;for(;f>=360;)f-=360;s[h]=f}else s[h]=s[h]/i[h];return u/=r,new b(s,e).alpha(u>.99999?1:u,!0)},Ba=(t,e)=>{const n=t.length,r=[0,0,0,0];for(let a=0;a<t.length;a++){const o=t[a],s=e[a]/n,i=o._rgb;r[0]+=Ce(i[0],2)*s,r[1]+=Ce(i[1],2)*s,r[2]+=Ce(i[2],2)*s,r[3]+=i[3]*s}return r[0]=Oe(r[0]),r[1]=Oe(r[1]),r[2]=Oe(r[2]),r[3]>.9999999&&(r[3]=1),new b(fe(r))},{pow:Ka}=Math;function Xt(t){let e="rgb",n=P("#ccc"),r=0,a=[0,1],o=[0,1],s=[],i=[0,0],l=!1,c=[],u=!1,h=0,f=1,p=!1,v={},w=!0,g=1;const M=function(d){if(d=d||["#fff","#000"],d&&_(d)==="string"&&P.brewer&&P.brewer[d.toLowerCase()]&&(d=P.brewer[d.toLowerCase()]),_(d)==="array"){d.length===1&&(d=[d[0],d[0]]),d=d.slice(0);for(let N=0;N<d.length;N++)d[N]=P(d[N]);s.length=0;for(let N=0;N<d.length;N++)s.push(N/(d.length-1))}return S(),c=d},L=function(d){if(l!=null){const N=l.length-1;let A=0;for(;A<N&&d>=l[A];)A++;return A-1}return 0};let D=d=>d,I=d=>d;const R=function(d,N){let A,x;if(N==null&&(N=!1),isNaN(d)||d===null)return n;N?x=d:l&&l.length>2?x=L(d)/(l.length-2):f!==h?x=(d-h)/(f-h):x=1,x=I(x),N||(x=D(x)),g!==1&&(x=Ka(x,g)),x=i[0]+x*(1-i[0]-i[1]),x=yt(x,0,1);const k=Math.floor(x*1e4);if(w&&v[k])A=v[k];else{if(_(c)==="array")for(let y=0;y<s.length;y++){const G=s[y];if(x<=G){A=c[y];break}if(x>=G&&y===s.length-1){A=c[y];break}if(x>G&&x<s[y+1]){x=(x-G)/(s[y+1]-G),A=P.interpolate(c[y],c[y+1],x,e);break}}else _(c)==="function"&&(A=c(x));w&&(v[k]=A)}return A};var S=()=>v={};M(t);const $=function(d){const N=P(R(d));return u&&N[u]?N[u]():N};return $.classes=function(d){if(d!=null){if(_(d)==="array")l=d,a=[d[0],d[d.length-1]];else{const N=P.analyze(a);d===0?l=[N.min,N.max]:l=P.limits(N,"e",d)}return $}return l},$.domain=function(d){if(!arguments.length)return o;o=d.slice(0),h=d[0],f=d[d.length-1],s=[];const N=c.length;if(d.length===N&&h!==f)for(let A of Array.from(d))s.push((A-h)/(f-h));else{for(let A=0;A<N;A++)s.push(A/(N-1));if(d.length>2){const A=d.map((k,y)=>y/(d.length-1)),x=d.map(k=>(k-h)/(f-h));x.every((k,y)=>A[y]===k)||(I=k=>{if(k<=0||k>=1)return k;let y=0;for(;k>=x[y+1];)y++;const G=(k-x[y])/(x[y+1]-x[y]);return A[y]+G*(A[y+1]-A[y])})}}return a=[h,f],$},$.mode=function(d){return arguments.length?(e=d,S(),$):e},$.range=function(d,N){return M(d),$},$.out=function(d){return u=d,$},$.spread=function(d){return arguments.length?(r=d,$):r},$.correctLightness=function(d){return d==null&&(d=!0),p=d,S(),p?D=function(N){const A=R(0,!0).lab()[0],x=R(1,!0).lab()[0],k=A>x;let y=R(N,!0).lab()[0];const G=A+(x-A)*N;let T=y-G,tt=0,et=1,dt=20;for(;Math.abs(T)>.01&&dt-- >0;)(function(){return k&&(T*=-1),T<0?(tt=N,N+=(et-N)*.5):(et=N,N+=(tt-N)*.5),y=R(N,!0).lab()[0],T=y-G})();return N}:D=N=>N,$},$.padding=function(d){return d!=null?(_(d)==="number"&&(d=[d,d]),i=d,$):i},$.colors=function(d,N){arguments.length<2&&(N="hex");let A=[];if(arguments.length===0)A=c.slice(0);else if(d===1)A=[$(.5)];else if(d>1){const x=a[0],k=a[1]-x;A=ja(0,d).map(y=>$(x+y/(d-1)*k))}else{t=[];let x=[];if(l&&l.length>2)for(let k=1,y=l.length,G=1<=y;G?k<y:k>y;G?k++:k--)x.push((l[k-1]+l[k])*.5);else x=a;A=x.map(k=>$(k))}return P[N]&&(A=A.map(x=>x[N]())),A},$.cache=function(d){return d!=null?(w=d,$):w},$.gamma=function(d){return d!=null?(g=d,$):g},$.nodata=function(d){return d!=null?(n=P(d),$):n},$}function ja(t,e,n){let r=[],a=t<e,o=e;for(let s=t;a?s<o:s>o;a?s++:s--)r.push(s);return r}const za=function(t){let e=[1,1];for(let n=1;n<t;n++){let r=[1];for(let a=1;a<=e.length;a++)r[a]=(e[a]||0)+e[a-1];e=r}return e},Fa=function(t){let e,n,r,a;if(t=t.map(o=>new b(o)),t.length===2)[n,r]=t.map(o=>o.lab()),e=function(o){const s=[0,1,2].map(i=>n[i]+o*(r[i]-n[i]));return new b(s,"lab")};else if(t.length===3)[n,r,a]=t.map(o=>o.lab()),e=function(o){const s=[0,1,2].map(i=>(1-o)*(1-o)*n[i]+2*(1-o)*o*r[i]+o*o*a[i]);return new b(s,"lab")};else if(t.length===4){let o;[n,r,a,o]=t.map(s=>s.lab()),e=function(s){const i=[0,1,2].map(l=>(1-s)*(1-s)*(1-s)*n[l]+3*(1-s)*(1-s)*s*r[l]+3*(1-s)*s*s*a[l]+s*s*s*o[l]);return new b(i,"lab")}}else if(t.length>=5){let o,s,i;o=t.map(l=>l.lab()),i=t.length-1,s=za(i),e=function(l){const c=1-l,u=[0,1,2].map(h=>o.reduce((f,p,v)=>f+s[v]*c**(i-v)*l**v*p[h],0));return new b(u,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},Ya=t=>{const e=Fa(t);return e.scale=()=>Xt(e),e},{round:wn}=Math;b.prototype.rgb=function(t=!0){return t===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(wn)},b.prototype.rgba=function(t=!0){return this._rgb.slice(0,4).map((e,n)=>n<3?t===!1?e:wn(e):e)},Object.assign(P,{rgb:(...t)=>new b(...t,"rgb")}),O.format.rgb=(...t)=>{const e=E(t,"rgba");return e[3]===void 0&&(e[3]=1),e},O.autodetect.push({p:3,test:(...t)=>{if(t=E(t,"rgba"),_(t)==="array"&&(t.length===3||t.length===4&&_(t[3])=="number"&&t[3]>=0&&t[3]<=1))return"rgb"}});const W=(t,e,n)=>{if(!W[n])throw new Error("unknown blend mode "+n);return W[n](t,e)},bt=t=>(e,n)=>{const r=P(n).rgb(),a=P(e).rgb();return P.rgb(t(r,a))},mt=t=>(e,n)=>{const r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r},Za=t=>t,Xa=(t,e)=>t*e/255,Ua=(t,e)=>t>e?e:t,Wa=(t,e)=>t>e?t:e,Ja=(t,e)=>255*(1-(1-t/255)*(1-e/255)),Va=(t,e)=>e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255)),Qa=(t,e)=>255*(1-(1-e/255)/(t/255)),Ta=(t,e)=>t===255?255:(t=255*(e/255)/(1-t/255),t>255?255:t);W.normal=bt(mt(Za)),W.multiply=bt(mt(Xa)),W.screen=bt(mt(Ja)),W.overlay=bt(mt(Va)),W.darken=bt(mt(Ua)),W.lighten=bt(mt(Wa)),W.dodge=bt(mt(Ta)),W.burn=bt(mt(Qa));const{pow:t0,sin:e0,cos:n0}=Math;function r0(t=300,e=-1.5,n=1,r=1,a=[0,1]){let o=0,s;_(a)==="array"?s=a[1]-a[0]:(s=0,a=[a,a]);const i=function(l){const c=st*((t+120)/360+e*l),u=t0(a[0]+s*l,r),h=(o!==0?n[0]+l*o:n)*u*(1-u)/2,f=n0(c),p=e0(c),v=u+h*(-.14861*f+1.78277*p),w=u+h*(-.29227*f-.90649*p),g=u+h*(1.97294*f);return P(fe([v*255,w*255,g*255,1]))};return i.start=function(l){return l==null?t:(t=l,i)},i.rotations=function(l){return l==null?e:(e=l,i)},i.gamma=function(l){return l==null?r:(r=l,i)},i.hue=function(l){return l==null?n:(n=l,_(n)==="array"?(o=n[1]-n[0],o===0&&(n=n[1])):o=0,i)},i.lightness=function(l){return l==null?a:(_(l)==="array"?(a=l,s=l[1]-l[0]):(a=[l,l],s=0),i)},i.scale=()=>P.scale(i),i.hue(n),i}const a0="0123456789abcdef",{floor:o0,random:s0}=Math,i0=(t=s0)=>{let e="#";for(let n=0;n<6;n++)e+=a0.charAt(o0(t()*16));return new b(e,"hex")},{log:yn,pow:l0,floor:c0,abs:u0}=Math;function kn(t,e=null){const n={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return _(t)==="object"&&(t=Object.values(t)),t.forEach(r=>{e&&_(r)==="object"&&(r=r[e]),r!=null&&!isNaN(r)&&(n.values.push(r),n.sum+=r,r<n.min&&(n.min=r),r>n.max&&(n.max=r),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(r,a)=>Nn(n,r,a),n}function Nn(t,e="equal",n=7){_(t)=="array"&&(t=kn(t));const{min:r,max:a}=t,o=t.values.sort((i,l)=>i-l);if(n===1)return[r,a];const s=[];if(e.substr(0,1)==="c"&&(s.push(r),s.push(a)),e.substr(0,1)==="e"){s.push(r);for(let i=1;i<n;i++)s.push(r+i/n*(a-r));s.push(a)}else if(e.substr(0,1)==="l"){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const i=Math.LOG10E*yn(r),l=Math.LOG10E*yn(a);s.push(r);for(let c=1;c<n;c++)s.push(l0(10,i+c/n*(l-i)));s.push(a)}else if(e.substr(0,1)==="q"){s.push(r);for(let i=1;i<n;i++){const l=(o.length-1)*i/n,c=c0(l);if(c===l)s.push(o[c]);else{const u=l-c;s.push(o[c]*(1-u)+o[c+1]*u)}}s.push(a)}else if(e.substr(0,1)==="k"){let i;const l=o.length,c=new Array(l),u=new Array(n);let h=!0,f=0,p=null;p=[],p.push(r);for(let g=1;g<n;g++)p.push(r+g/n*(a-r));for(p.push(a);h;){for(let M=0;M<n;M++)u[M]=0;for(let M=0;M<l;M++){const L=o[M];let D=Number.MAX_VALUE,I;for(let R=0;R<n;R++){const S=u0(p[R]-L);S<D&&(D=S,I=R),u[I]++,c[M]=I}}const g=new Array(n);for(let M=0;M<n;M++)g[M]=null;for(let M=0;M<l;M++)i=c[M],g[i]===null?g[i]=o[M]:g[i]+=o[M];for(let M=0;M<n;M++)g[M]*=1/u[M];h=!1;for(let M=0;M<n;M++)if(g[M]!==p[M]){h=!0;break}p=g,f++,f>200&&(h=!1)}const v={};for(let g=0;g<n;g++)v[g]=[];for(let g=0;g<l;g++)i=c[g],v[i].push(o[g]);let w=[];for(let g=0;g<n;g++)w.push(v[g][0]),w.push(v[g][v[g].length-1]);w=w.sort((g,M)=>g-M),s.push(w[0]);for(let g=1;g<w.length;g+=2){const M=w[g];!isNaN(M)&&s.indexOf(M)===-1&&s.push(M)}}return s}const h0=(t,e)=>{t=new b(t),e=new b(e);const n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},xn=.027,f0=5e-4,d0=.1,An=1.14,Ut=.022,Cn=1.414,p0=(t,e)=>{t=new b(t),e=new b(e),t.alpha()<1&&(t=Ot(e,t,t.alpha(),"rgb"));const n=On(...t.rgb()),r=On(...e.rgb()),a=n>=Ut?n:n+Math.pow(Ut-n,Cn),o=r>=Ut?r:r+Math.pow(Ut-r,Cn),s=Math.pow(o,.56)-Math.pow(a,.57),i=Math.pow(o,.65)-Math.pow(a,.62),l=Math.abs(o-a)<f0?0:a<o?s*An:i*An;return(Math.abs(l)<d0?0:l>0?l-xn:l+xn)*100};function On(t,e,n){return .2126729*Math.pow(t/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(n/255,2.4)}const{sqrt:lt,pow:q,min:b0,max:m0,atan2:En,abs:$n,cos:Wt,sin:_n,exp:g0,PI:Pn}=Math;function v0(t,e,n=1,r=1,a=1){var o=function(xt){return 360*xt/(2*Pn)},s=function(xt){return 2*Pn*xt/360};t=new b(t),e=new b(e);const[i,l,c]=Array.from(t.lab()),[u,h,f]=Array.from(e.lab()),p=(i+u)/2,v=lt(q(l,2)+q(c,2)),w=lt(q(h,2)+q(f,2)),g=(v+w)/2,M=.5*(1-lt(q(g,7)/(q(g,7)+q(25,7)))),L=l*(1+M),D=h*(1+M),I=lt(q(L,2)+q(c,2)),R=lt(q(D,2)+q(f,2)),S=(I+R)/2,$=o(En(c,L)),d=o(En(f,D)),N=$>=0?$:$+360,A=d>=0?d:d+360,x=$n(N-A)>180?(N+A+360)/2:(N+A)/2,k=1-.17*Wt(s(x-30))+.24*Wt(s(2*x))+.32*Wt(s(3*x+6))-.2*Wt(s(4*x-63));let y=A-N;y=$n(y)<=180?y:A<=N?y+360:y-360,y=2*lt(I*R)*_n(s(y)/2);const G=u-i,T=R-I,tt=1+.015*q(p-50,2)/lt(20+q(p-50,2)),et=1+.045*S,dt=1+.015*S*k,pt=30*g0(-q((x-275)/25,2)),wt=-(2*lt(q(S,7)/(q(S,7)+q(25,7))))*_n(2*s(pt)),he=lt(q(G/(n*tt),2)+q(T/(r*et),2)+q(y/(a*dt),2)+wt*(T/(r*et))*(y/(a*dt)));return m0(0,b0(100,he))}function M0(t,e,n="lab"){t=new b(t),e=new b(e);const r=t.get(n),a=e.get(n);let o=0;for(let s in r){const i=(r[s]||0)-(a[s]||0);o+=i*i}return Math.sqrt(o)}const w0=(...t)=>{try{return new b(...t),!0}catch{return!1}},y0={cool(){return Xt([P.hsl(180,1,.9),P.hsl(250,.7,.4)])},hot(){return Xt(["#000","#f00","#ff0","#fff"]).mode("rgb")}},$e={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Ln=Object.keys($e),Dn=new Map(Ln.map(t=>[t.toLowerCase(),t])),k0=typeof Proxy=="function"?new Proxy($e,{get(t,e){const n=e.toLowerCase();if(Dn.has(n))return t[Dn.get(n)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(Ln)}}):$e,N0=(...t)=>{t=E(t,"cmyk");const[e,n,r,a]=t,o=t.length>4?t[4]:1;return a===1?[0,0,0,o]:[e>=1?0:255*(1-e)*(1-a),n>=1?0:255*(1-n)*(1-a),r>=1?0:255*(1-r)*(1-a),o]},{max:In}=Math,x0=(...t)=>{let[e,n,r]=E(t,"rgb");e=e/255,n=n/255,r=r/255;const a=1-In(e,In(n,r)),o=a<1?1/(1-a):0,s=(1-e-a)*o,i=(1-n-a)*o,l=(1-r-a)*o;return[s,i,l,a]};b.prototype.cmyk=function(){return x0(this._rgb)},Object.assign(P,{cmyk:(...t)=>new b(...t,"cmyk")}),O.format.cmyk=N0,O.autodetect.push({p:2,test:(...t)=>{if(t=E(t,"cmyk"),_(t)==="array"&&t.length===4)return"cmyk"}});const A0=(...t)=>{const e=E(t,"hsla");let n=At(t)||"lsa";return e[0]=X(e[0]||0)+"deg",e[1]=X(e[1]*100)+"%",e[2]=X(e[2]*100)+"%",n==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),n="hsla"):e.length=3,`${n.substr(0,3)}(${e.join(" ")})`},C0=(...t)=>{const e=E(t,"lab");let n=At(t)||"lab";return e[0]=X(e[0])+"%",e[1]=X(e[1]),e[2]=X(e[2]),n==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},O0=(...t)=>{const e=E(t,"lch");let n=At(t)||"lab";return e[0]=X(e[0])+"%",e[1]=X(e[1]),e[2]=isNaN(e[2])?"none":X(e[2])+"deg",n==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},E0=(...t)=>{const e=E(t,"lab");return e[0]=X(e[0]*100)+"%",e[1]=de(e[1]),e[2]=de(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},Rn=(...t)=>{const[e,n,r,...a]=E(t,"rgb"),[o,s,i]=Ae(e,n,r),[l,c,u]=bn(o,s,i);return[l,c,u,...a.length>0&&a[0]<1?[a[0]]:[]]},$0=(...t)=>{const e=E(t,"lch");return e[0]=X(e[0]*100)+"%",e[1]=de(e[1]),e[2]=isNaN(e[2])?"none":X(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:_e}=Math,_0=(...t)=>{const e=E(t,"rgba");let n=At(t)||"rgb";if(n.substr(0,3)==="hsl")return A0(gn(e),n);if(n.substr(0,3)==="lab"){const r=qt();it("d50");const a=C0(ge(e),n);return it(r),a}if(n.substr(0,3)==="lch"){const r=qt();it("d50");const a=O0(ye(e),n);return it(r),a}return n.substr(0,5)==="oklab"?E0(Ae(e)):n.substr(0,5)==="oklch"?$0(Rn(e)):(e[0]=_e(e[0]),e[1]=_e(e[1]),e[2]=_e(e[2]),(n==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),n="rgba"),`${n.substr(0,3)}(${e.slice(0,n==="rgb"?3:4).join(" ")})`)},Sn=(...t)=>{t=E(t,"lch");const[e,n,r,...a]=t,[o,s,i]=pn(e,n,r),[l,c,u]=xe(o,s,i);return[l,c,u,...a.length>0&&a[0]<1?[a[0]]:[]]},ct=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,J=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Jt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,U=/\s*/.source,Pt=/\s+/.source,Pe=/\s*,\s*/.source,Vt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,Lt=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,Gn=new RegExp("^rgba?\\("+U+[ct,ct,ct].join(Pt)+Lt+"\\)$"),qn=new RegExp("^rgb\\("+U+[ct,ct,ct].join(Pe)+U+"\\)$"),Hn=new RegExp("^rgba\\("+U+[ct,ct,ct,J].join(Pe)+U+"\\)$"),Bn=new RegExp("^hsla?\\("+U+[Vt,Jt,Jt].join(Pt)+Lt+"\\)$"),Kn=new RegExp("^hsl?\\("+U+[Vt,Jt,Jt].join(Pe)+U+"\\)$"),jn=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,zn=new RegExp("^lab\\("+U+[J,J,J].join(Pt)+Lt+"\\)$"),Fn=new RegExp("^lch\\("+U+[J,J,Vt].join(Pt)+Lt+"\\)$"),Yn=new RegExp("^oklab\\("+U+[J,J,J].join(Pt)+Lt+"\\)$"),Zn=new RegExp("^oklch\\("+U+[J,J,Vt].join(Pt)+Lt+"\\)$"),{round:Xn}=Math,Dt=t=>t.map((e,n)=>n<=2?yt(Xn(e),0,255):e),H=(t,e=0,n=100,r=!1)=>(typeof t=="string"&&t.endsWith("%")&&(t=parseFloat(t.substring(0,t.length-1))/100,r?t=e+(t+1)*.5*(n-e):t=e+t*(n-e)),+t),z=(t,e)=>t==="none"?e:t,Le=t=>{if(t=t.toLowerCase().trim(),t==="transparent")return[0,0,0,0];let e;if(O.format.named)try{return O.format.named(t)}catch{}if((e=t.match(Gn))||(e=t.match(qn))){let n=e.slice(1,4);for(let a=0;a<3;a++)n[a]=+H(z(n[a],0),0,255);n=Dt(n);const r=e[4]!==void 0?+H(e[4],0,1):1;return n[3]=r,n}if(e=t.match(Hn)){const n=e.slice(1,5);for(let r=0;r<4;r++)n[r]=+H(n[r],0,255);return n}if((e=t.match(Bn))||(e=t.match(Kn))){const n=e.slice(1,4);n[0]=+z(n[0].replace("deg",""),0),n[1]=+H(z(n[1],0),0,100)*.01,n[2]=+H(z(n[2],0),0,100)*.01;const r=Dt(Ne(n)),a=e[4]!==void 0?+H(e[4],0,1):1;return r[3]=a,r}if(e=t.match(jn)){const n=e.slice(1,4);n[1]*=.01,n[2]*=.01;const r=Ne(n);for(let a=0;a<3;a++)r[a]=Xn(r[a]);return r[3]=+e[4],r}if(e=t.match(zn)){const n=e.slice(1,4);n[0]=H(z(n[0],0),0,100),n[1]=H(z(n[1],0),-125,125,!0),n[2]=H(z(n[2],0),-125,125,!0);const r=qt();it("d50");const a=Dt(be(n));it(r);const o=e[4]!==void 0?+H(e[4],0,1):1;return a[3]=o,a}if(e=t.match(Fn)){const n=e.slice(1,4);n[0]=H(n[0],0,100),n[1]=H(z(n[1],0),0,150,!1),n[2]=+z(n[2].replace("deg",""),0);const r=qt();it("d50");const a=Dt(we(n));it(r);const o=e[4]!==void 0?+H(e[4],0,1):1;return a[3]=o,a}if(e=t.match(Yn)){const n=e.slice(1,4);n[0]=H(z(n[0],0),0,1),n[1]=H(z(n[1],0),-.4,.4,!0),n[2]=H(z(n[2],0),-.4,.4,!0);const r=Dt(xe(n)),a=e[4]!==void 0?+H(e[4],0,1):1;return r[3]=a,r}if(e=t.match(Zn)){const n=e.slice(1,4);n[0]=H(z(n[0],0),0,1),n[1]=H(z(n[1],0),0,.4,!1),n[2]=+z(n[2].replace("deg",""),0);const r=Dt(Sn(n)),a=e[4]!==void 0?+H(e[4],0,1):1;return r[3]=a,r}};Le.test=t=>Gn.test(t)||Bn.test(t)||zn.test(t)||Fn.test(t)||Yn.test(t)||Zn.test(t)||qn.test(t)||Hn.test(t)||Kn.test(t)||jn.test(t)||t==="transparent",b.prototype.css=function(t){return _0(this._rgb,t)};const P0=(...t)=>new b(...t,"css");P.css=P0,O.format.css=Le,O.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&_(t)==="string"&&Le.test(t))return"css"}}),O.format.gl=(...t)=>{const e=E(t,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const L0=(...t)=>new b(...t,"gl");P.gl=L0,b.prototype.gl=function(){const t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]},b.prototype.hex=function(t){return hn(this._rgb,t)};const D0=(...t)=>new b(...t,"hex");P.hex=D0,O.format.hex=un,O.autodetect.push({p:4,test:(t,...e)=>{if(!e.length&&_(t)==="string"&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});const{log:Qt}=Math,Un=t=>{const e=t/100;let n,r,a;return e<66?(n=255,r=e<6?0:-155.25485562709179-.44596950469579133*(r=e-2)+104.49216199393888*Qt(r),a=e<20?0:-254.76935184120902+.8274096064007395*(a=e-10)+115.67994401066147*Qt(a)):(n=351.97690566805693+.114206453784165*(n=e-55)-40.25366309332127*Qt(n),r=325.4494125711974+.07943456536662342*(r=e-50)-28.0852963507957*Qt(r),a=255),[n,r,a,1]},{round:I0}=Math,R0=(...t)=>{const e=E(t,"rgb"),n=e[0],r=e[2];let a=1e3,o=4e4;const s=.4;let i;for(;o-a>s;){i=(o+a)*.5;const l=Un(i);l[2]/l[0]>=r/n?o=i:a=i}return I0(i)};b.prototype.temp=b.prototype.kelvin=b.prototype.temperature=function(){return R0(this._rgb)};const De=(...t)=>new b(...t,"temp");Object.assign(P,{temp:De,kelvin:De,temperature:De}),O.format.temp=O.format.kelvin=O.format.temperature=Un,b.prototype.oklch=function(){return Rn(this._rgb)},Object.assign(P,{oklch:(...t)=>new b(...t,"oklch")}),O.format.oklch=Sn,O.autodetect.push({p:2,test:(...t)=>{if(t=E(t,"oklch"),_(t)==="array"&&t.length===3)return"oklch"}}),Object.assign(P,{analyze:kn,average:Ha,bezier:Ya,blend:W,brewer:k0,Color:b,colors:Ct,contrast:h0,contrastAPCA:p0,cubehelix:r0,deltaE:v0,distance:M0,input:O,interpolate:Ot,limits:Nn,mix:Ot,random:i0,scale:Xt,scales:y0,valid:w0});const Wn=(t,e)=>{if(typeof t=="number"){if(e===3)return{mode:"rgb",r:(t>>8&15|t>>4&240)/255,g:(t>>4&15|t&240)/255,b:(t&15|t<<4&240)/255};if(e===4)return{mode:"rgb",r:(t>>12&15|t>>8&240)/255,g:(t>>8&15|t>>4&240)/255,b:(t>>4&15|t&240)/255,alpha:(t&15|t<<4&240)/255};if(e===6)return{mode:"rgb",r:(t>>16&255)/255,g:(t>>8&255)/255,b:(t&255)/255};if(e===8)return{mode:"rgb",r:(t>>24&255)/255,g:(t>>16&255)/255,b:(t>>8&255)/255,alpha:(t&255)/255}}},S0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},G0=t=>Wn(S0[t.toLowerCase()],6),q0=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,H0=t=>{let e;return(e=t.match(q0))?Wn(parseInt(e[1],16),e[1].length):void 0},gt="([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)",Ht=`${gt}%`,Ie=`(?:${gt}%|${gt})`,B0=`(?:${gt}(deg|grad|rad|turn)|${gt})`,It="\\s*,\\s*",K0=new RegExp(`^rgba?\\(\\s*${gt}${It}${gt}${It}${gt}\\s*(?:,\\s*${Ie}\\s*)?\\)$`),j0=new RegExp(`^rgba?\\(\\s*${Ht}${It}${Ht}${It}${Ht}\\s*(?:,\\s*${Ie}\\s*)?\\)$`),z0=t=>{let e={mode:"rgb"},n;if(n=t.match(K0))n[1]!==void 0&&(e.r=n[1]/255),n[2]!==void 0&&(e.g=n[2]/255),n[3]!==void 0&&(e.b=n[3]/255);else if(n=t.match(j0))n[1]!==void 0&&(e.r=n[1]/100),n[2]!==void 0&&(e.g=n[2]/100),n[3]!==void 0&&(e.b=n[3]/100);else return;return n[4]!==void 0?e.alpha=Math.max(0,Math.min(1,n[4]/100)):n[5]!==void 0&&(e.alpha=Math.max(0,Math.min(1,+n[5]))),e},F0=(t,e)=>t===void 0?void 0:typeof t!="object"?eo(t):t.mode!==void 0?t:e?{...t,mode:e}:void 0,Y0=(t="rgb")=>e=>(e=F0(e,t))!==void 0?e.mode===t?e:rt[e.mode][t]?rt[e.mode][t](e):t==="rgb"?rt[e.mode].rgb(e):rt.rgb[t](rt[e.mode].rgb(e)):void 0,rt={},Jn={},Tt=[],Vn={},Z0=t=>t,ut=t=>(rt[t.mode]={...rt[t.mode],...t.toMode},Object.keys(t.fromMode||{}).forEach(e=>{rt[e]||(rt[e]={}),rt[e][t.mode]=t.fromMode[e]}),t.ranges||(t.ranges={}),t.difference||(t.difference={}),t.channels.forEach(e=>{if(t.ranges[e]===void 0&&(t.ranges[e]=[0,1]),!t.interpolate[e])throw new Error(`Missing interpolator for: ${e}`);typeof t.interpolate[e]=="function"&&(t.interpolate[e]={use:t.interpolate[e]}),t.interpolate[e].fixup||(t.interpolate[e].fixup=Z0)}),Jn[t.mode]=t,(t.parse||[]).forEach(e=>{U0(e,t.mode)}),Y0(t.mode)),X0=t=>Jn[t],U0=(t,e)=>{if(typeof t=="string"){if(!e)throw new Error("'mode' required when 'parser' is a string");Vn[t]=e}else typeof t=="function"&&Tt.indexOf(t)<0&&Tt.push(t)},Re=/[^\x00-\x7F]|[a-zA-Z_]/,W0=/[^\x00-\x7F]|[-\w]/,m={Function:"function",Ident:"ident",Number:"number",Percentage:"percentage",ParenClose:")",None:"none",Hue:"hue",Alpha:"alpha"};let C=0;function te(t){let e=t[C],n=t[C+1];return e==="-"||e==="+"?/\d/.test(n)||n==="."&&/\d/.test(t[C+2]):e==="."?/\d/.test(n):/\d/.test(e)}function Se(t){if(C>=t.length)return!1;let e=t[C];if(Re.test(e))return!0;if(e==="-"){if(t.length-C<2)return!1;let n=t[C+1];return!!(n==="-"||Re.test(n))}return!1}const J0={deg:1,rad:180/Math.PI,grad:9/10,turn:360};function Bt(t){let e="";if((t[C]==="-"||t[C]==="+")&&(e+=t[C++]),e+=ee(t),t[C]==="."&&/\d/.test(t[C+1])&&(e+=t[C++]+ee(t)),(t[C]==="e"||t[C]==="E")&&((t[C+1]==="-"||t[C+1]==="+")&&/\d/.test(t[C+2])?e+=t[C++]+t[C++]+ee(t):/\d/.test(t[C+1])&&(e+=t[C++]+ee(t))),Se(t)){let n=ne(t);return n==="deg"||n==="rad"||n==="turn"||n==="grad"?{type:m.Hue,value:e*J0[n]}:void 0}return t[C]==="%"?(C++,{type:m.Percentage,value:+e}):{type:m.Number,value:+e}}function ee(t){let e="";for(;/\d/.test(t[C]);)e+=t[C++];return e}function ne(t){let e="";for(;C<t.length&&W0.test(t[C]);)e+=t[C++];return e}function V0(t){let e=ne(t);return t[C]==="("?(C++,{type:m.Function,value:e}):e==="none"?{type:m.None,value:void 0}:{type:m.Ident,value:e}}function Q0(t=""){let e=t.trim(),n=[],r;for(C=0;C<e.length;){if(r=e[C++],r===`
`||r==="	"||r===" "){for(;C<e.length&&(e[C]===`
`||e[C]==="	"||e[C]===" ");)C++;continue}if(r===",")return;if(r===")"){n.push({type:m.ParenClose});continue}if(r==="+"){if(C--,te(e)){n.push(Bt(e));continue}return}if(r==="-"){if(C--,te(e)){n.push(Bt(e));continue}if(Se(e)){n.push({type:m.Ident,value:ne(e)});continue}return}if(r==="."){if(C--,te(e)){n.push(Bt(e));continue}return}if(r==="/"){for(;C<e.length&&(e[C]===`
`||e[C]==="	"||e[C]===" ");)C++;let a;if(te(e)&&(a=Bt(e),a.type!==m.Hue)){n.push({type:m.Alpha,value:a});continue}if(Se(e)&&ne(e)==="none"){n.push({type:m.Alpha,value:{type:m.None,value:void 0}});continue}return}if(/\d/.test(r)){C--,n.push(Bt(e));continue}if(Re.test(r)){C--,n.push(V0(e));continue}return}return n}function T0(t){t._i=0;let e=t[t._i++];if(!e||e.type!==m.Function||e.value!=="color"||(e=t[t._i++],e.type!==m.Ident))return;const n=Vn[e.value];if(!n)return;const r={mode:n},a=Qn(t,!1);if(!a)return;const o=X0(n).channels;for(let s=0,i,l;s<o.length;s++)i=a[s],l=o[s],i.type!==m.None&&(r[l]=i.type===m.Number?i.value:i.value/100,l==="alpha"&&(r[l]=Math.max(0,Math.min(1,r[l]))));return r}function Qn(t,e){const n=[];let r;for(;t._i<t.length;){if(r=t[t._i++],r.type===m.None||r.type===m.Number||r.type===m.Alpha||r.type===m.Percentage||e&&r.type===m.Hue){n.push(r);continue}if(r.type===m.ParenClose){if(t._i<t.length)return;continue}return}if(!(n.length<3||n.length>4)){if(n.length===4){if(n[3].type!==m.Alpha)return;n[3]=n[3].value}return n.length===3&&n.push({type:m.None,value:void 0}),n.every(a=>a.type!==m.Alpha)?n:void 0}}function to(t,e){t._i=0;let n=t[t._i++];if(!n||n.type!==m.Function)return;let r=Qn(t,e);if(r)return r.unshift(n.value),r}const eo=t=>{if(typeof t!="string")return;const e=Q0(t),n=e?to(e,!0):void 0;let r,a=0,o=Tt.length;for(;a<o;)if((r=Tt[a++](t,n))!==void 0)return r;return e?T0(e):void 0};function no(t,e){if(!e||e[0]!=="rgb"&&e[0]!=="rgba")return;const n={mode:"rgb"},[,r,a,o,s]=e;if(!(r.type===m.Hue||a.type===m.Hue||o.type===m.Hue))return r.type!==m.None&&(n.r=r.type===m.Number?r.value/255:r.value/100),a.type!==m.None&&(n.g=a.type===m.Number?a.value/255:a.value/100),o.type!==m.None&&(n.b=o.type===m.Number?o.value/255:o.value/100),s.type!==m.None&&(n.alpha=Math.min(1,Math.max(0,s.type===m.Number?s.value:s.value/100))),n}const ro=t=>t==="transparent"?{mode:"rgb",r:0,g:0,b:0,alpha:0}:void 0,ao=(t,e,n)=>t+n*(e-t),oo=t=>{let e=[];for(let n=0;n<t.length-1;n++){let r=t[n],a=t[n+1];r===void 0&&a===void 0?e.push(void 0):r!==void 0&&a!==void 0?e.push([r,a]):e.push(r!==void 0?[r,r]:[a,a])}return e},so=t=>e=>{let n=oo(e);return r=>{let a=r*n.length,o=r>=1?n.length-1:Math.max(Math.floor(a),0),s=n[o];return s===void 0?void 0:t(s[0],s[1],a-o)}},B=so(ao),Kt=t=>{let e=!1,n=t.map(r=>r!==void 0?(e=!0,r):1);return e?n:t},io={mode:"rgb",channels:["r","g","b","alpha"],parse:[no,H0,z0,G0,ro,"srgb"],serialize:"srgb",interpolate:{r:B,g:B,b:B,alpha:{use:B,fixup:Kt}},gamut:!0,white:{r:1,g:1,b:1},black:{r:0,g:0,b:0}},Ge=(t=0)=>{const e=Math.abs(t);return e<=.04045?t/12.92:(Math.sign(t)||1)*Math.pow((e+.055)/1.055,2.4)},Tn=({r:t,g:e,b:n,alpha:r})=>{let a={mode:"lrgb",r:Ge(t),g:Ge(e),b:Ge(n)};return r!==void 0&&(a.alpha=r),a},qe=(t=0)=>{const e=Math.abs(t);return e>.0031308?(Math.sign(t)||1)*(1.055*Math.pow(e,1/2.4)-.055):t*12.92},tr=({r:t,g:e,b:n,alpha:r},a="rgb")=>{let o={mode:a,r:qe(t),g:qe(e),b:qe(n)};return r!==void 0&&(o.alpha=r),o},V=t=>(t=t%360)<0?t+360:t,lo=(t,e)=>t.map((n,r,a)=>{if(n===void 0)return n;let o=V(n);return r===0||t[r-1]===void 0?o:e(o-V(a[r-1]))}).reduce((n,r)=>!n.length||r===void 0||n[n.length-1]===void 0?(n.push(r),n):(n.push(r+n[n.length-1]),n),[]),He=t=>lo(t,e=>Math.abs(e)<=180?e:e-360*Math.sign(e)),er=(t,e)=>{if(t.h===void 0||e.h===void 0||!t.s||!e.s)return 0;let n=V(t.h),r=V(e.h),a=Math.sin((r-n+360)/2*Math.PI/180);return 2*Math.sqrt(t.s*e.s)*a},co=(t,e)=>{if(t.h===void 0||e.h===void 0||!t.c||!e.c)return 0;let n=V(t.h),r=V(e.h),a=Math.sin((r-n+360)/2*Math.PI/180);return 2*Math.sqrt(t.c*e.c)*a},Be=t=>{let e=t.reduce((r,a)=>{if(a!==void 0){let o=a*Math.PI/180;r.sin+=Math.sin(o),r.cos+=Math.cos(o)}return r},{sin:0,cos:0}),n=Math.atan2(e.sin,e.cos)*180/Math.PI;return n<0?360+n:n},re=({l:t,a:e,b:n,alpha:r},a="lch")=>{e===void 0&&(e=0),n===void 0&&(n=0);let o=Math.sqrt(e*e+n*n),s={mode:a,l:t,c:o};return o&&(s.h=V(Math.atan2(n,e)*180/Math.PI)),r!==void 0&&(s.alpha=r),s},ae=({l:t,c:e,h:n,alpha:r},a="lab")=>{n===void 0&&(n=0);let o={mode:a,l:t,a:e?e*Math.cos(n/180*Math.PI):0,b:e?e*Math.sin(n/180*Math.PI):0};return r!==void 0&&(o.alpha=r),o},Rt={X:.3457/.3585,Y:1,Z:(1-.3457-.3585)/.3585};function uo({h:t,s:e,l:n,alpha:r}){t=V(t!==void 0?t:0),e===void 0&&(e=0),n===void 0&&(n=0);let a=n+e*(n<.5?n:1-n),o=a-(a-n)*2*Math.abs(t/60%2-1),s;switch(Math.floor(t/60)){case 0:s={r:a,g:o,b:2*n-a};break;case 1:s={r:o,g:a,b:2*n-a};break;case 2:s={r:2*n-a,g:a,b:o};break;case 3:s={r:2*n-a,g:o,b:a};break;case 4:s={r:o,g:2*n-a,b:a};break;case 5:s={r:a,g:2*n-a,b:o};break;default:s={r:2*n-a,g:2*n-a,b:2*n-a}}return s.mode="rgb",r!==void 0&&(s.alpha=r),s}function ho({r:t,g:e,b:n,alpha:r}){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=Math.max(t,e,n),o=Math.min(t,e,n),s={mode:"hsl",s:a===o?0:(a-o)/(1-Math.abs(a+o-1)),l:.5*(a+o)};return a-o!==0&&(s.h=(a===t?(e-n)/(a-o)+(e<n)*6:a===e?(n-t)/(a-o)+2:(t-e)/(a-o)+4)*60),r!==void 0&&(s.alpha=r),s}const fo=(t,e)=>{switch(e){case"deg":return+t;case"rad":return t/Math.PI*180;case"grad":return t/10*9;case"turn":return t*360}},po=new RegExp(`^hsla?\\(\\s*${B0}${It}${Ht}${It}${Ht}\\s*(?:,\\s*${Ie}\\s*)?\\)$`),bo=t=>{let e=t.match(po);if(!e)return;let n={mode:"hsl"};return e[3]!==void 0?n.h=+e[3]:e[1]!==void 0&&e[2]!==void 0&&(n.h=fo(e[1],e[2])),e[4]!==void 0&&(n.s=Math.min(Math.max(0,e[4]/100),1)),e[5]!==void 0&&(n.l=Math.min(Math.max(0,e[5]/100),1)),e[6]!==void 0?n.alpha=Math.max(0,Math.min(1,e[6]/100)):e[7]!==void 0&&(n.alpha=Math.max(0,Math.min(1,+e[7]))),n};function mo(t,e){if(!e||e[0]!=="hsl"&&e[0]!=="hsla")return;const n={mode:"hsl"},[,r,a,o,s]=e;if(r.type!==m.None){if(r.type===m.Percentage)return;n.h=r.value}if(a.type!==m.None){if(a.type===m.Hue)return;n.s=a.value/100}if(o.type!==m.None){if(o.type===m.Hue)return;n.l=o.value/100}return s.type!==m.None&&(n.alpha=Math.min(1,Math.max(0,s.type===m.Number?s.value:s.value/100))),n}const nr={mode:"hsl",toMode:{rgb:uo},fromMode:{rgb:ho},channels:["h","s","l","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[mo,bo],serialize:t=>`hsl(${t.h!==void 0?t.h:"none"} ${t.s!==void 0?t.s*100+"%":"none"} ${t.l!==void 0?t.l*100+"%":"none"}${t.alpha<1?` / ${t.alpha}`:""})`,interpolate:{h:{use:B,fixup:He},s:B,l:B,alpha:{use:B,fixup:Kt}},difference:{h:er},average:{h:Be}};function go({h:t,s:e,v:n,alpha:r}){t=V(t!==void 0?t:0),e===void 0&&(e=0),n===void 0&&(n=0);let a=Math.abs(t/60%2-1),o;switch(Math.floor(t/60)){case 0:o={r:n,g:n*(1-e*a),b:n*(1-e)};break;case 1:o={r:n*(1-e*a),g:n,b:n*(1-e)};break;case 2:o={r:n*(1-e),g:n,b:n*(1-e*a)};break;case 3:o={r:n*(1-e),g:n*(1-e*a),b:n};break;case 4:o={r:n*(1-e*a),g:n*(1-e),b:n};break;case 5:o={r:n,g:n*(1-e),b:n*(1-e*a)};break;default:o={r:n*(1-e),g:n*(1-e),b:n*(1-e)}}return o.mode="rgb",r!==void 0&&(o.alpha=r),o}function vo({r:t,g:e,b:n,alpha:r}){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=Math.max(t,e,n),o=Math.min(t,e,n),s={mode:"hsv",s:a===0?0:1-o/a,v:a};return a-o!==0&&(s.h=(a===t?(e-n)/(a-o)+(e<n)*6:a===e?(n-t)/(a-o)+2:(t-e)/(a-o)+4)*60),r!==void 0&&(s.alpha=r),s}const rr={mode:"hsv",toMode:{rgb:go},parse:["--hsv"],serialize:"--hsv",fromMode:{rgb:vo},channels:["h","s","v","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:B,fixup:He},s:B,v:B,alpha:{use:B,fixup:Kt}},difference:{h:er},average:{h:Be}},ar=Math.pow(29,3)/Math.pow(3,3),or=Math.pow(6,3)/Math.pow(29,3);let Ke=t=>Math.pow(t,3)>or?Math.pow(t,3):(116*t-16)/ar;const sr=({l:t,a:e,b:n,alpha:r})=>{t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=(t+16)/116,o=e/500+a,s=a-n/200,i={mode:"xyz50",x:Ke(o)*Rt.X,y:Ke(a)*Rt.Y,z:Ke(s)*Rt.Z};return r!==void 0&&(i.alpha=r),i},Mo=({x:t,y:e,z:n,alpha:r})=>{t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=tr({r:t*3.1341359569958707-e*1.6173863321612538-.4906619460083532*n,g:t*-.978795502912089+e*1.916254567259524+.03344273116131949*n,b:t*.07195537988411677-e*.2289768264158322+1.405386058324125*n});return r!==void 0&&(a.alpha=r),a},ir=t=>Mo(sr(t)),wo=t=>{let{r:e,g:n,b:r,alpha:a}=Tn(t),o={mode:"xyz50",x:.436065742824811*e+.3851514688337912*n+.14307845442264197*r,y:.22249319175623702*e+.7168870538238823*n+.06061979053616537*r,z:.013923904500943465*e+.09708128566574634*n+.7140993584005155*r};return a!==void 0&&(o.alpha=a),o},je=t=>t>or?Math.cbrt(t):(ar*t+16)/116,lr=({x:t,y:e,z:n,alpha:r})=>{t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=je(t/Rt.X),o=je(e/Rt.Y),s=je(n/Rt.Z),i={mode:"lab",l:116*o-16,a:500*(a-o),b:200*(o-s)};return r!==void 0&&(i.alpha=r),i},cr=t=>{let e=lr(wo(t));return t.r===t.b&&t.b===t.g&&(e.a=e.b=0),e};function yo(t,e){if(!e||e[0]!=="lab")return;const n={mode:"lab"},[,r,a,o,s]=e;if(!(r.type===m.Hue||a.type===m.Hue||o.type===m.Hue))return r.type!==m.None&&(n.l=Math.min(Math.max(0,r.value),100)),a.type!==m.None&&(n.a=a.type===m.Number?a.value:a.value*125/100),o.type!==m.None&&(n.b=o.type===m.Number?o.value:o.value*125/100),s.type!==m.None&&(n.alpha=Math.min(1,Math.max(0,s.type===m.Number?s.value:s.value/100))),n}const ur={mode:"lab",toMode:{xyz50:sr,rgb:ir},fromMode:{xyz50:lr,rgb:cr},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-125,125],b:[-125,125]},parse:[yo],serialize:t=>`lab(${t.l!==void 0?t.l:"none"} ${t.a!==void 0?t.a:"none"} ${t.b!==void 0?t.b:"none"}${t.alpha<1?` / ${t.alpha}`:""})`,interpolate:{l:B,a:B,b:B,alpha:{use:B,fixup:Kt}}};function ko(t,e){if(!e||e[0]!=="lch")return;const n={mode:"lch"},[,r,a,o,s]=e;if(r.type!==m.None){if(r.type===m.Hue)return;n.l=Math.min(Math.max(0,r.value),100)}if(a.type!==m.None&&(n.c=Math.max(0,a.type===m.Number?a.value:a.value*150/100)),o.type!==m.None){if(o.type===m.Percentage)return;n.h=o.value}return s.type!==m.None&&(n.alpha=Math.min(1,Math.max(0,s.type===m.Number?s.value:s.value/100))),n}const hr={mode:"lch",toMode:{lab:ae,rgb:t=>ir(ae(t))},fromMode:{rgb:t=>re(cr(t)),lab:re},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,150],h:[0,360]},parse:[ko],serialize:t=>`lch(${t.l!==void 0?t.l:"none"} ${t.c!==void 0?t.c:"none"} ${t.h!==void 0?t.h:"none"}${t.alpha<1?` / ${t.alpha}`:""})`,interpolate:{h:{use:B,fixup:He},c:B,l:B,alpha:{use:B,fixup:Kt}},difference:{h:co},average:{h:Be}},fr=({r:t,g:e,b:n,alpha:r})=>{t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=Math.cbrt(.412221469470763*t+.5363325372617348*e+.0514459932675022*n),o=Math.cbrt(.2119034958178252*t+.6806995506452344*e+.1073969535369406*n),s=Math.cbrt(.0883024591900564*t+.2817188391361215*e+.6299787016738222*n),i={mode:"oklab",l:.210454268309314*a+.7936177747023054*o-.0040720430116193*s,a:1.9779985324311684*a-2.42859224204858*o+.450593709617411*s,b:.0259040424655478*a+.7827717124575296*o-.8086757549230774*s};return r!==void 0&&(i.alpha=r),i},oe=t=>{let e=fr(Tn(t));return t.r===t.b&&t.b===t.g&&(e.a=e.b=0),e},jt=({l:t,a:e,b:n,alpha:r})=>{t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0);let a=Math.pow(t+.3963377773761749*e+.2158037573099136*n,3),o=Math.pow(t-.1055613458156586*e-.0638541728258133*n,3),s=Math.pow(t-.0894841775298119*e-1.2914855480194092*n,3),i={mode:"lrgb",r:4.076741636075957*a-3.3077115392580616*o+.2309699031821044*s,g:-1.2684379732850317*a+2.6097573492876887*o-.3413193760026573*s,b:-.0041960761386756*a-.7034186179359362*o+1.7076146940746117*s};return r!==void 0&&(i.alpha=r),i},se=t=>tr(jt(t));function ze(t){const e=1.170873786407767;return .5*(e*t-.206+Math.sqrt((e*t-.206)*(e*t-.206)+4*.03*e*t))}function ie(t){return(t*t+.206*t)/(1.170873786407767*(t+.03))}function No(t,e){let n,r,a,o,s,i,l,c;-1.88170328*t-.80936493*e>1?(n=1.19086277,r=1.76576728,a=.59662641,o=.75515197,s=.56771245,i=4.0767416621,l=-3.3077115913,c=.2309699292):1.81444104*t-1.19445276*e>1?(n=.73956515,r=-.45954404,a=.08285427,o=.1254107,s=.14503204,i=-1.2684380046,l=2.6097574011,c=-.3413193965):(n=1.35733652,r=-.00915799,a=-1.1513021,o=-.50559606,s=.00692167,i=-.0041960863,l=-.7034186147,c=1.707614701);let u=n+r*t+a*e+o*t*t+s*t*e,h=.3963377774*t+.2158037573*e,f=-.1055613458*t-.0638541728*e,p=-.0894841775*t-1.291485548*e;{let v=1+u*h,w=1+u*f,g=1+u*p,M=v*v*v,L=w*w*w,D=g*g*g,I=3*h*v*v,R=3*f*w*w,S=3*p*g*g,$=6*h*h*v,d=6*f*f*w,N=6*p*p*g,A=i*M+l*L+c*D,x=i*I+l*R+c*S,k=i*$+l*d+c*N;u=u-A*x/(x*x-.5*A*k)}return u}function Fe(t,e){let n=No(t,e),r=jt({l:1,a:n*t,b:n*e}),a=Math.cbrt(1/Math.max(r.r,r.g,r.b)),o=a*n;return[a,o]}function xo(t,e,n,r,a,o=null){o||(o=Fe(t,e));let s;if((n-a)*o[1]-(o[0]-a)*r<=0)s=o[1]*a/(r*o[0]+o[1]*(a-n));else{s=o[1]*(a-1)/(r*(o[0]-1)+o[1]*(a-n));{let i=n-a,l=r,c=.3963377774*t+.2158037573*e,u=-.1055613458*t-.0638541728*e,h=-.0894841775*t-1.291485548*e,f=i+l*c,p=i+l*u,v=i+l*h;{let w=a*(1-s)+s*n,g=s*r,M=w+g*c,L=w+g*u,D=w+g*h,I=M*M*M,R=L*L*L,S=D*D*D,$=3*f*M*M,d=3*p*L*L,N=3*v*D*D,A=6*f*f*M,x=6*p*p*L,k=6*v*v*D,y=4.0767416621*I-3.3077115913*R+.2309699292*S-1,G=4.0767416621*$-3.3077115913*d+.2309699292*N,T=4.0767416621*A-3.3077115913*x+.2309699292*k,tt=G/(G*G-.5*y*T),et=-y*tt,dt=-1.2684380046*I+2.6097574011*R-.3413193965*S-1,pt=-1.2684380046*$+2.6097574011*d-.3413193965*N,wt=-1.2684380046*A+2.6097574011*x-.3413193965*k,he=pt/(pt*pt-.5*dt*wt),xt=-dt*he,Hr=-.0041960863*I-.7034186147*R+1.707614701*S-1,rn=-.0041960863*$-.7034186147*d+1.707614701*N,si=-.0041960863*A-.7034186147*x+1.707614701*k,Br=rn/(rn*rn-.5*Hr*si),an=-Hr*Br;et=tt>=0?et:1e6,xt=he>=0?xt:1e6,an=Br>=0?an:1e6,s+=Math.min(et,Math.min(xt,an))}}}return s}function Ye(t,e,n=null){n||(n=Fe(t,e));let r=n[0],a=n[1];return[a/r,a/(1-r)]}function dr(t,e,n){let r=Fe(e,n),a=xo(e,n,t,1,t,r),o=Ye(e,n,r),s=.11516993+1/(7.4477897+4.1590124*n+e*(-2.19557347+1.75198401*n+e*(-2.13704948-10.02301043*n+e*(-4.24894561+5.38770819*n+4.69891013*e)))),i=.11239642+1/(1.6132032-.68124379*n+e*(.40370612+.90148123*n+e*(-.27087943+.6122399*n+e*(.00299215-.45399568*n-.14661872*e)))),l=a/Math.min(t*o[0],(1-t)*o[1]),c=t*s,u=(1-t)*i,h=.9*l*Math.sqrt(Math.sqrt(1/(1/(c*c*c*c)+1/(u*u*u*u))));return c=t*.4,u=(1-t)*.8,[Math.sqrt(1/(1/(c*c)+1/(u*u))),h,a]}function pr(t){const e=t.l!==void 0?t.l:0,n=t.a!==void 0?t.a:0,r=t.b!==void 0?t.b:0,a={mode:"okhsl",l:ze(e)};t.alpha!==void 0&&(a.alpha=t.alpha);let o=Math.sqrt(n*n+r*r);if(!o)return a.s=0,a;let[s,i,l]=dr(e,n/o,r/o),c;if(o<i){let u=0,h=.8*s,f=1-h/i;c=(o-u)/(h+f*(o-u))*.8}else{let u=i,h=.2*i*i*1.25*1.25/s,f=1-h/(l-i);c=.8+.2*((o-u)/(h+f*(o-u)))}return c&&(a.s=c,a.h=V(Math.atan2(r,n)*180/Math.PI)),a}function br(t){let e=t.h!==void 0?t.h:0,n=t.s!==void 0?t.s:0,r=t.l!==void 0?t.l:0;const a={mode:"oklab",l:ie(r)};if(t.alpha!==void 0&&(a.alpha=t.alpha),!n||r===1)return a.a=a.b=0,a;let o=Math.cos(e/180*Math.PI),s=Math.sin(e/180*Math.PI),[i,l,c]=dr(a.l,o,s),u,h,f,p;n<.8?(u=1.25*n,h=0,f=.8*i,p=1-f/l):(u=5*(n-.8),h=l,f=.2*l*l*1.25*1.25/i,p=1-f/(c-l));let v=h+u*f/(1-p*u);return a.a=v*o,a.b=v*s,a}const Ao={...nr,mode:"okhsl",channels:["h","s","l","alpha"],parse:["--okhsl"],serialize:"--okhsl",fromMode:{oklab:pr,rgb:t=>pr(oe(t))},toMode:{oklab:br,rgb:t=>se(br(t))}};function mr(t){let e=t.l!==void 0?t.l:0,n=t.a!==void 0?t.a:0,r=t.b!==void 0?t.b:0,a=Math.sqrt(n*n+r*r),o=a?n/a:1,s=a?r/a:1,[i,l]=Ye(o,s),c=.5,u=1-c/i,h=l/(a+e*l),f=h*e,p=h*a,v=ie(f),w=p*v/f,g=jt({l:v,a:o*w,b:s*w}),M=Math.cbrt(1/Math.max(g.r,g.g,g.b,0));e=e/M,a=a/M*ze(e)/e,e=ze(e);const L={mode:"okhsv",s:a?(c+l)*p/(l*c+l*u*p):0,v:e?e/f:0};return L.s&&(L.h=V(Math.atan2(r,n)*180/Math.PI)),t.alpha!==void 0&&(L.alpha=t.alpha),L}function gr(t){const e={mode:"oklab"};t.alpha!==void 0&&(e.alpha=t.alpha);const n=t.h!==void 0?t.h:0,r=t.s!==void 0?t.s:0,a=t.v!==void 0?t.v:0,o=Math.cos(n/180*Math.PI),s=Math.sin(n/180*Math.PI),[i,l]=Ye(o,s),c=.5,u=1-c/i,h=1-r*c/(c+l-l*u*r),f=r*l*c/(c+l-l*u*r),p=ie(h),v=f*p/h,w=jt({l:p,a:o*v,b:s*v}),g=Math.cbrt(1/Math.max(w.r,w.g,w.b,0)),M=ie(a*h),L=f*M/h;return e.l=M*g,e.a=L*o*g,e.b=L*s*g,e}const Co={...rr,mode:"okhsv",channels:["h","s","v","alpha"],parse:["--okhsv"],serialize:"--okhsv",fromMode:{oklab:mr,rgb:t=>mr(oe(t))},toMode:{oklab:gr,rgb:t=>se(gr(t))}};function Oo(t,e){if(!e||e[0]!=="oklab")return;const n={mode:"oklab"},[,r,a,o,s]=e;if(!(r.type===m.Hue||a.type===m.Hue||o.type===m.Hue))return r.type!==m.None&&(n.l=Math.min(Math.max(0,r.type===m.Number?r.value:r.value/100),1)),a.type!==m.None&&(n.a=a.type===m.Number?a.value:a.value*.4/100),o.type!==m.None&&(n.b=o.type===m.Number?o.value:o.value*.4/100),s.type!==m.None&&(n.alpha=Math.min(1,Math.max(0,s.type===m.Number?s.value:s.value/100))),n}const Eo={...ur,mode:"oklab",toMode:{lrgb:jt,rgb:se},fromMode:{lrgb:fr,rgb:oe},ranges:{l:[0,1],a:[-.4,.4],b:[-.4,.4]},parse:[Oo],serialize:t=>`oklab(${t.l!==void 0?t.l:"none"} ${t.a!==void 0?t.a:"none"} ${t.b!==void 0?t.b:"none"}${t.alpha<1?` / ${t.alpha}`:""})`};function $o(t,e){if(!e||e[0]!=="oklch")return;const n={mode:"oklch"},[,r,a,o,s]=e;if(r.type!==m.None){if(r.type===m.Hue)return;n.l=Math.min(Math.max(0,r.type===m.Number?r.value:r.value/100),1)}if(a.type!==m.None&&(n.c=Math.max(0,a.type===m.Number?a.value:a.value*.4/100)),o.type!==m.None){if(o.type===m.Percentage)return;n.h=o.value}return s.type!==m.None&&(n.alpha=Math.min(1,Math.max(0,s.type===m.Number?s.value:s.value/100))),n}const _o={...hr,mode:"oklch",toMode:{oklab:t=>ae(t,"oklab"),rgb:t=>se(ae(t,"oklab"))},fromMode:{rgb:t=>re(oe(t),"oklch"),oklab:t=>re(t,"oklch")},parse:[$o],serialize:t=>`oklch(${t.l!==void 0?t.l:"none"} ${t.c!==void 0?t.c:"none"} ${t.h!==void 0?t.h:"none"}${t.alpha<1?` / ${t.alpha}`:""})`,ranges:{l:[0,1],c:[0,.4],h:[0,360]}};ut(io);const Po=ut(ur),Lo=ut(hr),Do=ut(nr),Io=ut(rr),Ro=ut(Ao),So=ut(Eo),Go=ut(Co),qo=ut(_o);function Ho([t,e,n]){const r=Ze(t),a=Ze(e),o=Ze(n);return .2126*r+.7152*a+.0722*o}function Ze(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Q(t){const e=new Map;return n=>{if(e.has(n))return e.get(n);const r=t(n);return e.set(n,r),r}}function vr(t){const e=parseInt(t.slice(1),16);return[e>>16&255,e>>8&255,e&255]}const Xe=Q(t=>{const[e,n,r]=vr(t);return[e/255,n/255,r/255]}),Bo=Q(t=>Uo(Xe(t))),at=Q(t=>{const{l:e,a:n,b:r}=So(t);return[e,n,r]}),Ko=Q(t=>{const{h:e,s:n,l:r}=Ro(t);return[e,n,r]}),jo=Q(t=>{const{h:e,s:n,v:r}=Go(t);return[e,n,r]}),zo=Q(t=>{const{l:e,c:n,h:r}=qo(t);return[e,n,r]}),kt=Q(t=>{const{l:e,c:n,h:r}=Lo(t);return[e,n,r]}),Ue=Q(t=>{const{l:e,a:n,b:r}=Po(t);return[e,n,r]}),Fo=Q(t=>{const{h:e,s:n,l:r}=Do(t);return[e,n,r]}),Yo=Q(t=>{const{h:e,s:n,v:r}=Io(t);return[e,n,r]});function vt(t){return t===void 0}const le=Q(t=>Ho(Xe(t)));function ht(t,e,n=1,r=1,a=1){return P.deltaE(t,e,n,r,a)}function Zo(t){return[t[0]/100,(t[1]+128)/255,(t[2]+128)/255]}function Xo(t){return[Math.round(t[0]/100*255),Math.round(t[1]+128),Math.round(t[2]+128)]}function Uo([t,e,n]){const r=1-Math.max(t,e,n),a=r<1?1/(1-r):0,o=(1-t-r)*a,s=(1-e-r)*a,i=(1-n-r)*a;return[o,s,i,r]}const Mr=(2.016+2.045)/2;function Wo([t,e,n],[r,a,o]){let s=t-r,i=Mr*(e-a),l=Mr*(n-o);return Math.sqrt(s**2+i**2+l**2)}function Jo(t,e){if(e==="rgb")return t.map(n=>[vr(n),n]);if(e==="gl")return t.map(n=>[Xe(n),n]);if(e==="oklab")return t.map(n=>[at(n),n]);if(e==="oklch")return t.map(n=>[zo(n),n]);if(e==="okhsl")return t.map(n=>[Ko(n),n]);if(e==="okhsv")return t.map(n=>[jo(n),n]);if(e==="lab")return t.map(n=>[Ue(n),n]);if(e==="lab_norm")return t.map(n=>[Zo(Ue(n)),n]);if(e==="lab_int")return t.map(n=>[Xo(Ue(n)),n]);if(e==="lch")return t.map(n=>[kt(n),n]);if(e==="hsl")return t.map(n=>[Fo(n),n]);if(e==="hsv")return t.map(n=>[Yo(n),n]);if(e==="hex")return t.map(n=>[n,n]);if(e==="cmyk")return t.map(n=>[Bo(n),n]);throw`Unknown model ${e}`}function F(t,e){const n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(n*n+r*r+a*a)}function Vo(t,e){const n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+a*a+o*o)}function Qo(t,e){let n=vt(t[0])&&vt(e[0])?0:t[0]-e[0]||0;const r=t[1]-e[1],a=t[2]-e[2];return n+=n>180?-360:n<-180?360:0,n/=180,Math.sqrt(n*n+r*r+a*a)}function To(t,e){const n=t[0]-e[0],r=t[1]-e[1];let a=vt(t[2])&&vt(e[2])?0:t[2]-e[2]||0;return a+=a>180?-360:a<-180?360:0,a/=180,Math.sqrt(n*n+r*r+a*a)}function Mt(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e===0?[0,0,0]:[t[0]/e,t[1]/e,t[2]/e]}function ot(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function St(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function wr(t){const e=t.reduce((n,r)=>[n[0]+r[0],n[1]+r[1],n[2]+r[2]],[0,0,0]);return[e[0]/t.length,e[1]/t.length,e[2]/t.length]}const yr={};function kr(t){const e=t.name||t.toString(),n=yr[e]=yr[e]||new Map;return(r,a)=>{const o=[r,a].sort().join("|");let s=n.get(o);return s===void 0&&(s=t(r,a),n.set(o,s)),s}}function ts(t){return t.at(-1)==="h"?To:t.at(-3)==="h"?Qo:t==="oklab"?Wo:t==="cmyk"?Vo:F}function K(t,e,n="gl",r,a){const o=new Map;let s=ts(n),i=s;typeof i!="function"&&(i.color?i=((w,g,...M)=>s.fn(f(w),f(g),...M)):i=s.fn);let l=r,c=l;c&&typeof c!="function"&&(c.color?c=((w,g,...M)=>l.fn(f(w),f(g),...M)):c=l.fn);const u=Jo(t,n);for(const[w,g]of u)o.set(w,g);function h(w){return w.map(g=>o.get(g))}function f(w){return o.get(w)}const p={distance:kr(i),delta:c?kr(c):void 0,toColors:h,toColor:f},v=[...o.keys()];return e.call(p,v)?.map(w=>o.get(w))}function Nr([t,e,n]){let r=0;for(let a=7;a>=0;a--){const o=1<<a,s=t&o?1:0,i=e&o?1:0,l=n&o?1:0;r=r<<3|es([s,i,l])}return r}function es([t,e,n]){return t<<2|e<<1|n}function ns(t){const e=new Map;return[...t].sort((n,r)=>{let a,o;return e.has(n)?a=e.get(n):(a=Nr(n),e.set(n,a)),e.has(r)?o=e.get(r):(o=Nr(r),e.set(r,o)),a-o})}function xr(t,e="rgb"){return K(t,ns,e)}xr.params=[{name:"model",values:["rgb","lab_int"]}];class rs{populationSize;generations;maxStagnation;mutationRate;crossoverRate;eliteSize;tournamentSize;random;fitnessFunc;seedFunc;fitnessCompare;onGeneration;population;currentGeneration;bestIndividual;bestFitness;peakGeneration;constructor(e){this.populationSize=e.populationSize||100,this.generations=e.generations||200,this.maxStagnation=e.maxStagnation||20,this.mutationRate=e.mutationRate||.1,this.crossoverRate=e.crossoverRate||.9,this.eliteSize=e.eliteSize||5,this.tournamentSize=e.tournamentSize||5,this.random=e.random||Math.random,this.fitnessFunc=e.fitness||(()=>0),this.seedFunc=e.seed,this.fitnessCompare=e.compare||((n,r)=>r-n),this.onGeneration=e.onGeneration,this.population=[],this.currentGeneration=0,this.bestIndividual=null,this.bestFitness=-1/0,this.peakGeneration=0}initializePopulation(){this.population=[];for(let e=0;e<this.populationSize;e++){const n=this.seedFunc(),r=this.fitnessFunc(n);this.population.push({genome:n,fitness:r})}this.sortPopulation(),this.updateBest()}sortPopulation(){this.population.sort((e,n)=>this.fitnessCompare(e.fitness,n.fitness))}updateBest(){(this.bestFitness===-1/0||this.fitnessCompare(this.population[0].fitness,this.bestFitness)<0)&&(this.peakGeneration=this.currentGeneration,this.bestFitness=this.population[0].fitness,this.bestIndividual=[...this.population[0].genome])}tournamentSelect(){const e=[];for(let n=0;n<this.tournamentSize;n++){const r=Math.floor(this.random()*this.population.length);e.push(this.population[r])}return e.sort((n,r)=>this.fitnessCompare(n.fitness,r.fitness)),e[0]}orderCrossover(e,n){const r=e.length,a=Math.floor(this.random()*r),o=a+Math.floor(this.random()*(r-a)),s=Array(r);for(let u=a;u<=o;u++)s[u]=e[u];const i=new Set(s.slice(a,o+1)),l=[];for(let u=0;u<r;u++){const h=n[u];i.has(h)||l.push(h)}let c=0;for(let u=0;u<r;u++)s[u]===void 0&&(s[u]=l[c],c++);return s}swapMutate(e){const n=[...e],r=Math.floor(this.random()*n.length),a=Math.floor(this.random()*n.length);return[n[r],n[a]]=[n[a],n[r]],n}shiftMutate(e){const n=[...e];return n.push(n.shift()),n}cheatMutate(e){let n=this.shiftMutate(e),r=n,a=this.fitnessFunc(r);for(let s=1;s<e.length;s++){n=this.shiftMutate(n);const i=this.fitnessFunc(n);this.fitnessCompare(i,a)<0&&(a=i,r=n)}const o=[...r].reverse();return this.fitnessCompare(a,this.fitnessFunc(o))<0?o:r}evolve(){const e=[];for(let n=0;n<this.eliteSize;n++)e.push({genome:[...this.population[n].genome],fitness:this.population[n].fitness});for(;e.length<this.populationSize;){const n=this.tournamentSelect(),r=this.tournamentSelect();let a;if(this.random()<this.crossoverRate?a=this.orderCrossover(n.genome,r.genome):a=[...n.genome],this.random()<this.mutationRate){const s=this.random();s<.5?a=this.swapMutate(a):s<.7?a=this.shiftMutate(a):s<.9?a=[...a].reverse():a=this.cheatMutate(a)}const o=this.fitnessFunc(a);e.push({genome:a,fitness:o})}this.population=e,this.sortPopulation(),this.updateBest()}run(){this.initializePopulation();for(let e=0;e<this.generations&&(this.currentGeneration=e,this.onGeneration&&this.onGeneration({generation:e,bestFitness:this.population[0].fitness,bestGenome:this.population[0].genome,averageFitness:this.population.reduce((n,r)=>n+(typeof r.fitness=="number"?r.fitness:0),0)/this.population.length}),!(this.currentGeneration>this.peakGeneration+this.maxStagnation));e++)this.evolve();return{bestGenome:this.cheatMutate(this.bestIndividual),bestFitness:this.bestFitness,finalPopulation:this.population,peakGeneration:this.peakGeneration}}}function ce(t){if(t.length<2)return{totalDistance:0,avgAngleChange:0,maxAngleChange:0,meanDistance:0,devDistance:0};let e=0,n=[],r=null;const a=[];for(let c=1;c<t.length;c++){const u=F(t[c-1],t[c]);e+=u,a.push(u);const h=Mt(ot(t[c],t[c-1]));if(r&&u>0){const f=Math.max(-1,Math.min(1,St(r,h))),p=Math.acos(f)*(180/Math.PI);n.push(p)}r=h}const o=e/(t.length-1),s=Math.sqrt(a.reduce((c,u)=>c+Math.pow(u-o,2),0)/(t.length-1)),i=n.length>0?n.reduce((c,u)=>c+u,0)/n.length:0,l=n.length>0?Math.max(...n):0;return{totalDistance:e,avgAngleChange:i,maxAngleChange:l,meanDistance:o,devDistance:s}}function as(t){let e=0;for(let n=0;n<t.length-1;n++){const r=at(t[n]),a=at(t[n+1]);e+=F(r,a)}return-e}function os(t,e){return e-t}function ss(t){return Ar(t,as,os)}function Ar(t,e,n){let r=1;const a=()=>(r=r*16807%2147483647,r/2147483647),o=Math.min(40,Math.max(10,t.length))*5,s=t.length<50?250:Math.floor(31250*64/(o*t.length));return new rs({populationSize:o,generations:s,maxStagnation:t.length<50?20:10,mutationRate:.5,crossoverRate:.9,eliteSize:5,random:a,fitness:e,compare:n,seed:()=>[...t].sort(()=>a()-.5)}).run().bestGenome}function is(t){const e=t.map(o=>at(o)),{avgAngleChange:n,maxAngleChange:r,totalDistance:a}=ce(e);return[-a,-n,-r]}function ls(t,e,n=.01){for(let r=0;r<t.length;r++){const a=(t[r]+e[r])/2,o=Math.abs(a*n),s=e[r]-t[r];if(Math.abs(s)>o)return s}return e[0]-t[0]}function cs(t){return Ar(t,is,ls)}function We(t,e){let n=!0;for(;n;){n=!1;for(let r=0;r<t.length-2;r++)for(let a=r+1;a<t.length-1;a++){const o=e(t[r],t[r+1])+e(t[a],t[a+1]);e(t[r],t[a])+e(t[r+1],t[a+1])<o&&(t=[...t.slice(0,r+1),...t.slice(r+1,a+1).reverse(),...t.slice(a+1)],n=!0)}}return t}function us(t){const e=t.reduce((n,r)=>[n[0]+r[0],n[1]+r[1],n[2]+r[2]],[0,0,0]);return[e[0]/t.length,e[1]/t.length,e[2]/t.length]}function hs(t,e){const n=t.length,r=[[0,0,0],[0,0,0],[0,0,0]];for(const a of t){const o=ot(a,e);for(let s=0;s<3;s++)for(let i=0;i<3;i++)r[s][i]+=o[s]*o[i]/n}return r}function fs(t){let e=[1,1,1];for(let n=0;n<100;n++){const r=[t[0][0]*e[0]+t[0][1]*e[1]+t[0][2]*e[2],t[1][0]*e[0]+t[1][1]*e[1]+t[1][2]*e[2],t[2][0]*e[0]+t[2][1]*e[1]+t[2][2]*e[2]];e=Mt(r)}return e}function ds(t){if(t.length===0)return[];const e=us(t),n=hs(t,e),r=fs(n);return[...t].sort((a,o)=>{const s=St(ot(a,e),r),i=St(ot(o,e),r);return s-i})}function ps(t){const e=t.length,n=t.reduce((r,a)=>[r[0]+a[0],r[1]+a[1],r[2]+a[2]],[0,0,0]).map(r=>r/e);return t.reduce((r,a)=>[r[0]+(a[0]-n[0])**2,r[1]+(a[1]-n[1])**2,r[2]+(a[2]-n[2])**2],[0,0,0]).map(r=>Math.sqrt(r/e)||1e-6)}function Cr(t){const e=ps(t);return(n,r)=>Math.hypot((n[0]-r[0])/e[0],(n[1]-r[1])/e[1],(n[2]-r[2])/e[2])}function Or(t,e,n="raw"){return K(t,function(r){const a=ds(r);if(n==="raw")return a;let o=this.distance,s=this.toColor;if(n==="tsp-adapt")if(e==="oklab")o=Cr(r);else{const i=t.map(c=>at(c)),l=Cr(i);o=(c,u)=>l(at(s(c)),at(s(u)))}return We(a,o)},e)}Or.params=[{name:"model",values:["gl","lab","oklab"]},{name:"post",values:["raw","tsp","tsp-adapt"]}];function bs(t,e="hsl",n="bottom-up"){return t.map(r=>({vec:r,hsl:e.at(-1)==="h"?[...r].reverse():r})).sort((r,a)=>{let[o,s,i]=r.hsl,[l,c,u]=a.hsl;switch(o=o||0,l=l||0,n){case"bottom-up":return Math.abs(i-u)>.05?i-u:Math.abs(o-l)>5?o-l:s-c;case"top-down":return Math.abs(i-u)>.05?u-i:Math.abs(o-l)>5?o-l:s-c;case"outward":return Math.abs(s-c)>.05?s-c:Math.abs(o-l)>5?o-l:i-u;case"inward":return Math.abs(s-c)>.05?c-s:Math.abs(o-l)>5?o-l:i-u;default:return 0}}).map(r=>r.vec)}function Er(t,e="hsl",n="bottom-up"){return K(t,function(r){return bs(r,e,n)},e)}Er.params=[{name:"model",values:["hsl","hsv","lch","okhsl","okhsv","oklch"]},{name:"mode",values:["outward","inward","bottom-up","top-down"]}];function ms(t,e="hsl",n="ascending"){const r=t.map(a=>{const o=e.at(-1)==="h"?[...a].reverse():a,s=(o[2]||0)*360+o[0];return{vec:a,hsl:o,spiralParam:s}});return r.sort((a,o)=>{const s=n==="ascending"?a.spiralParam-o.spiralParam:o.spiralParam-a.spiralParam;return Math.abs(s)<1?a.hsl[1]-o.hsl[1]:s}),r.map(a=>a.vec)}function $r(t,e="hsl",n="ascending"){return K(t,function(r){return ms(r,e,n)},e)}$r.params=[{name:"model",values:["hsl","hsv","lch","okhsl","okhsv","oklch"]},{name:"direction",values:["ascending","descending"]}];function gs(){let t=1;return()=>(t=t*16807%2147483647,t/2147483647)}function vs(t){return ue(t)[0]}function ue(t){const e=[];for(let n=0;n<t.length;n++)for(let r=n+1;r<t.length;r++){const a=t[n][0]-t[r][0],o=t[n][1]-t[r][1],s=t[n][2]-t[r][2],i=Math.sqrt(a*a+o*o+s*s);e.push({data:[t[n],t[r]],dist:i})}return e.sort((n,r)=>n.dist-r.dist),e.map(n=>n.data)}function Je(t,e){if(t.length===2)return[...t];let n=-1/0,r=null,a=null,o=null;for(let s=0;s<t.length;s++)for(let i=0;i<t.length;i++)if(i!==s)for(let l=0;l<t.length;l++){if(l===s||l===i)continue;const c=Mt(ot(t[i],t[s])),u=Mt(ot(t[l],t[i])),h=St(c,u);h>n&&(n=h,r=t[s],a=t[i],o=t[l])}return e.distance(r,a)<e.distance(a,o)?o=a:r=a,[r,o]}function Ms(t,e,n="average"){switch(n){case"single":let r=1/0;for(const o of t.colors)for(const s of e.colors)r=Math.min(r,F(o,s));return r;case"complete":let a=0;for(const o of t.colors)for(const s of e.colors)a=Math.max(a,F(o,s));return a;default:return F(t.centroid,e.centroid)}}function ws(t,e="average"){let n=t.map(r=>({colors:[r],centroid:r,distance:0}));for(;n.length>1;){let r=1/0,a=0,o=1;for(let i=0;i<n.length;i++)for(let l=i+1;l<n.length;l++){const c=Ms(n[i],n[l],e);c<r&&(r=c,a=i,o=l)}const s={colors:[...n[a].colors,...n[o].colors],left:n[a],right:n[o],centroid:wr([...n[a].colors,...n[o].colors]),distance:r};n=n.filter((i,l)=>l!==a&&l!==o),n.push(s)}return n[0]}function ft(t,e="balanced"){if(!t.left&&!t.right||!t.left||!t.right)return t.colors;switch(e){case"depth-first":return[...ft(t.left,e),...ft(t.right,e)];case"breadth-first":return t.left.colors.length<=t.right.colors.length?[...ft(t.left,e),...ft(t.right,e)]:[...ft(t.right,e),...ft(t.left,e)];default:const n=ft(t.left,e),r=ft(t.right,e),a=F(n[n.length-1],r[0]),o=F(r[r.length-1],n[0]);return a<=o?[...n,...r]:[...r,...n]}}function ys(t,e="average",n="balanced"){if(t.length===0)return[];if(t.length===1)return t;const r=ws(t,e);return ft(r,n)}function ks(t,e,n){return[...t].sort(()=>n()-.5).slice(0,e)}function Ns(t,e){return t.map(n=>{let r=1/0,a=0;return e.forEach((o,s)=>{const i=F(n,o);i<r&&(r=i,a=s)}),a})}function xs(t,e,n,r){const a=[];for(let o=0;o<n;o++){const s=t.filter((i,l)=>e[l]===o);s.length>0?a.push(wr(s)):a.push(t[Math.floor(r()*t.length)])}return a}function As(t,e=8,n=50){if(t.length===0)return[];if(t.length<=e)return t;const r=gs();let a=ks(t,e,r),o=[];for(let c=0;c<n;c++){const u=Ns(t,a);if(JSON.stringify(u)===JSON.stringify(o))break;o=u,a=xs(t,o,e,r)}const s=Array.from({length:e},()=>[]);t.forEach((c,u)=>{s[o[u]].push(c)});const i=s.map((c,u)=>({cluster:c,centroid:a[u]})).filter(c=>c.cluster.length>0).sort((c,u)=>{const h=c.centroid[0]+c.centroid[1]+c.centroid[2],f=u.centroid[0]+u.centroid[1]+u.centroid[2];return h-f}),l=[];for(const{cluster:c,centroid:u}of i){const h=c.sort((f,p)=>F(f,u)-F(p,u));l.push(...h)}return l}function _r(t,e,n){const r=[],a=t[e];return t.forEach((o,s)=>{F(a,o)<=n&&r.push(s)}),r}function Cs(t,e=30,n=3){if(t.length===0)return[];const r=new Set,a=[],o=[];t.forEach((i,l)=>{if(r.has(l))return;r.add(l);const c=_r(t,l,e);if(c.length<n)o.push(l);else{const u=[],h=[...c];for(;h.length>0;){const f=h.shift();if(!r.has(f)){r.add(f);const p=_r(t,f,e);p.length>=n&&h.push(...p)}u.push(f)}a.push(u)}}),a.sort((i,l)=>{const c=i.reduce((h,f)=>{const p=t[f];return h+p[0]+p[1]+p[2]},0)/i.length,u=l.reduce((h,f)=>{const p=t[f];return h+p[0]+p[1]+p[2]},0)/l.length;return c-u});const s=[];for(const i of a){const l=new Set(i),c=[];let u=i[0];for(c.push(u),l.delete(u);l.size>0;){let h=-1,f=1/0;for(const p of l){const v=F(t[u],t[p]);v<f&&(f=v,h=p)}if(h!==-1)c.push(h),l.delete(h),u=h;else break}s.push(...c.map(h=>t[h]))}return s.push(...o.map(i=>t[i])),s}const Ve={rgb:"gl",lab:"lab_norm"};function Pr(t,e="rgb",n="average",r="balanced"){return K(t,a=>ys(a,n,r),Ve[e]||e)}Pr.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"linkage",values:["single","complete","average"]},{name:"traversal",values:["depth-first","breadth-first","balanced"]}];function Lr(t,e="rgb",n=.5,r=50){return K(t,a=>As(a,Math.ceil(n*a.length),r),Ve[e]||e)}Lr.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"k",values:[.1,.3,.5,.7]},{name:"iterations",values:[10,50,100,250]}];function Dr(t,e="rgb",n=.3,r=3){return K(t,a=>{const[o,s]=ue(a).at(-1),i=F(o,s)*n;return Cs(a,i,r)},Ve[e]||e)}Dr.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"eps",values:[.1,.3,.5]},{name:"pts",values:[3,5,7]}];function Os(t,e){if(t.length===0)return[];if(t.length===1)return t;const{selectStart:n,distance:r}=e,a=new Map;for(const l of t)a.set(l,t.filter(c=>c!==l));let o=n(t);const s=[o],i=new Set([o]);for(;s.length<t.length;){const l=a.get(o).filter(h=>!i.has(h));let c=l[0],u=r(o,c);for(let h=1;h<l.length;h++){const f=r(o,l[h]);f<u&&(u=f,c=l[h])}o=c,i.add(o),s.push(o)}return s}function Qe(t,e="rgb",n="bright",r="euclidean"){return K(t,function(a){const{toColors:o}=this;function s(l){const c=o(l),u=c.reduce((h,f)=>le(f)>le(h)?f:h);return l[c.indexOf(u)]}function i(l){const c=o(l),u=c.reduce((h,f)=>le(f)<le(h)?f:h);return l[c.indexOf(u)]}return Os(a,{selectStart:n==="bright"?s:i,distance:r==="euclidean"?this.distance:this.delta})},e,{fn:ht,color:!0})}Qe.params=[{name:"model",values:["hsl","hsv","oklch","oklab","okhsl","okhsv","lch","lab","rgb","cmyk"]},{name:"start",values:["bright","dark"]}];function Ir(t,e="bright"){return Qe(t,"rgb",e,"delta")}Ir.params=[{name:"start",values:["bright","dark"]}];function Es(t){let e=0,n=0,r=0;for(const[u,h,f]of t)e+=u,n+=h,r+=f||0;const a=e/t.length,o=n/t.length,s=r/t.length;let i=0,l=0,c=0;for(const[u,h,f]of t){const p=Math.abs(u-a)/(u+a)||0,v=Math.abs(h-o)/(h+o)||0,w=Math.abs(f-s)/(f+s)||0;i+=p,l+=v,c+=w}return[i,l,c]}function Te(t){const e=t.reduce((i,[l])=>i+l,0)/t.length,n=t.reduce((i,[,l])=>i+l,0)/t.length,r=$s(t.map(([,,i])=>i).filter(i=>!vt(i))),a=t.reduce((i,[l])=>i+Math.pow(l-e,2),0)/t.length,o=t.reduce((i,[,l])=>i+Math.pow(l-n,2),0)/t.length,s=_s(t.map(([,,i])=>i).filter(i=>!vt(i)),r);return{L:Math.sqrt(a),C:Math.sqrt(o),H:Math.sqrt(s),meanL:e,meanC:n,meanH:r}}function $s(t){if(t.length===0)return 0;const e=t.filter(o=>!vt(o)).map(o=>o*Math.PI/180),n=e.reduce((o,s)=>o+Math.sin(s),0),r=e.reduce((o,s)=>o+Math.cos(s),0);let a=Math.atan2(n/t.length,r/t.length)*(180/Math.PI);return a<0&&(a+=360),a}function _s(t,e){return t.length===0?0:t.map(n=>{let r=n-e;return r>180&&(r-=360),r<-180&&(r+=360),r*r}).reduce((n,r)=>n+r,0)/t.length}function Rr(t){const e=Math.max(Number.EPSILON,t.L+t.C+(t.H??0));return{Kl:(e-t.L)/(2*e),Kc:(e-t.C)/(2*e),Kh:(e-t.H)/(2*e)}}function tn(t){const e=Te(t),n=t.map(([l])=>l),r=t.map(([,l])=>l),a=Math.max(...n)-Math.min(...n),o=Math.max(...r)-Math.min(...r),s=Sr(t),i={...e,lightnessRange:a,chromaRange:o,hueSpread:s};return s>180&&e.H>70&&e.L<80?{Kl:.5,Kc:1,Kh:2,type:"Rainbow",data:i}:a>50&&e.L>20&&s<30?{Kl:2,Kc:.5,Kh:.5,type:"Monochromatic",data:i}:o>50&&e.C>15&&s<60?{Kl:.5,Kc:2,Kh:1,type:"Wide Chroma",data:i}:e.H<15&&e.L<15&&e.C<15?{Kl:1.2,Kc:1.2,Kh:1.2,type:"Uniform",data:i}:{Kl:1,Kc:1,Kh:1,type:"Balanced",data:i}}function Ps(t){if(t.length===0)return 0;const e=[...t].sort((a,o)=>a-o);let n=0;for(let a=0;a<e.length-1;a++){const o=e[a+1]-e[a];n=Math.max(n,o)}const r=360-(e[e.length-1]-e[0]);return n=Math.max(n,r),360-n}function Sr(t){return Ps(t.map(([,,e])=>e).filter(e=>!vt(e)))}function zt(t,e){const n=new Map;for(let s=0;s<t.length;s++){const i=new Set;for(let l=0;l<t.length;l++)s!==l&&i.add({color:t[l],distance:e(t[s],t[l])});n.set(t[s],i)}const r=[],a=new Set;function o(s){r.push(s),a.add(s);const i=[...n.get(s)].sort((l,c)=>l.distance-c.distance);for(const l of i)a.has(l.color)||o(l.color)}return o(t[0]),r}function Gr(t,e="raw"){return K(t,function(n){const r=zt(n,this.delta);return e==="raw"?r:We(r,this.delta)},"hex",ht)}Gr.params=[{name:"post",values:["raw","tsp"]}];function Ls(t){return K(t,function(e){const n=Es(e);return zt(e,(r,a)=>this.delta(r,a,...n))},"lch",{fn:ht,color:!0})}function Ds(t){const e=t.map(s=>kt(s)),{Kl:n,Kc:r,Kh:a}=tn(e),o=[n,r,a];return K(t,function(s){return zt(s,(i,l)=>this.delta(i,l,...o))},"hex",ht)}function Is(t){const e=t.map(i=>kt(i)),n=Te(e),{Kc:r,Kh:a,Kl:o}=Rr(n),s=[o,r,a];return K(t,function(i){return zt(i,(l,c)=>this.delta(l,c,...s))},"hex",ht)}function Rs(t){const e=t.map(i=>kt(i)),n=Te(e),{Kc:r,Kh:a,Kl:o}=Rr(n),s=[o,r,a+.5];return K(t,function(i){return zt(i,(l,c)=>this.delta(l,c,...s))},"hex",ht)}function en(t,e,n,r,a=1e6){const o=r(t,e),s=Mt(ot(e,t));let i=o;if(n){const l=(1-St(n,s))*a;i=o*(1+l)}return{score:i,direction:s}}function nn(t,e,n,r,a,o=1e6){const s=a(t,e),i=r(t,e)*s/128,l=Mt(ot(e,t));let c=i;if(n){const u=(1-St(n,l))*o;c=i*(1+u)}return{score:c,direction:l}}function Gt(t,e,n){const r=new Set(t),a=[];let[o,s]=e;a.push(o,s),r.delete(o),r.delete(s);let i=Mt(ot(o,s)),l=Mt(ot(s,o));for(;r.size>0;){let c=[];for(const h of r){const f=n(o,h,i),p=n(s,h,l),v=Math.min(f.score,p.score);c.push({candidate:h,scoreStart:f,scoreEnd:p,minScore:v})}c.sort((h,f)=>h.minScore-f.minScore);const u=c[0];u.scoreStart.score<=u.scoreEnd.score?(a.unshift(u.candidate),i=u.scoreStart.direction,o=u.candidate):(a.push(u.candidate),l=u.scoreEnd.direction,s=u.candidate),r.delete(u.candidate)}return a}function Ss(t){return K(t,function(e){const n=(r,a,o)=>en(r,a,o,this.distance);return Gt(e,vs(e),n)},"oklab")}function qr(t,e="raw"){return K(t,function(n){const r=ue(n).slice(0,128),a=(s,i,l)=>en(s,i,l,this.distance),o=r.map(s=>{const i=Gt(n,s,a);return{vectors:i,metrics:ce(this.toColors(i))}});return o.sort((s,i)=>s.metrics.totalDistance-i.metrics.totalDistance),e==="tsp"?We(o[0].vectors,this.distance):o[0].vectors},"oklab")}qr.params=[{name:"post",values:["raw","tsp"]}];function Gs(t){return K(t,function(e){const n=ue(e).slice(0,128),r=(s,i)=>this.delta(s,i),a=(s,i,l)=>nn(s,i,l,this.distance,r),o=n.map(s=>{const i=Gt(e,s,a);return{vectors:i,metrics:ce(this.toColors(i))}});return o.sort((s,i)=>s.metrics.totalDistance-i.metrics.totalDistance),o[0].vectors},"oklab",{fn:ht,color:!0})}function qs(t){return K(t,function(e){const n=(r,a,o)=>en(r,a,o,this.distance);return Gt(e,Je(e,this),n)},"oklab")}function Hs(t){return K(t,function(e){const n=(a,o)=>this.delta(a,o),r=(a,o,s)=>nn(a,o,s,this.distance,n);return Gt(e,Je(e,this),r)},"oklab",{fn:ht,color:!0})}function Bs(t){const e=t.map(s=>kt(s)),{Kl:n,Kc:r,Kh:a}=tn(e),o=[n,r,a];return K(t,function(s){const i=(c,u)=>this.delta(c,u,...o),l=(c,u,h)=>nn(c,u,h,this.distance,i);return Gt(s,Je(s,this),l)},"oklab",{fn:ht,color:!0})}const Ks=0,js=1,zs=1,Fs=2,Ys=2,Zs=2,Xs=3,Us=3,Ws=3,Js=3,Vs=70,Qs={Original:Ks,SPI:js,CYL:zs,HIL:Fs,KM:Ys,DBSCAN:Zs,HARM:Xs,HARMED:Us,"NNA(DE) Lab":3,"NNA(DE+) Lab":3,"NNA(DE++) Lab":3,"NNA(DE+1) Lab":3,"NNA(DE+2) Lab":3,"MOM(Closest)-Oklab":3,PCA:Ws,CL:Js,"MOM(Inlinest)-Oklab":4,"MOM(Inlinest,DE)-Oklab":4,"MOM(Inlinest,DE++)-Oklab":4,"MOM(Closest+)-Oklab":5,"MOM(Closest+,DE)-Oklab":5,"GEN-Oklab":5,"GEN3-Oklab":5,_TOTAL:Vs},Y={PCA:["PCA","Principal component analysis","https://en.wikipedia.org/wiki/Principal_component_analysis"],HIL:["HIL","Hilbert curve","https://en.wikipedia.org/wiki/Hilbert_curve"],GEN:["GEN","Genetic algorithm","https://en.wikipedia.org/wiki/Genetic_algorithm"],NNA:["NNA","Nearest neighbour algorithm","https://en.wikipedia.org/wiki/Nearest_neighbour_algorithm"],MOM:["MON","Greedy with momentum"," https://en.wikipedia.org/wiki/Greedy_algorithm"]},Z={RGB:["RGB","https://en.wikipedia.org/wiki/RGB_color_model"],LAB:["CIELAB","https://en.wikipedia.org/wiki/CIELAB_color_space"],OKLAB:["Oklab","https://en.wikipedia.org/wiki/Oklab_color_space"]},Nt={DE:["DE","Delta E","http://www.brucelindbloom.com/index.html?Eqn_DeltaE_CIE2000.html"]},Ts=[{name:"Original",fn:t=>t,mid:"Original",description:{model:null}},{name:"HARM",fn:Qe,mid:"HARM",description:{}},{name:"HARMED",fn:Ir,mid:"HARMED",description:{}},{name:"NNA(Delta E)",fn:Gr,mid:"NNA(DE) Lab",description:{method:Y.NNA,model:Z.LAB,diff:Nt.DE}},{name:"NNA(Delta E+)",fn:Ls,mid:"NNA(DE+) Lab",description:{method:Y.NNA,model:Z.LAB,diff:Nt.DE}},{name:"NNA(Delta E++)",fn:Ds,mid:"NNA(DE++) Lab",description:{method:Y.NNA,model:Z.LAB,diff:Nt.DE}},{name:"NNA(Delta E+1)",fn:Is,mid:"NNA(DE+1) Lab",description:{method:Y.NNA,model:Z.LAB,diff:Nt.DE}},{name:"NNA(Delta E+2)",fn:Rs,mid:"NNA(DE+2) Lab",description:{method:Y.NNA,model:Z.LAB,diff:Nt.DE}},{name:"MOM(Closest) Oklab",fn:Ss,mid:"MOM(Closest)-Oklab",description:{method:Y.MOM,model:Z.OKLAB}},{name:"MOM(Closest+) Oklab",fn:qr,mid:"MOM(Closest+)-Oklab",description:{method:Y.MOM,model:Z.OKLAB}},{name:"MOM(Closest+, Delta E) Oklab",fn:Gs,mid:"MOM(Closest+,DE)-Oklab",description:{method:Y.MOM,model:Z.OKLAB}},{name:"MOM(Inlinest) Oklab",fn:qs,mid:"MOM(Inlinest)-Oklab",description:{method:Y.MOM,model:Z.OKLAB}},{name:"MOM(Inlinest, Delta E) Oklab",fn:Hs,mid:"MOM(Inlinest,DE)-Oklab",description:{method:Y.MOM,model:Z.OKLAB,diff:Nt.DE}},{name:"MOM(Inlinest, Delta E++) Oklab",fn:Bs,mid:"MOM(Inlinest,DE++)-Oklab",description:{method:Y.MOM,model:Z.OKLAB,diff:Nt.DE}},{name:"Genetic Oklab",fn:ss,mid:"GEN-Oklab",description:{method:Y.GEN,model:Z.OKLAB}},{name:"Genetic3 Oklab",fn:cs,mid:"GEN3-Oklab",description:{method:Y.GEN,model:Z.OKLAB}},{name:"Hilbert",fn:xr,mid:"HIL",description:{method:Y.HIL,model:Z.RGB}},{name:"PCA",fn:Or,mid:"PCA",description:{method:Y.PCA}},{name:"Spiral",fn:Er,mid:"SPI",description:{}},{name:"Cylindrical",fn:$r,mid:"CYL",description:{}},{name:"Cluster",fn:Pr,mid:"CL",description:{}},{name:"K-means",fn:Lr,mid:"KM",description:{}},{name:"DBSCAN",fn:Dr,mid:"DBSCAN",description:{}}];function ti(t){return t.reduce((e,{values:n})=>e.flatMap(r=>n.map(a=>[...r,a])),[[]])}const ei=Ts.reduce((t,e)=>{if(e.fn.params){const n=ti(e.fn.params);for(const r of n)t.push({...e,name:`${e.name} [${r.join(",")}]`,mid:`${e.mid}:[${r.join(",")}]`,speed:Qs[e.mid]||0,fn:a=>e.fn.call(null,a,...r)})}else t.push(e);return t},[]);function ni(t){if(t.length<2)return{totalDistance:0,avgAngleChange:0,maxAngleChange:0,meanDistance:0,devDistance:0,totalCurveDistance:0,meanCurveDistance:0,devCurveDistance:0,lchAvgChange:{L:0,C:0,H:0},lchMaxChange:{L:0,C:0,H:0},lchDeviation:{L:0,C:0,H:0},curveRatio:0,perceptualUniformity:0,curveUniformity:0,harmonicScore:0,harmonicCurveScore:0};const e=t.map(k=>at(k)),n=t.map(k=>kt(k)),{totalDistance:r,avgAngleChange:a,devDistance:o,maxAngleChange:s,meanDistance:i}=ce(e),l=Sr(n);let c=0;const u=[],h=[e[0],...e,e[e.length-1]],f=[],p=[],v=[];for(let k=1;k<e.length;k++){const y=ai(h[k-1],h[k],h[k+1],h[k+2]);c+=y,u.push(y);const[G,T,tt]=n[k-1],[et,dt,pt]=n[k];if(f.push(Math.abs(et-G)),p.push(Math.abs(dt-T)),!isNaN(tt)&&!isNaN(pt)){let wt=Math.abs(pt-tt);wt>180&&(wt=360-wt),v.push(wt)}else isNaN(tt)&&isNaN(pt)?v.push(0):v.push(90)}const w=c/(e.length-1),g=Math.sqrt(u.reduce((k,y)=>k+Math.pow(y-w,2),0)/(e.length-1)),M={L:f.reduce((k,y)=>k+y,0)/f.length,C:p.reduce((k,y)=>k+y,0)/p.length,H:v.reduce((k,y)=>k+y,0)/v.length},L={L:Math.max(...f),C:Math.max(...p),H:Math.max(...v)},D=M.L,I=M.C,R=M.H,S={L:Math.sqrt(f.reduce((k,y)=>k+Math.pow(y-D,2),0)/f.length),C:Math.sqrt(p.reduce((k,y)=>k+Math.pow(y-I,2),0)/p.length),H:Math.sqrt(v.reduce((k,y)=>k+Math.pow(y-R,2),0)/v.length)},$=1/(1+o),d=1/(1+g),N=c/r-1,A=$*.4+Math.min(l/180,1)*.3+1/(1+S.H/45)*.3,x=d*.4+Math.min(l/180,1)*.3+1/(1+S.H/45)*.3;return{totalDistance:r,avgAngleChange:a,maxAngleChange:s,meanDistance:i,devDistance:o,totalCurveDistance:c,meanCurveDistance:w,devCurveDistance:g,lchAvgChange:M,lchMaxChange:L,lchDeviation:S,curveRatio:N,perceptualUniformity:$,curveUniformity:d,harmonicScore:A,harmonicCurveScore:x}}function ri(t,e,n,r,a){const o=a*a,s=o*a;return[.5*(2*e[0]+(-t[0]+n[0])*a+(2*t[0]-5*e[0]+4*n[0]-r[0])*o+(-t[0]+3*e[0]-3*n[0]+r[0])*s),.5*(2*e[1]+(-t[1]+n[1])*a+(2*t[1]-5*e[1]+4*n[1]-r[1])*o+(-t[1]+3*e[1]-3*n[1]+r[1])*s),.5*(2*e[2]+(-t[2]+n[2])*a+(2*t[2]-5*e[2]+4*n[2]-r[2])*o+(-t[2]+3*e[2]-3*n[2]+r[2])*s)]}function ai(t,e,n,r,a=12){let o=0,s=e;for(let i=1;i<=a;i++){const l=i/a,c=ri(t,e,n,r,l);o+=F(s,c),s=c}return o}async function oi(t){const e=performance.now(),n=await t(),r=performance.now()-e;return{result:n,elapsed:r}}self.onmessage=async t=>{const{sortName:e,getPaletteType:n,palette:r}=t.data;if(e){const a=ei.find(u=>u.name===e).fn,{result:o,elapsed:s}=await oi(async()=>await a(r)),i=at(o[0]),l=at(o.at(-1));i[0]>l[0]&&o.reverse();const c=ni(o);self.postMessage({result:o,metrics:c,elapsed:s})}else if(n){const a=n.map(o=>kt(o));self.postMessage(tn(a))}}})();
