(function(){"use strict";function $n(e){const t=Ot(e);return Ot(e.map(n=>(n-t)**2))}function Ot(e){return e.reduce((t,n)=>t+n,0)/e.length}function st(e){return e.reduce((t,n)=>t+n*n,0)}function Sn(e){const t=Math.floor(e.length*.4),n=e.slice(t).reduce((o,a)=>o+a*a,0),r=st(e);return r>0?n/r:0}function Ln(e){const t=[...e];for(let n=0;n<t.length;n++)if(!isFinite(t[n])){let r=n-1;for(;r>=0&&!isFinite(t[r]);)r--;let o=n+1;for(;o<t.length&&!isFinite(t[o]);)o++;if(r>=0&&o<t.length){const a=t[r],s=t[o],i=o-r,l=n-r;t[n]=a+(s-a)*(l/i)}else r>=0?t[n]=t[r]:o<t.length?t[n]=t[o]:t[n]=0}return t}const{min:_o,max:Co}=Math,Oe=(e,t=0,n=1)=>_o(Co(t,e),n),Pt=e=>{e._clipped=!1,e._unclipped=e.slice(0);for(let t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=Oe(e[t],0,255)):t===3&&(e[t]=Oe(e[t],0,1));return e},qn={};for(let e of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])qn[`[object ${e}]`]=e.toLowerCase();function L(e){return qn[Object.prototype.toString.call(e)]||"object"}const D=(e,t=null)=>e.length>=3?Array.prototype.slice.call(e):L(e[0])=="object"&&t?t.split("").filter(n=>e[0][n]!==void 0).map(n=>e[0][n]):e[0].slice(0),Le=e=>{if(e.length<2)return null;const t=e.length-1;return L(e[t])=="string"?e[t].toLowerCase():null},{PI:it,min:zn,max:Gn}=Math,te=e=>Math.round(e*100)/100,Rt=e=>Math.round(e*100)/100,me=it*2,Dt=it/3,Eo=it/180,Oo=180/it;function Hn(e){return[...e.slice(0,3).reverse(),...e.slice(3)]}const R={format:{},autodetect:[]};class v{constructor(...t){const n=this;if(L(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];let r=Le(t),o=!1;if(!r){o=!0,R.sorted||(R.autodetect=R.autodetect.sort((a,s)=>s.p-a.p),R.sorted=!0);for(let a of R.autodetect)if(r=a.test(...t),r)break}if(R.format[r]){const a=R.format[r].apply(null,o?t:t.slice(0,-1));n._rgb=Pt(a)}else throw new Error("unknown format: "+t);n._rgb.length===3&&n._rgb.push(1)}toString(){return L(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const Po="3.2.0",q=(...e)=>new v(...e);q.version=Po;const qe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Ro=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Do=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,In=e=>{if(e.match(Ro)){(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16),n=t>>16,r=t>>8&255,o=t&255;return[n,r,o,1]}if(e.match(Do)){(e.length===5||e.length===9)&&(e=e.substr(1)),e.length===4&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16),n=t>>24&255,r=t>>16&255,o=t>>8&255,a=Math.round((t&255)/255*100)/100;return[n,r,o,a]}throw new Error(`unknown hex color: ${e}`)},{round:lt}=Math,Kn=(...e)=>{let[t,n,r,o]=D(e,"rgba"),a=Le(e)||"auto";o===void 0&&(o=1),a==="auto"&&(a=o<1?"rgba":"rgb"),t=lt(t),n=lt(n),r=lt(r);let s="000000"+(t<<16|n<<8|r).toString(16);s=s.substr(s.length-6);let i="0"+lt(o*255).toString(16);switch(i=i.substr(i.length-2),a.toLowerCase()){case"rgba":return`#${s}${i}`;case"argb":return`#${i}${s}`;default:return`#${s}`}};v.prototype.name=function(){const e=Kn(this._rgb,"rgb");for(let t of Object.keys(qe))if(qe[t]===e)return t.toLowerCase();return e},R.format.named=e=>{if(e=e.toLowerCase(),qe[e])return In(qe[e]);throw new Error("unknown color name: "+e)},R.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&L(e)==="string"&&qe[e.toLowerCase()])return"named"}}),v.prototype.alpha=function(e,t=!1){return e!==void 0&&L(e)==="number"?t?(this._rgb[3]=e,this):new v([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},v.prototype.clipped=function(){return this._rgb._clipped||!1};const le={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},$o=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function pe(e){const t=$o.get(String(e).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+e);le.labWhitePoint=e,le.Xn=t[0],le.Zn=t[1]}function Ve(){return le.labWhitePoint}const $t=(...e)=>{e=D(e,"lab");const[t,n,r]=e,[o,a,s]=So(t,n,r),[i,l,c]=jn(o,a,s);return[i,l,c,e.length>3?e[3]:1]},So=(e,t,n)=>{const{kE:r,kK:o,kKE:a,Xn:s,Yn:i,Zn:l}=le,c=(e+16)/116,u=.002*t+c,h=c-.005*n,f=u*u*u,m=h*h*h,p=f>r?f:(116*u-16)/o,b=e>a?Math.pow((e+16)/116,3):e/o,d=m>r?m:(116*h-16)/o,M=p*s,_=b*i,O=d*l;return[M,_,O]},St=e=>{const t=Math.sign(e);return e=Math.abs(e),(e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055)*t},jn=(e,t,n)=>{const{MtxAdaptMa:r,MtxAdaptMaI:o,MtxXYZ2RGB:a,RefWhiteRGB:s,Xn:i,Yn:l,Zn:c}=le,u=i*r.m00+l*r.m10+c*r.m20,h=i*r.m01+l*r.m11+c*r.m21,f=i*r.m02+l*r.m12+c*r.m22,m=s.X*r.m00+s.Y*r.m10+s.Z*r.m20,p=s.X*r.m01+s.Y*r.m11+s.Z*r.m21,b=s.X*r.m02+s.Y*r.m12+s.Z*r.m22,d=(e*r.m00+t*r.m10+n*r.m20)*(m/u),M=(e*r.m01+t*r.m11+n*r.m21)*(p/h),_=(e*r.m02+t*r.m12+n*r.m22)*(b/f),O=d*o.m00+M*o.m10+_*o.m20,P=d*o.m01+M*o.m11+_*o.m21,$=d*o.m02+M*o.m12+_*o.m22,S=St(O*a.m00+P*a.m10+$*a.m20),C=St(O*a.m01+P*a.m11+$*a.m21),g=St(O*a.m02+P*a.m12+$*a.m22);return[S*255,C*255,g*255]},Lt=(...e)=>{const[t,n,r,...o]=D(e,"rgb"),[a,s,i]=Bn(t,n,r),[l,c,u]=Lo(a,s,i);return[l,c,u,...o.length>0&&o[0]<1?[o[0]]:[]]};function Lo(e,t,n){const{Xn:r,Yn:o,Zn:a,kE:s,kK:i}=le,l=e/r,c=t/o,u=n/a,h=l>s?Math.pow(l,1/3):(i*l+16)/116,f=c>s?Math.pow(c,1/3):(i*c+16)/116,m=u>s?Math.pow(u,1/3):(i*u+16)/116;return[116*f-16,500*(h-f),200*(f-m)]}function qt(e){const t=Math.sign(e);return e=Math.abs(e),(e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4))*t}const Bn=(e,t,n)=>{e=qt(e/255),t=qt(t/255),n=qt(n/255);const{MtxRGB2XYZ:r,MtxAdaptMa:o,MtxAdaptMaI:a,Xn:s,Yn:i,Zn:l,As:c,Bs:u,Cs:h}=le;let f=e*r.m00+t*r.m10+n*r.m20,m=e*r.m01+t*r.m11+n*r.m21,p=e*r.m02+t*r.m12+n*r.m22;const b=s*o.m00+i*o.m10+l*o.m20,d=s*o.m01+i*o.m11+l*o.m21,M=s*o.m02+i*o.m12+l*o.m22;let _=f*o.m00+m*o.m10+p*o.m20,O=f*o.m01+m*o.m11+p*o.m21,P=f*o.m02+m*o.m12+p*o.m22;return _*=b/c,O*=d/u,P*=M/h,f=_*a.m00+O*a.m10+P*a.m20,m=_*a.m01+O*a.m11+P*a.m21,p=_*a.m02+O*a.m12+P*a.m22,[f,m,p]};v.prototype.lab=function(){return Lt(this._rgb)},Object.assign(q,{lab:(...e)=>new v(...e,"lab"),getLabWhitePoint:Ve,setLabWhitePoint:pe}),R.format.lab=$t,R.autodetect.push({p:2,test:(...e)=>{if(e=D(e,"lab"),L(e)==="array"&&e.length===3)return"lab"}}),v.prototype.darken=function(e=1){const t=this,n=t.lab();return n[0]-=le.Kn*e,new v(n,"lab").alpha(t.alpha(),!0)},v.prototype.brighten=function(e=1){return this.darken(-e)},v.prototype.darker=v.prototype.darken,v.prototype.brighter=v.prototype.brighten,v.prototype.get=function(e){const[t,n]=e.split("."),r=this[t]();if(n){const o=t.indexOf(n)-(t.substr(0,2)==="ok"?2:0);if(o>-1)return r[o];throw new Error(`unknown channel ${n} in mode ${t}`)}else return r};const{pow:qo}=Math,zo=1e-7,Go=20;v.prototype.luminance=function(e,t="rgb"){if(e!==void 0&&L(e)==="number"){if(e===0)return new v([0,0,0,this._rgb[3]],"rgb");if(e===1)return new v([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),r=Go;const o=(s,i)=>{const l=s.interpolate(i,.5,t),c=l.luminance();return Math.abs(e-c)<zo||!r--?l:c>e?o(s,l):o(l,i)},a=(n>e?o(new v([0,0,0]),this):o(this,new v([255,255,255]))).rgb();return new v([...a,this._rgb[3]])}return Ho(...this._rgb.slice(0,3))};const Ho=(e,t,n)=>(e=zt(e),t=zt(t),n=zt(n),.2126*e+.7152*t+.0722*n),zt=e=>(e/=255,e<=.03928?e/12.92:qo((e+.055)/1.055,2.4)),Z={},ze=(e,t,n=.5,...r)=>{let o=r[0]||"lrgb";if(!Z[o]&&!r.length&&(o=Object.keys(Z)[0]),!Z[o])throw new Error(`interpolation mode ${o} is not defined`);return L(e)!=="object"&&(e=new v(e)),L(t)!=="object"&&(t=new v(t)),Z[o](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))};v.prototype.mix=v.prototype.interpolate=function(e,t=.5,...n){return ze(this,e,t,...n)},v.prototype.premultiply=function(e=!1){const t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new v([t[0]*n,t[1]*n,t[2]*n,n],"rgb")};const{sin:Io,cos:Ko}=Math,Fn=(...e)=>{let[t,n,r]=D(e,"lch");return isNaN(r)&&(r=0),r=r*Eo,[t,Ko(r)*n,Io(r)*n]},Gt=(...e)=>{e=D(e,"lch");const[t,n,r]=e,[o,a,s]=Fn(t,n,r),[i,l,c]=$t(o,a,s);return[i,l,c,e.length>3?e[3]:1]},jo=(...e)=>{const t=Hn(D(e,"hcl"));return Gt(...t)},{sqrt:Bo,atan2:Fo,round:Yo}=Math,Yn=(...e)=>{const[t,n,r]=D(e,"lab"),o=Bo(n*n+r*r);let a=(Fo(r,n)*Oo+360)%360;return Yo(o*1e4)===0&&(a=Number.NaN),[t,o,a]},Ht=(...e)=>{const[t,n,r,...o]=D(e,"rgb"),[a,s,i]=Lt(t,n,r),[l,c,u]=Yn(a,s,i);return[l,c,u,...o.length>0&&o[0]<1?[o[0]]:[]]};v.prototype.lch=function(){return Ht(this._rgb)},v.prototype.hcl=function(){return Hn(Ht(this._rgb))},Object.assign(q,{lch:(...e)=>new v(...e,"lch"),hcl:(...e)=>new v(...e,"hcl")}),R.format.lch=Gt,R.format.hcl=jo,["lch","hcl"].forEach(e=>R.autodetect.push({p:2,test:(...t)=>{if(t=D(t,e),L(t)==="array"&&t.length===3)return e}})),v.prototype.saturate=function(e=1){const t=this,n=t.lch();return n[1]+=le.Kn*e,n[1]<0&&(n[1]=0),new v(n,"lch").alpha(t.alpha(),!0)},v.prototype.desaturate=function(e=1){return this.saturate(-e)},v.prototype.set=function(e,t,n=!1){const[r,o]=e.split("."),a=this[r]();if(o){const s=r.indexOf(o)-(r.substr(0,2)==="ok"?2:0);if(s>-1){if(L(t)=="string")switch(t.charAt(0)){case"+":a[s]+=+t;break;case"-":a[s]+=+t;break;case"*":a[s]*=+t.substr(1);break;case"/":a[s]/=+t.substr(1);break;default:a[s]=+t}else if(L(t)==="number")a[s]=t;else throw new Error("unsupported value for Color.set");const i=new v(a,r);return n?(this._rgb=i._rgb,this):i}throw new Error(`unknown channel ${o} in mode ${r}`)}else return a},v.prototype.tint=function(e=.5,...t){return ze(this,"white",e,...t)},v.prototype.shade=function(e=.5,...t){return ze(this,"black",e,...t)};const Zo=(e,t,n)=>{const r=e._rgb,o=t._rgb;return new v(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"rgb")};Z.rgb=Zo;const{sqrt:It,pow:Ge}=Math,To=(e,t,n)=>{const[r,o,a]=e._rgb,[s,i,l]=t._rgb;return new v(It(Ge(r,2)*(1-n)+Ge(s,2)*n),It(Ge(o,2)*(1-n)+Ge(i,2)*n),It(Ge(a,2)*(1-n)+Ge(l,2)*n),"rgb")};Z.lrgb=To;const Xo=(e,t,n)=>{const r=e.lab(),o=t.lab();return new v(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"lab")};Z.lab=Xo;const He=(e,t,n,r)=>{let o,a;r==="hsl"?(o=e.hsl(),a=t.hsl()):r==="hsv"?(o=e.hsv(),a=t.hsv()):r==="hcg"?(o=e.hcg(),a=t.hcg()):r==="hsi"?(o=e.hsi(),a=t.hsi()):r==="lch"||r==="hcl"?(r="hcl",o=e.hcl(),a=t.hcl()):r==="oklch"&&(o=e.oklch().reverse(),a=t.oklch().reverse());let s,i,l,c,u,h;(r.substr(0,1)==="h"||r==="oklch")&&([s,l,u]=o,[i,c,h]=a);let f,m,p,b;return!isNaN(s)&&!isNaN(i)?(i>s&&i-s>180?b=i-(s+360):i<s&&s-i>180?b=i+360-s:b=i-s,m=s+n*b):isNaN(s)?isNaN(i)?m=Number.NaN:(m=i,(u==1||u==0)&&r!="hsv"&&(f=c)):(m=s,(h==1||h==0)&&r!="hsv"&&(f=l)),f===void 0&&(f=l+n*(c-l)),p=u+n*(h-u),r==="oklch"?new v([p,f,m],r):new v([m,f,p],r)},Zn=(e,t,n)=>He(e,t,n,"lch");Z.lch=Zn,Z.hcl=Zn;const Wo=e=>{if(L(e)=="number"&&e>=0&&e<=16777215){const t=e>>16,n=e>>8&255,r=e&255;return[t,n,r,1]}throw new Error("unknown num color: "+e)},Uo=(...e)=>{const[t,n,r]=D(e,"rgb");return(t<<16)+(n<<8)+r};v.prototype.num=function(){return Uo(this._rgb)},Object.assign(q,{num:(...e)=>new v(...e,"num")}),R.format.num=Wo,R.autodetect.push({p:5,test:(...e)=>{if(e.length===1&&L(e[0])==="number"&&e[0]>=0&&e[0]<=16777215)return"num"}});const Vo=(e,t,n)=>{const r=e.num(),o=t.num();return new v(r+n*(o-r),"num")};Z.num=Vo;const{floor:Jo}=Math,Qo=(...e)=>{e=D(e,"hcg");let[t,n,r]=e,o,a,s;r=r*255;const i=n*255;if(n===0)o=a=s=r;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const l=Jo(t),c=t-l,u=r*(1-n),h=u+i*(1-c),f=u+i*c,m=u+i;switch(l){case 0:[o,a,s]=[m,f,u];break;case 1:[o,a,s]=[h,m,u];break;case 2:[o,a,s]=[u,m,f];break;case 3:[o,a,s]=[u,h,m];break;case 4:[o,a,s]=[f,u,m];break;case 5:[o,a,s]=[m,u,h];break}}return[o,a,s,e.length>3?e[3]:1]},ea=(...e)=>{const[t,n,r]=D(e,"rgb"),o=zn(t,n,r),a=Gn(t,n,r),s=a-o,i=s*100/255,l=o/(255-s)*100;let c;return s===0?c=Number.NaN:(t===a&&(c=(n-r)/s),n===a&&(c=2+(r-t)/s),r===a&&(c=4+(t-n)/s),c*=60,c<0&&(c+=360)),[c,i,l]};v.prototype.hcg=function(){return ea(this._rgb)};const ta=(...e)=>new v(...e,"hcg");q.hcg=ta,R.format.hcg=Qo,R.autodetect.push({p:1,test:(...e)=>{if(e=D(e,"hcg"),L(e)==="array"&&e.length===3)return"hcg"}});const na=(e,t,n)=>He(e,t,n,"hcg");Z.hcg=na;const{cos:Ie}=Math,ra=(...e)=>{e=D(e,"hsi");let[t,n,r]=e,o,a,s;return isNaN(t)&&(t=0),isNaN(n)&&(n=0),t>360&&(t-=360),t<0&&(t+=360),t/=360,t<1/3?(s=(1-n)/3,o=(1+n*Ie(me*t)/Ie(Dt-me*t))/3,a=1-(s+o)):t<2/3?(t-=1/3,o=(1-n)/3,a=(1+n*Ie(me*t)/Ie(Dt-me*t))/3,s=1-(o+a)):(t-=2/3,a=(1-n)/3,s=(1+n*Ie(me*t)/Ie(Dt-me*t))/3,o=1-(a+s)),o=Oe(r*o*3),a=Oe(r*a*3),s=Oe(r*s*3),[o*255,a*255,s*255,e.length>3?e[3]:1]},{min:oa,sqrt:aa,acos:sa}=Math,ia=(...e)=>{let[t,n,r]=D(e,"rgb");t/=255,n/=255,r/=255;let o;const a=oa(t,n,r),s=(t+n+r)/3,i=s>0?1-a/s:0;return i===0?o=NaN:(o=(t-n+(t-r))/2,o/=aa((t-n)*(t-n)+(t-r)*(n-r)),o=sa(o),r>n&&(o=me-o),o/=me),[o*360,i,s]};v.prototype.hsi=function(){return ia(this._rgb)};const la=(...e)=>new v(...e,"hsi");q.hsi=la,R.format.hsi=ra,R.autodetect.push({p:2,test:(...e)=>{if(e=D(e,"hsi"),L(e)==="array"&&e.length===3)return"hsi"}});const ca=(e,t,n)=>He(e,t,n,"hsi");Z.hsi=ca;const Kt=(...e)=>{e=D(e,"hsl");const[t,n,r]=e;let o,a,s;if(n===0)o=a=s=r*255;else{const i=[0,0,0],l=[0,0,0],c=r<.5?r*(1+n):r+n-r*n,u=2*r-c,h=t/360;i[0]=h+1/3,i[1]=h,i[2]=h-1/3;for(let f=0;f<3;f++)i[f]<0&&(i[f]+=1),i[f]>1&&(i[f]-=1),6*i[f]<1?l[f]=u+(c-u)*6*i[f]:2*i[f]<1?l[f]=c:3*i[f]<2?l[f]=u+(c-u)*(2/3-i[f])*6:l[f]=u;[o,a,s]=[l[0]*255,l[1]*255,l[2]*255]}return e.length>3?[o,a,s,e[3]]:[o,a,s,1]},Tn=(...e)=>{e=D(e,"rgba");let[t,n,r]=e;t/=255,n/=255,r/=255;const o=zn(t,n,r),a=Gn(t,n,r),s=(a+o)/2;let i,l;return a===o?(i=0,l=Number.NaN):i=s<.5?(a-o)/(a+o):(a-o)/(2-a-o),t==a?l=(n-r)/(a-o):n==a?l=2+(r-t)/(a-o):r==a&&(l=4+(t-n)/(a-o)),l*=60,l<0&&(l+=360),e.length>3&&e[3]!==void 0?[l,i,s,e[3]]:[l,i,s]};v.prototype.hsl=function(){return Tn(this._rgb)};const ua=(...e)=>new v(...e,"hsl");q.hsl=ua,R.format.hsl=Kt,R.autodetect.push({p:2,test:(...e)=>{if(e=D(e,"hsl"),L(e)==="array"&&e.length===3)return"hsl"}});const ha=(e,t,n)=>He(e,t,n,"hsl");Z.hsl=ha;const{floor:fa}=Math,da=(...e)=>{e=D(e,"hsv");let[t,n,r]=e,o,a,s;if(r*=255,n===0)o=a=s=r;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const i=fa(t),l=t-i,c=r*(1-n),u=r*(1-n*l),h=r*(1-n*(1-l));switch(i){case 0:[o,a,s]=[r,h,c];break;case 1:[o,a,s]=[u,r,c];break;case 2:[o,a,s]=[c,r,h];break;case 3:[o,a,s]=[c,u,r];break;case 4:[o,a,s]=[h,c,r];break;case 5:[o,a,s]=[r,c,u];break}}return[o,a,s,e.length>3?e[3]:1]},{min:ma,max:pa}=Math,ga=(...e)=>{e=D(e,"rgb");let[t,n,r]=e;const o=ma(t,n,r),a=pa(t,n,r),s=a-o;let i,l,c;return c=a/255,a===0?(i=Number.NaN,l=0):(l=s/a,t===a&&(i=(n-r)/s),n===a&&(i=2+(r-t)/s),r===a&&(i=4+(t-n)/s),i*=60,i<0&&(i+=360)),[i,l,c]};v.prototype.hsv=function(){return ga(this._rgb)};const ba=(...e)=>new v(...e,"hsv");q.hsv=ba,R.format.hsv=da,R.autodetect.push({p:2,test:(...e)=>{if(e=D(e,"hsv"),L(e)==="array"&&e.length===3)return"hsv"}});const Ma=(e,t,n)=>He(e,t,n,"hsv");Z.hsv=Ma;function ct(e,t){let n=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(s=>[s]));let r=t[0].length,o=t[0].map((s,i)=>t.map(l=>l[i])),a=e.map(s=>o.map(i=>Array.isArray(s)?s.reduce((l,c,u)=>l+c*(i[u]||0),0):i.reduce((l,c)=>l+c*s,0)));return n===1&&(a=a[0]),r===1?a.map(s=>s[0]):a}const jt=(...e)=>{e=D(e,"lab");const[t,n,r,...o]=e,[a,s,i]=va([t,n,r]),[l,c,u]=jn(a,s,i);return[l,c,u,...o.length>0&&o[0]<1?[o[0]]:[]]};function va(e){var t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],n=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],r=ct(n,e);return ct(t,r.map(o=>o**3))}const Bt=(...e)=>{const[t,n,r,...o]=D(e,"rgb"),a=Bn(t,n,r);return[...ya(a),...o.length>0&&o[0]<1?[o[0]]:[]]};function ya(e){const t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],n=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=ct(t,e);return ct(n,r.map(o=>Math.cbrt(o)))}v.prototype.oklab=function(){return Bt(this._rgb)},Object.assign(q,{oklab:(...e)=>new v(...e,"oklab")}),R.format.oklab=jt,R.autodetect.push({p:2,test:(...e)=>{if(e=D(e,"oklab"),L(e)==="array"&&e.length===3)return"oklab"}});const wa=(e,t,n)=>{const r=e.oklab(),o=t.oklab();return new v(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"oklab")};Z.oklab=wa;const ka=(e,t,n)=>He(e,t,n,"oklch");Z.oklch=ka;const{pow:Ft,sqrt:Yt,PI:Zt,cos:Xn,sin:Wn,atan2:Na}=Math,Aa=(e,t="lrgb",n=null)=>{const r=e.length;n||(n=Array.from(new Array(r)).map(()=>1));const o=r/n.reduce(function(h,f){return h+f});if(n.forEach((h,f)=>{n[f]*=o}),e=e.map(h=>new v(h)),t==="lrgb")return xa(e,n);const a=e.shift(),s=a.get(t),i=[];let l=0,c=0;for(let h=0;h<s.length;h++)if(s[h]=(s[h]||0)*n[0],i.push(isNaN(s[h])?0:n[0]),t.charAt(h)==="h"&&!isNaN(s[h])){const f=s[h]/180*Zt;l+=Xn(f)*n[0],c+=Wn(f)*n[0]}let u=a.alpha()*n[0];e.forEach((h,f)=>{const m=h.get(t);u+=h.alpha()*n[f+1];for(let p=0;p<s.length;p++)if(!isNaN(m[p]))if(i[p]+=n[f+1],t.charAt(p)==="h"){const b=m[p]/180*Zt;l+=Xn(b)*n[f+1],c+=Wn(b)*n[f+1]}else s[p]+=m[p]*n[f+1]});for(let h=0;h<s.length;h++)if(t.charAt(h)==="h"){let f=Na(c/i[h],l/i[h])/Zt*180;for(;f<0;)f+=360;for(;f>=360;)f-=360;s[h]=f}else s[h]=s[h]/i[h];return u/=r,new v(s,t).alpha(u>.99999?1:u,!0)},xa=(e,t)=>{const n=e.length,r=[0,0,0,0];for(let o=0;o<e.length;o++){const a=e[o],s=t[o]/n,i=a._rgb;r[0]+=Ft(i[0],2)*s,r[1]+=Ft(i[1],2)*s,r[2]+=Ft(i[2],2)*s,r[3]+=i[3]*s}return r[0]=Yt(r[0]),r[1]=Yt(r[1]),r[2]=Yt(r[2]),r[3]>.9999999&&(r[3]=1),new v(Pt(r))},{pow:_a}=Math;function ut(e){let t="rgb",n=q("#ccc"),r=0,o=[0,1],a=[0,1],s=[],i=[0,0],l=!1,c=[],u=!1,h=0,f=1,m=!1,p={},b=!0,d=1;const M=function(g){if(g=g||["#fff","#000"],g&&L(g)==="string"&&q.brewer&&q.brewer[g.toLowerCase()]&&(g=q.brewer[g.toLowerCase()]),L(g)==="array"){g.length===1&&(g=[g[0],g[0]]),g=g.slice(0);for(let N=0;N<g.length;N++)g[N]=q(g[N]);s.length=0;for(let N=0;N<g.length;N++)s.push(N/(g.length-1))}return S(),c=g},_=function(g){if(l!=null){const N=l.length-1;let x=0;for(;x<N&&g>=l[x];)x++;return x-1}return 0};let O=g=>g,P=g=>g;const $=function(g,N){let x,A;if(N==null&&(N=!1),isNaN(g)||g===null)return n;N?A=g:l&&l.length>2?A=_(g)/(l.length-2):f!==h?A=(g-h)/(f-h):A=1,A=P(A),N||(A=O(A)),d!==1&&(A=_a(A,d)),A=i[0]+A*(1-i[0]-i[1]),A=Oe(A,0,1);const k=Math.floor(A*1e4);if(b&&p[k])x=p[k];else{if(L(c)==="array")for(let w=0;w<s.length;w++){const G=s[w];if(A<=G){x=c[w];break}if(A>=G&&w===s.length-1){x=c[w];break}if(A>G&&A<s[w+1]){A=(A-G)/(s[w+1]-G),x=q.interpolate(c[w],c[w+1],A,t);break}}else L(c)==="function"&&(x=c(A));b&&(p[k]=x)}return x};var S=()=>p={};M(e);const C=function(g){const N=q($(g));return u&&N[u]?N[u]():N};return C.classes=function(g){if(g!=null){if(L(g)==="array")l=g,o=[g[0],g[g.length-1]];else{const N=q.analyze(o);g===0?l=[N.min,N.max]:l=q.limits(N,"e",g)}return C}return l},C.domain=function(g){if(!arguments.length)return a;a=g.slice(0),h=g[0],f=g[g.length-1],s=[];const N=c.length;if(g.length===N&&h!==f)for(let x of Array.from(g))s.push((x-h)/(f-h));else{for(let x=0;x<N;x++)s.push(x/(N-1));if(g.length>2){const x=g.map((k,w)=>w/(g.length-1)),A=g.map(k=>(k-h)/(f-h));A.every((k,w)=>x[w]===k)||(P=k=>{if(k<=0||k>=1)return k;let w=0;for(;k>=A[w+1];)w++;const G=(k-A[w])/(A[w+1]-A[w]);return x[w]+G*(x[w+1]-x[w])})}}return o=[h,f],C},C.mode=function(g){return arguments.length?(t=g,S(),C):t},C.range=function(g,N){return M(g),C},C.out=function(g){return u=g,C},C.spread=function(g){return arguments.length?(r=g,C):r},C.correctLightness=function(g){return g==null&&(g=!0),m=g,S(),m?O=function(N){const x=$(0,!0).lab()[0],A=$(1,!0).lab()[0],k=x>A;let w=$(N,!0).lab()[0];const G=x+(A-x)*N;let B=w-G,F=0,Y=1,U=20;for(;Math.abs(B)>.01&&U-- >0;)(function(){return k&&(B*=-1),B<0?(F=N,N+=(Y-N)*.5):(Y=N,N+=(F-N)*.5),w=$(N,!0).lab()[0],B=w-G})();return N}:O=N=>N,C},C.padding=function(g){return g!=null?(L(g)==="number"&&(g=[g,g]),i=g,C):i},C.colors=function(g,N){arguments.length<2&&(N="hex");let x=[];if(arguments.length===0)x=c.slice(0);else if(g===1)x=[C(.5)];else if(g>1){const A=o[0],k=o[1]-A;x=Ca(0,g).map(w=>C(A+w/(g-1)*k))}else{e=[];let A=[];if(l&&l.length>2)for(let k=1,w=l.length,G=1<=w;G?k<w:k>w;G?k++:k--)A.push((l[k-1]+l[k])*.5);else A=o;x=A.map(k=>C(k))}return q[N]&&(x=x.map(A=>A[N]())),x},C.cache=function(g){return g!=null?(b=g,C):b},C.gamma=function(g){return g!=null?(d=g,C):d},C.nodata=function(g){return g!=null?(n=q(g),C):n},C}function Ca(e,t,n){let r=[],o=e<t,a=t;for(let s=e;o?s<a:s>a;o?s++:s--)r.push(s);return r}const Ea=function(e){let t=[1,1];for(let n=1;n<e;n++){let r=[1];for(let o=1;o<=t.length;o++)r[o]=(t[o]||0)+t[o-1];t=r}return t},Oa=function(e){let t,n,r,o;if(e=e.map(a=>new v(a)),e.length===2)[n,r]=e.map(a=>a.lab()),t=function(a){const s=[0,1,2].map(i=>n[i]+a*(r[i]-n[i]));return new v(s,"lab")};else if(e.length===3)[n,r,o]=e.map(a=>a.lab()),t=function(a){const s=[0,1,2].map(i=>(1-a)*(1-a)*n[i]+2*(1-a)*a*r[i]+a*a*o[i]);return new v(s,"lab")};else if(e.length===4){let a;[n,r,o,a]=e.map(s=>s.lab()),t=function(s){const i=[0,1,2].map(l=>(1-s)*(1-s)*(1-s)*n[l]+3*(1-s)*(1-s)*s*r[l]+3*(1-s)*s*s*o[l]+s*s*s*a[l]);return new v(i,"lab")}}else if(e.length>=5){let a,s,i;a=e.map(l=>l.lab()),i=e.length-1,s=Ea(i),t=function(l){const c=1-l,u=[0,1,2].map(h=>a.reduce((f,m,p)=>f+s[p]*c**(i-p)*l**p*m[h],0));return new v(u,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return t},Pa=e=>{const t=Oa(e);return t.scale=()=>ut(t),t},{round:Un}=Math;v.prototype.rgb=function(e=!0){return e===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Un)},v.prototype.rgba=function(e=!0){return this._rgb.slice(0,4).map((t,n)=>n<3?e===!1?t:Un(t):t)},Object.assign(q,{rgb:(...e)=>new v(...e,"rgb")}),R.format.rgb=(...e)=>{const t=D(e,"rgba");return t[3]===void 0&&(t[3]=1),t},R.autodetect.push({p:3,test:(...e)=>{if(e=D(e,"rgba"),L(e)==="array"&&(e.length===3||e.length===4&&L(e[3])=="number"&&e[3]>=0&&e[3]<=1))return"rgb"}});const re=(e,t,n)=>{if(!re[n])throw new Error("unknown blend mode "+n);return re[n](e,t)},Ne=e=>(t,n)=>{const r=q(n).rgb(),o=q(t).rgb();return q.rgb(e(r,o))},Ae=e=>(t,n)=>{const r=[];return r[0]=e(t[0],n[0]),r[1]=e(t[1],n[1]),r[2]=e(t[2],n[2]),r},Ra=e=>e,Da=(e,t)=>e*t/255,$a=(e,t)=>e>t?t:e,Sa=(e,t)=>e>t?e:t,La=(e,t)=>255*(1-(1-e/255)*(1-t/255)),qa=(e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)),za=(e,t)=>255*(1-(1-t/255)/(e/255)),Ga=(e,t)=>e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e);re.normal=Ne(Ae(Ra)),re.multiply=Ne(Ae(Da)),re.screen=Ne(Ae(La)),re.overlay=Ne(Ae(qa)),re.darken=Ne(Ae($a)),re.lighten=Ne(Ae(Sa)),re.dodge=Ne(Ae(Ga)),re.burn=Ne(Ae(za));const{pow:Ha,sin:Ia,cos:Ka}=Math;function ja(e=300,t=-1.5,n=1,r=1,o=[0,1]){let a=0,s;L(o)==="array"?s=o[1]-o[0]:(s=0,o=[o,o]);const i=function(l){const c=me*((e+120)/360+t*l),u=Ha(o[0]+s*l,r),h=(a!==0?n[0]+l*a:n)*u*(1-u)/2,f=Ka(c),m=Ia(c),p=u+h*(-.14861*f+1.78277*m),b=u+h*(-.29227*f-.90649*m),d=u+h*(1.97294*f);return q(Pt([p*255,b*255,d*255,1]))};return i.start=function(l){return l==null?e:(e=l,i)},i.rotations=function(l){return l==null?t:(t=l,i)},i.gamma=function(l){return l==null?r:(r=l,i)},i.hue=function(l){return l==null?n:(n=l,L(n)==="array"?(a=n[1]-n[0],a===0&&(n=n[1])):a=0,i)},i.lightness=function(l){return l==null?o:(L(l)==="array"?(o=l,s=l[1]-l[0]):(o=[l,l],s=0),i)},i.scale=()=>q.scale(i),i.hue(n),i}const Ba="0123456789abcdef",{floor:Fa,random:Ya}=Math,Za=(e=Ya)=>{let t="#";for(let n=0;n<6;n++)t+=Ba.charAt(Fa(e()*16));return new v(t,"hex")},{log:Vn,pow:Ta,floor:Xa,abs:Wa}=Math;function Jn(e,t=null){const n={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return L(e)==="object"&&(e=Object.values(e)),e.forEach(r=>{t&&L(r)==="object"&&(r=r[t]),r!=null&&!isNaN(r)&&(n.values.push(r),n.sum+=r,r<n.min&&(n.min=r),r>n.max&&(n.max=r),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(r,o)=>Qn(n,r,o),n}function Qn(e,t="equal",n=7){L(e)=="array"&&(e=Jn(e));const{min:r,max:o}=e,a=e.values.sort((i,l)=>i-l);if(n===1)return[r,o];const s=[];if(t.substr(0,1)==="c"&&(s.push(r),s.push(o)),t.substr(0,1)==="e"){s.push(r);for(let i=1;i<n;i++)s.push(r+i/n*(o-r));s.push(o)}else if(t.substr(0,1)==="l"){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const i=Math.LOG10E*Vn(r),l=Math.LOG10E*Vn(o);s.push(r);for(let c=1;c<n;c++)s.push(Ta(10,i+c/n*(l-i)));s.push(o)}else if(t.substr(0,1)==="q"){s.push(r);for(let i=1;i<n;i++){const l=(a.length-1)*i/n,c=Xa(l);if(c===l)s.push(a[c]);else{const u=l-c;s.push(a[c]*(1-u)+a[c+1]*u)}}s.push(o)}else if(t.substr(0,1)==="k"){let i;const l=a.length,c=new Array(l),u=new Array(n);let h=!0,f=0,m=null;m=[],m.push(r);for(let d=1;d<n;d++)m.push(r+d/n*(o-r));for(m.push(o);h;){for(let M=0;M<n;M++)u[M]=0;for(let M=0;M<l;M++){const _=a[M];let O=Number.MAX_VALUE,P;for(let $=0;$<n;$++){const S=Wa(m[$]-_);S<O&&(O=S,P=$),u[P]++,c[M]=P}}const d=new Array(n);for(let M=0;M<n;M++)d[M]=null;for(let M=0;M<l;M++)i=c[M],d[i]===null?d[i]=a[M]:d[i]+=a[M];for(let M=0;M<n;M++)d[M]*=1/u[M];h=!1;for(let M=0;M<n;M++)if(d[M]!==m[M]){h=!0;break}m=d,f++,f>200&&(h=!1)}const p={};for(let d=0;d<n;d++)p[d]=[];for(let d=0;d<l;d++)i=c[d],p[i].push(a[d]);let b=[];for(let d=0;d<n;d++)b.push(p[d][0]),b.push(p[d][p[d].length-1]);b=b.sort((d,M)=>d-M),s.push(b[0]);for(let d=1;d<b.length;d+=2){const M=b[d];!isNaN(M)&&s.indexOf(M)===-1&&s.push(M)}}return s}const Ua=(e,t)=>{e=new v(e),t=new v(t);const n=e.luminance(),r=t.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},er=.027,Va=5e-4,Ja=.1,tr=1.14,ht=.022,nr=1.414,Qa=(e,t)=>{e=new v(e),t=new v(t),e.alpha()<1&&(e=ze(t,e,e.alpha(),"rgb"));const n=rr(...e.rgb()),r=rr(...t.rgb()),o=n>=ht?n:n+Math.pow(ht-n,nr),a=r>=ht?r:r+Math.pow(ht-r,nr),s=Math.pow(a,.56)-Math.pow(o,.57),i=Math.pow(a,.65)-Math.pow(o,.62),l=Math.abs(a-o)<Va?0:o<a?s*tr:i*tr;return(Math.abs(l)<Ja?0:l>0?l-er:l+er)*100};function rr(e,t,n){return .2126729*Math.pow(e/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(n/255,2.4)}const{sqrt:ge,pow:I,min:e0,max:t0,atan2:or,abs:ar,cos:ft,sin:sr,exp:n0,PI:ir}=Math;function r0(e,t,n=1,r=1,o=1){var a=function(ee){return 360*ee/(2*ir)},s=function(ee){return 2*ir*ee/360};e=new v(e),t=new v(t);const[i,l,c]=Array.from(e.lab()),[u,h,f]=Array.from(t.lab()),m=(i+u)/2,p=ge(I(l,2)+I(c,2)),b=ge(I(h,2)+I(f,2)),d=(p+b)/2,M=.5*(1-ge(I(d,7)/(I(d,7)+I(25,7)))),_=l*(1+M),O=h*(1+M),P=ge(I(_,2)+I(c,2)),$=ge(I(O,2)+I(f,2)),S=(P+$)/2,C=a(or(c,_)),g=a(or(f,O)),N=C>=0?C:C+360,x=g>=0?g:g+360,A=ar(N-x)>180?(N+x+360)/2:(N+x)/2,k=1-.17*ft(s(A-30))+.24*ft(s(2*A))+.32*ft(s(3*A+6))-.2*ft(s(4*A-63));let w=x-N;w=ar(w)<=180?w:x<=N?w+360:w-360,w=2*ge(P*$)*sr(s(w)/2);const G=u-i,B=$-P,F=1+.015*I(m-50,2)/ge(20+I(m-50,2)),Y=1+.045*S,U=1+.015*S*k,V=30*n0(-I((A-275)/25,2)),Q=-(2*ge(I(S,7)/(I(S,7)+I(25,7))))*sr(2*s(V)),fe=ge(I(G/(n*F),2)+I(B/(r*Y),2)+I(w/(o*U),2)+Q*(B/(r*Y))*(w/(o*U)));return t0(0,e0(100,fe))}function o0(e,t,n="lab"){e=new v(e),t=new v(t);const r=e.get(n),o=t.get(n);let a=0;for(let s in r){const i=(r[s]||0)-(o[s]||0);a+=i*i}return Math.sqrt(a)}const a0=(...e)=>{try{return new v(...e),!0}catch{return!1}},s0={cool(){return ut([q.hsl(180,1,.9),q.hsl(250,.7,.4)])},hot(){return ut(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Tt={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},lr=Object.keys(Tt),cr=new Map(lr.map(e=>[e.toLowerCase(),e])),i0=typeof Proxy=="function"?new Proxy(Tt,{get(e,t){const n=t.toLowerCase();if(cr.has(n))return e[cr.get(n)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(lr)}}):Tt,l0=(...e)=>{e=D(e,"cmyk");const[t,n,r,o]=e,a=e.length>4?e[4]:1;return o===1?[0,0,0,a]:[t>=1?0:255*(1-t)*(1-o),n>=1?0:255*(1-n)*(1-o),r>=1?0:255*(1-r)*(1-o),a]},{max:ur}=Math,c0=(...e)=>{let[t,n,r]=D(e,"rgb");t=t/255,n=n/255,r=r/255;const o=1-ur(t,ur(n,r)),a=o<1?1/(1-o):0,s=(1-t-o)*a,i=(1-n-o)*a,l=(1-r-o)*a;return[s,i,l,o]};v.prototype.cmyk=function(){return c0(this._rgb)},Object.assign(q,{cmyk:(...e)=>new v(...e,"cmyk")}),R.format.cmyk=l0,R.autodetect.push({p:2,test:(...e)=>{if(e=D(e,"cmyk"),L(e)==="array"&&e.length===4)return"cmyk"}});const u0=(...e)=>{const t=D(e,"hsla");let n=Le(e)||"lsa";return t[0]=te(t[0]||0)+"deg",t[1]=te(t[1]*100)+"%",t[2]=te(t[2]*100)+"%",n==="hsla"||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),n="hsla"):t.length=3,`${n.substr(0,3)}(${t.join(" ")})`},h0=(...e)=>{const t=D(e,"lab");let n=Le(e)||"lab";return t[0]=te(t[0])+"%",t[1]=te(t[1]),t[2]=te(t[2]),n==="laba"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`},f0=(...e)=>{const t=D(e,"lch");let n=Le(e)||"lab";return t[0]=te(t[0])+"%",t[1]=te(t[1]),t[2]=isNaN(t[2])?"none":te(t[2])+"deg",n==="lcha"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`},d0=(...e)=>{const t=D(e,"lab");return t[0]=te(t[0]*100)+"%",t[1]=Rt(t[1]),t[2]=Rt(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`},hr=(...e)=>{const[t,n,r,...o]=D(e,"rgb"),[a,s,i]=Bt(t,n,r),[l,c,u]=Yn(a,s,i);return[l,c,u,...o.length>0&&o[0]<1?[o[0]]:[]]},m0=(...e)=>{const t=D(e,"lch");return t[0]=te(t[0]*100)+"%",t[1]=Rt(t[1]),t[2]=isNaN(t[2])?"none":te(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`},{round:Xt}=Math,p0=(...e)=>{const t=D(e,"rgba");let n=Le(e)||"rgb";if(n.substr(0,3)==="hsl")return u0(Tn(t),n);if(n.substr(0,3)==="lab"){const r=Ve();pe("d50");const o=h0(Lt(t),n);return pe(r),o}if(n.substr(0,3)==="lch"){const r=Ve();pe("d50");const o=f0(Ht(t),n);return pe(r),o}return n.substr(0,5)==="oklab"?d0(Bt(t)):n.substr(0,5)==="oklch"?m0(hr(t)):(t[0]=Xt(t[0]),t[1]=Xt(t[1]),t[2]=Xt(t[2]),(n==="rgba"||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),n="rgba"),`${n.substr(0,3)}(${t.slice(0,n==="rgb"?3:4).join(" ")})`)},fr=(...e)=>{e=D(e,"lch");const[t,n,r,...o]=e,[a,s,i]=Fn(t,n,r),[l,c,u]=jt(a,s,i);return[l,c,u,...o.length>0&&o[0]<1?[o[0]]:[]]},be=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,oe=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,dt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,ne=/\s*/.source,Ke=/\s+/.source,Wt=/\s*,\s*/.source,mt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,je=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,dr=new RegExp("^rgba?\\("+ne+[be,be,be].join(Ke)+je+"\\)$"),mr=new RegExp("^rgb\\("+ne+[be,be,be].join(Wt)+ne+"\\)$"),pr=new RegExp("^rgba\\("+ne+[be,be,be,oe].join(Wt)+ne+"\\)$"),gr=new RegExp("^hsla?\\("+ne+[mt,dt,dt].join(Ke)+je+"\\)$"),br=new RegExp("^hsl?\\("+ne+[mt,dt,dt].join(Wt)+ne+"\\)$"),Mr=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,vr=new RegExp("^lab\\("+ne+[oe,oe,oe].join(Ke)+je+"\\)$"),yr=new RegExp("^lch\\("+ne+[oe,oe,mt].join(Ke)+je+"\\)$"),wr=new RegExp("^oklab\\("+ne+[oe,oe,oe].join(Ke)+je+"\\)$"),kr=new RegExp("^oklch\\("+ne+[oe,oe,mt].join(Ke)+je+"\\)$"),{round:Nr}=Math,Be=e=>e.map((t,n)=>n<=2?Oe(Nr(t),0,255):t),K=(e,t=0,n=100,r=!1)=>(typeof e=="string"&&e.endsWith("%")&&(e=parseFloat(e.substring(0,e.length-1))/100,r?e=t+(e+1)*.5*(n-t):e=t+e*(n-t)),+e),T=(e,t)=>e==="none"?t:e,Ut=e=>{if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];let t;if(R.format.named)try{return R.format.named(e)}catch{}if((t=e.match(dr))||(t=e.match(mr))){let n=t.slice(1,4);for(let o=0;o<3;o++)n[o]=+K(T(n[o],0),0,255);n=Be(n);const r=t[4]!==void 0?+K(t[4],0,1):1;return n[3]=r,n}if(t=e.match(pr)){const n=t.slice(1,5);for(let r=0;r<4;r++)n[r]=+K(n[r],0,255);return n}if((t=e.match(gr))||(t=e.match(br))){const n=t.slice(1,4);n[0]=+T(n[0].replace("deg",""),0),n[1]=+K(T(n[1],0),0,100)*.01,n[2]=+K(T(n[2],0),0,100)*.01;const r=Be(Kt(n)),o=t[4]!==void 0?+K(t[4],0,1):1;return r[3]=o,r}if(t=e.match(Mr)){const n=t.slice(1,4);n[1]*=.01,n[2]*=.01;const r=Kt(n);for(let o=0;o<3;o++)r[o]=Nr(r[o]);return r[3]=+t[4],r}if(t=e.match(vr)){const n=t.slice(1,4);n[0]=K(T(n[0],0),0,100),n[1]=K(T(n[1],0),-125,125,!0),n[2]=K(T(n[2],0),-125,125,!0);const r=Ve();pe("d50");const o=Be($t(n));pe(r);const a=t[4]!==void 0?+K(t[4],0,1):1;return o[3]=a,o}if(t=e.match(yr)){const n=t.slice(1,4);n[0]=K(n[0],0,100),n[1]=K(T(n[1],0),0,150,!1),n[2]=+T(n[2].replace("deg",""),0);const r=Ve();pe("d50");const o=Be(Gt(n));pe(r);const a=t[4]!==void 0?+K(t[4],0,1):1;return o[3]=a,o}if(t=e.match(wr)){const n=t.slice(1,4);n[0]=K(T(n[0],0),0,1),n[1]=K(T(n[1],0),-.4,.4,!0),n[2]=K(T(n[2],0),-.4,.4,!0);const r=Be(jt(n)),o=t[4]!==void 0?+K(t[4],0,1):1;return r[3]=o,r}if(t=e.match(kr)){const n=t.slice(1,4);n[0]=K(T(n[0],0),0,1),n[1]=K(T(n[1],0),0,.4,!1),n[2]=+T(n[2].replace("deg",""),0);const r=Be(fr(n)),o=t[4]!==void 0?+K(t[4],0,1):1;return r[3]=o,r}};Ut.test=e=>dr.test(e)||gr.test(e)||vr.test(e)||yr.test(e)||wr.test(e)||kr.test(e)||mr.test(e)||pr.test(e)||br.test(e)||Mr.test(e)||e==="transparent",v.prototype.css=function(e){return p0(this._rgb,e)};const g0=(...e)=>new v(...e,"css");q.css=g0,R.format.css=Ut,R.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&L(e)==="string"&&Ut.test(e))return"css"}}),R.format.gl=(...e)=>{const t=D(e,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t};const b0=(...e)=>new v(...e,"gl");q.gl=b0,v.prototype.gl=function(){const e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]},v.prototype.hex=function(e){return Kn(this._rgb,e)};const M0=(...e)=>new v(...e,"hex");q.hex=M0,R.format.hex=In,R.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&L(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});const{log:pt}=Math,Ar=e=>{const t=e/100;let n,r,o;return t<66?(n=255,r=t<6?0:-155.25485562709179-.44596950469579133*(r=t-2)+104.49216199393888*pt(r),o=t<20?0:-254.76935184120902+.8274096064007395*(o=t-10)+115.67994401066147*pt(o)):(n=351.97690566805693+.114206453784165*(n=t-55)-40.25366309332127*pt(n),r=325.4494125711974+.07943456536662342*(r=t-50)-28.0852963507957*pt(r),o=255),[n,r,o,1]},{round:v0}=Math,y0=(...e)=>{const t=D(e,"rgb"),n=t[0],r=t[2];let o=1e3,a=4e4;const s=.4;let i;for(;a-o>s;){i=(a+o)*.5;const l=Ar(i);l[2]/l[0]>=r/n?a=i:o=i}return v0(i)};v.prototype.temp=v.prototype.kelvin=v.prototype.temperature=function(){return y0(this._rgb)};const Vt=(...e)=>new v(...e,"temp");Object.assign(q,{temp:Vt,kelvin:Vt,temperature:Vt}),R.format.temp=R.format.kelvin=R.format.temperature=Ar,v.prototype.oklch=function(){return hr(this._rgb)},Object.assign(q,{oklch:(...e)=>new v(...e,"oklch")}),R.format.oklch=fr,R.autodetect.push({p:2,test:(...e)=>{if(e=D(e,"oklch"),L(e)==="array"&&e.length===3)return"oklch"}}),Object.assign(q,{analyze:Jn,average:Aa,bezier:Pa,blend:re,brewer:i0,Color:v,colors:qe,contrast:Ua,contrastAPCA:Qa,cubehelix:ja,deltaE:r0,distance:o0,input:R,interpolate:ze,limits:Qn,mix:ze,random:Za,scale:ut,scales:s0,valid:a0});const xr=(e,t)=>{if(typeof e=="number"){if(t===3)return{mode:"rgb",r:(e>>8&15|e>>4&240)/255,g:(e>>4&15|e&240)/255,b:(e&15|e<<4&240)/255};if(t===4)return{mode:"rgb",r:(e>>12&15|e>>8&240)/255,g:(e>>8&15|e>>4&240)/255,b:(e>>4&15|e&240)/255,alpha:(e&15|e<<4&240)/255};if(t===6)return{mode:"rgb",r:(e>>16&255)/255,g:(e>>8&255)/255,b:(e&255)/255};if(t===8)return{mode:"rgb",r:(e>>24&255)/255,g:(e>>16&255)/255,b:(e>>8&255)/255,alpha:(e&255)/255}}},w0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},k0=e=>xr(w0[e.toLowerCase()],6),N0=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,A0=e=>{let t;return(t=e.match(N0))?xr(parseInt(t[1],16),t[1].length):void 0},xe="([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)",Je=`${xe}%`,Jt=`(?:${xe}%|${xe})`,x0=`(?:${xe}(deg|grad|rad|turn)|${xe})`,Fe="\\s*,\\s*",_0=new RegExp(`^rgba?\\(\\s*${xe}${Fe}${xe}${Fe}${xe}\\s*(?:,\\s*${Jt}\\s*)?\\)$`),C0=new RegExp(`^rgba?\\(\\s*${Je}${Fe}${Je}${Fe}${Je}\\s*(?:,\\s*${Jt}\\s*)?\\)$`),E0=e=>{let t={mode:"rgb"},n;if(n=e.match(_0))n[1]!==void 0&&(t.r=n[1]/255),n[2]!==void 0&&(t.g=n[2]/255),n[3]!==void 0&&(t.b=n[3]/255);else if(n=e.match(C0))n[1]!==void 0&&(t.r=n[1]/100),n[2]!==void 0&&(t.g=n[2]/100),n[3]!==void 0&&(t.b=n[3]/100);else return;return n[4]!==void 0?t.alpha=Math.max(0,Math.min(1,n[4]/100)):n[5]!==void 0&&(t.alpha=Math.max(0,Math.min(1,+n[5]))),t},O0=(e,t)=>e===void 0?void 0:typeof e!="object"?I0(e):e.mode!==void 0?e:t?{...e,mode:t}:void 0,P0=(e="rgb")=>t=>(t=O0(t,e))!==void 0?t.mode===e?t:ce[t.mode][e]?ce[t.mode][e](t):e==="rgb"?ce[t.mode].rgb(t):ce.rgb[e](ce[t.mode].rgb(t)):void 0,ce={},_r={},gt=[],Cr={},R0=e=>e,Me=e=>(ce[e.mode]={...ce[e.mode],...e.toMode},Object.keys(e.fromMode||{}).forEach(t=>{ce[t]||(ce[t]={}),ce[t][e.mode]=e.fromMode[t]}),e.ranges||(e.ranges={}),e.difference||(e.difference={}),e.channels.forEach(t=>{if(e.ranges[t]===void 0&&(e.ranges[t]=[0,1]),!e.interpolate[t])throw new Error(`Missing interpolator for: ${t}`);typeof e.interpolate[t]=="function"&&(e.interpolate[t]={use:e.interpolate[t]}),e.interpolate[t].fixup||(e.interpolate[t].fixup=R0)}),_r[e.mode]=e,(e.parse||[]).forEach(t=>{$0(t,e.mode)}),P0(e.mode)),D0=e=>_r[e],$0=(e,t)=>{if(typeof e=="string"){if(!t)throw new Error("'mode' required when 'parser' is a string");Cr[e]=t}else typeof e=="function"&&gt.indexOf(e)<0&&gt.push(e)},Qt=/[^\x00-\x7F]|[a-zA-Z_]/,S0=/[^\x00-\x7F]|[-\w]/,y={Function:"function",Ident:"ident",Number:"number",Percentage:"percentage",ParenClose:")",None:"none",Hue:"hue",Alpha:"alpha"};let E=0;function bt(e){let t=e[E],n=e[E+1];return t==="-"||t==="+"?/\d/.test(n)||n==="."&&/\d/.test(e[E+2]):t==="."?/\d/.test(n):/\d/.test(t)}function en(e){if(E>=e.length)return!1;let t=e[E];if(Qt.test(t))return!0;if(t==="-"){if(e.length-E<2)return!1;let n=e[E+1];return!!(n==="-"||Qt.test(n))}return!1}const L0={deg:1,rad:180/Math.PI,grad:9/10,turn:360};function Qe(e){let t="";if((e[E]==="-"||e[E]==="+")&&(t+=e[E++]),t+=Mt(e),e[E]==="."&&/\d/.test(e[E+1])&&(t+=e[E++]+Mt(e)),(e[E]==="e"||e[E]==="E")&&((e[E+1]==="-"||e[E+1]==="+")&&/\d/.test(e[E+2])?t+=e[E++]+e[E++]+Mt(e):/\d/.test(e[E+1])&&(t+=e[E++]+Mt(e))),en(e)){let n=vt(e);return n==="deg"||n==="rad"||n==="turn"||n==="grad"?{type:y.Hue,value:t*L0[n]}:void 0}return e[E]==="%"?(E++,{type:y.Percentage,value:+t}):{type:y.Number,value:+t}}function Mt(e){let t="";for(;/\d/.test(e[E]);)t+=e[E++];return t}function vt(e){let t="";for(;E<e.length&&S0.test(e[E]);)t+=e[E++];return t}function q0(e){let t=vt(e);return e[E]==="("?(E++,{type:y.Function,value:t}):t==="none"?{type:y.None,value:void 0}:{type:y.Ident,value:t}}function z0(e=""){let t=e.trim(),n=[],r;for(E=0;E<t.length;){if(r=t[E++],r===`
`||r==="	"||r===" "){for(;E<t.length&&(t[E]===`
`||t[E]==="	"||t[E]===" ");)E++;continue}if(r===",")return;if(r===")"){n.push({type:y.ParenClose});continue}if(r==="+"){if(E--,bt(t)){n.push(Qe(t));continue}return}if(r==="-"){if(E--,bt(t)){n.push(Qe(t));continue}if(en(t)){n.push({type:y.Ident,value:vt(t)});continue}return}if(r==="."){if(E--,bt(t)){n.push(Qe(t));continue}return}if(r==="/"){for(;E<t.length&&(t[E]===`
`||t[E]==="	"||t[E]===" ");)E++;let o;if(bt(t)&&(o=Qe(t),o.type!==y.Hue)){n.push({type:y.Alpha,value:o});continue}if(en(t)&&vt(t)==="none"){n.push({type:y.Alpha,value:{type:y.None,value:void 0}});continue}return}if(/\d/.test(r)){E--,n.push(Qe(t));continue}if(Qt.test(r)){E--,n.push(q0(t));continue}return}return n}function G0(e){e._i=0;let t=e[e._i++];if(!t||t.type!==y.Function||t.value!=="color"||(t=e[e._i++],t.type!==y.Ident))return;const n=Cr[t.value];if(!n)return;const r={mode:n},o=Er(e,!1);if(!o)return;const a=D0(n).channels;for(let s=0,i,l;s<a.length;s++)i=o[s],l=a[s],i.type!==y.None&&(r[l]=i.type===y.Number?i.value:i.value/100,l==="alpha"&&(r[l]=Math.max(0,Math.min(1,r[l]))));return r}function Er(e,t){const n=[];let r;for(;e._i<e.length;){if(r=e[e._i++],r.type===y.None||r.type===y.Number||r.type===y.Alpha||r.type===y.Percentage||t&&r.type===y.Hue){n.push(r);continue}if(r.type===y.ParenClose){if(e._i<e.length)return;continue}return}if(!(n.length<3||n.length>4)){if(n.length===4){if(n[3].type!==y.Alpha)return;n[3]=n[3].value}return n.length===3&&n.push({type:y.None,value:void 0}),n.every(o=>o.type!==y.Alpha)?n:void 0}}function H0(e,t){e._i=0;let n=e[e._i++];if(!n||n.type!==y.Function)return;let r=Er(e,t);if(r)return r.unshift(n.value),r}const I0=e=>{if(typeof e!="string")return;const t=z0(e),n=t?H0(t,!0):void 0;let r,o=0,a=gt.length;for(;o<a;)if((r=gt[o++](e,n))!==void 0)return r;return t?G0(t):void 0};function K0(e,t){if(!t||t[0]!=="rgb"&&t[0]!=="rgba")return;const n={mode:"rgb"},[,r,o,a,s]=t;if(!(r.type===y.Hue||o.type===y.Hue||a.type===y.Hue))return r.type!==y.None&&(n.r=r.type===y.Number?r.value/255:r.value/100),o.type!==y.None&&(n.g=o.type===y.Number?o.value/255:o.value/100),a.type!==y.None&&(n.b=a.type===y.Number?a.value/255:a.value/100),s.type!==y.None&&(n.alpha=Math.min(1,Math.max(0,s.type===y.Number?s.value:s.value/100))),n}const j0=e=>e==="transparent"?{mode:"rgb",r:0,g:0,b:0,alpha:0}:void 0,B0=(e,t,n)=>e+n*(t-e),F0=e=>{let t=[];for(let n=0;n<e.length-1;n++){let r=e[n],o=e[n+1];r===void 0&&o===void 0?t.push(void 0):r!==void 0&&o!==void 0?t.push([r,o]):t.push(r!==void 0?[r,r]:[o,o])}return t},Y0=e=>t=>{let n=F0(t);return r=>{let o=r*n.length,a=r>=1?n.length-1:Math.max(Math.floor(o),0),s=n[a];return s===void 0?void 0:e(s[0],s[1],o-a)}},j=Y0(B0),et=e=>{let t=!1,n=e.map(r=>r!==void 0?(t=!0,r):1);return t?n:e},Z0={mode:"rgb",channels:["r","g","b","alpha"],parse:[K0,A0,E0,k0,j0,"srgb"],serialize:"srgb",interpolate:{r:j,g:j,b:j,alpha:{use:j,fixup:et}},gamut:!0,white:{r:1,g:1,b:1},black:{r:0,g:0,b:0}},tn=(e=0)=>{const t=Math.abs(e);return t<=.04045?e/12.92:(Math.sign(e)||1)*Math.pow((t+.055)/1.055,2.4)},Or=({r:e,g:t,b:n,alpha:r})=>{let o={mode:"lrgb",r:tn(e),g:tn(t),b:tn(n)};return r!==void 0&&(o.alpha=r),o},nn=(e=0)=>{const t=Math.abs(e);return t>.0031308?(Math.sign(e)||1)*(1.055*Math.pow(t,1/2.4)-.055):e*12.92},Pr=({r:e,g:t,b:n,alpha:r},o="rgb")=>{let a={mode:o,r:nn(e),g:nn(t),b:nn(n)};return r!==void 0&&(a.alpha=r),a},ae=e=>(e=e%360)<0?e+360:e,T0=(e,t)=>e.map((n,r,o)=>{if(n===void 0)return n;let a=ae(n);return r===0||e[r-1]===void 0?a:t(a-ae(o[r-1]))}).reduce((n,r)=>!n.length||r===void 0||n[n.length-1]===void 0?(n.push(r),n):(n.push(r+n[n.length-1]),n),[]),rn=e=>T0(e,t=>Math.abs(t)<=180?t:t-360*Math.sign(t)),Rr=(e,t)=>{if(e.h===void 0||t.h===void 0||!e.s||!t.s)return 0;let n=ae(e.h),r=ae(t.h),o=Math.sin((r-n+360)/2*Math.PI/180);return 2*Math.sqrt(e.s*t.s)*o},X0=(e,t)=>{if(e.h===void 0||t.h===void 0||!e.c||!t.c)return 0;let n=ae(e.h),r=ae(t.h),o=Math.sin((r-n+360)/2*Math.PI/180);return 2*Math.sqrt(e.c*t.c)*o},on=e=>{let t=e.reduce((r,o)=>{if(o!==void 0){let a=o*Math.PI/180;r.sin+=Math.sin(a),r.cos+=Math.cos(a)}return r},{sin:0,cos:0}),n=Math.atan2(t.sin,t.cos)*180/Math.PI;return n<0?360+n:n},yt=({l:e,a:t,b:n,alpha:r},o="lch")=>{t===void 0&&(t=0),n===void 0&&(n=0);let a=Math.sqrt(t*t+n*n),s={mode:o,l:e,c:a};return a&&(s.h=ae(Math.atan2(n,t)*180/Math.PI)),r!==void 0&&(s.alpha=r),s},wt=({l:e,c:t,h:n,alpha:r},o="lab")=>{n===void 0&&(n=0);let a={mode:o,l:e,a:t?t*Math.cos(n/180*Math.PI):0,b:t?t*Math.sin(n/180*Math.PI):0};return r!==void 0&&(a.alpha=r),a},Ye={X:.3457/.3585,Y:1,Z:(1-.3457-.3585)/.3585};function W0({h:e,s:t,l:n,alpha:r}){e=ae(e!==void 0?e:0),t===void 0&&(t=0),n===void 0&&(n=0);let o=n+t*(n<.5?n:1-n),a=o-(o-n)*2*Math.abs(e/60%2-1),s;switch(Math.floor(e/60)){case 0:s={r:o,g:a,b:2*n-o};break;case 1:s={r:a,g:o,b:2*n-o};break;case 2:s={r:2*n-o,g:o,b:a};break;case 3:s={r:2*n-o,g:a,b:o};break;case 4:s={r:a,g:2*n-o,b:o};break;case 5:s={r:o,g:2*n-o,b:a};break;default:s={r:2*n-o,g:2*n-o,b:2*n-o}}return s.mode="rgb",r!==void 0&&(s.alpha=r),s}function U0({r:e,g:t,b:n,alpha:r}){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let o=Math.max(e,t,n),a=Math.min(e,t,n),s={mode:"hsl",s:o===a?0:(o-a)/(1-Math.abs(o+a-1)),l:.5*(o+a)};return o-a!==0&&(s.h=(o===e?(t-n)/(o-a)+(t<n)*6:o===t?(n-e)/(o-a)+2:(e-t)/(o-a)+4)*60),r!==void 0&&(s.alpha=r),s}const V0=(e,t)=>{switch(t){case"deg":return+e;case"rad":return e/Math.PI*180;case"grad":return e/10*9;case"turn":return e*360}},J0=new RegExp(`^hsla?\\(\\s*${x0}${Fe}${Je}${Fe}${Je}\\s*(?:,\\s*${Jt}\\s*)?\\)$`),Q0=e=>{let t=e.match(J0);if(!t)return;let n={mode:"hsl"};return t[3]!==void 0?n.h=+t[3]:t[1]!==void 0&&t[2]!==void 0&&(n.h=V0(t[1],t[2])),t[4]!==void 0&&(n.s=Math.min(Math.max(0,t[4]/100),1)),t[5]!==void 0&&(n.l=Math.min(Math.max(0,t[5]/100),1)),t[6]!==void 0?n.alpha=Math.max(0,Math.min(1,t[6]/100)):t[7]!==void 0&&(n.alpha=Math.max(0,Math.min(1,+t[7]))),n};function es(e,t){if(!t||t[0]!=="hsl"&&t[0]!=="hsla")return;const n={mode:"hsl"},[,r,o,a,s]=t;if(r.type!==y.None){if(r.type===y.Percentage)return;n.h=r.value}if(o.type!==y.None){if(o.type===y.Hue)return;n.s=o.value/100}if(a.type!==y.None){if(a.type===y.Hue)return;n.l=a.value/100}return s.type!==y.None&&(n.alpha=Math.min(1,Math.max(0,s.type===y.Number?s.value:s.value/100))),n}const Dr={mode:"hsl",toMode:{rgb:W0},fromMode:{rgb:U0},channels:["h","s","l","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[es,Q0],serialize:e=>`hsl(${e.h!==void 0?e.h:"none"} ${e.s!==void 0?e.s*100+"%":"none"} ${e.l!==void 0?e.l*100+"%":"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:j,fixup:rn},s:j,l:j,alpha:{use:j,fixup:et}},difference:{h:Rr},average:{h:on}};function ts({h:e,s:t,v:n,alpha:r}){e=ae(e!==void 0?e:0),t===void 0&&(t=0),n===void 0&&(n=0);let o=Math.abs(e/60%2-1),a;switch(Math.floor(e/60)){case 0:a={r:n,g:n*(1-t*o),b:n*(1-t)};break;case 1:a={r:n*(1-t*o),g:n,b:n*(1-t)};break;case 2:a={r:n*(1-t),g:n,b:n*(1-t*o)};break;case 3:a={r:n*(1-t),g:n*(1-t*o),b:n};break;case 4:a={r:n*(1-t*o),g:n*(1-t),b:n};break;case 5:a={r:n,g:n*(1-t),b:n*(1-t*o)};break;default:a={r:n*(1-t),g:n*(1-t),b:n*(1-t)}}return a.mode="rgb",r!==void 0&&(a.alpha=r),a}function ns({r:e,g:t,b:n,alpha:r}){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let o=Math.max(e,t,n),a=Math.min(e,t,n),s={mode:"hsv",s:o===0?0:1-a/o,v:o};return o-a!==0&&(s.h=(o===e?(t-n)/(o-a)+(t<n)*6:o===t?(n-e)/(o-a)+2:(e-t)/(o-a)+4)*60),r!==void 0&&(s.alpha=r),s}const $r={mode:"hsv",toMode:{rgb:ts},parse:["--hsv"],serialize:"--hsv",fromMode:{rgb:ns},channels:["h","s","v","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:j,fixup:rn},s:j,v:j,alpha:{use:j,fixup:et}},difference:{h:Rr},average:{h:on}},Sr=Math.pow(29,3)/Math.pow(3,3),Lr=Math.pow(6,3)/Math.pow(29,3);let an=e=>Math.pow(e,3)>Lr?Math.pow(e,3):(116*e-16)/Sr;const qr=({l:e,a:t,b:n,alpha:r})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let o=(e+16)/116,a=t/500+o,s=o-n/200,i={mode:"xyz50",x:an(a)*Ye.X,y:an(o)*Ye.Y,z:an(s)*Ye.Z};return r!==void 0&&(i.alpha=r),i},rs=({x:e,y:t,z:n,alpha:r})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let o=Pr({r:e*3.1341359569958707-t*1.6173863321612538-.4906619460083532*n,g:e*-.978795502912089+t*1.916254567259524+.03344273116131949*n,b:e*.07195537988411677-t*.2289768264158322+1.405386058324125*n});return r!==void 0&&(o.alpha=r),o},zr=e=>rs(qr(e)),os=e=>{let{r:t,g:n,b:r,alpha:o}=Or(e),a={mode:"xyz50",x:.436065742824811*t+.3851514688337912*n+.14307845442264197*r,y:.22249319175623702*t+.7168870538238823*n+.06061979053616537*r,z:.013923904500943465*t+.09708128566574634*n+.7140993584005155*r};return o!==void 0&&(a.alpha=o),a},sn=e=>e>Lr?Math.cbrt(e):(Sr*e+16)/116,Gr=({x:e,y:t,z:n,alpha:r})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let o=sn(e/Ye.X),a=sn(t/Ye.Y),s=sn(n/Ye.Z),i={mode:"lab",l:116*a-16,a:500*(o-a),b:200*(a-s)};return r!==void 0&&(i.alpha=r),i},Hr=e=>{let t=Gr(os(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t};function as(e,t){if(!t||t[0]!=="lab")return;const n={mode:"lab"},[,r,o,a,s]=t;if(!(r.type===y.Hue||o.type===y.Hue||a.type===y.Hue))return r.type!==y.None&&(n.l=Math.min(Math.max(0,r.value),100)),o.type!==y.None&&(n.a=o.type===y.Number?o.value:o.value*125/100),a.type!==y.None&&(n.b=a.type===y.Number?a.value:a.value*125/100),s.type!==y.None&&(n.alpha=Math.min(1,Math.max(0,s.type===y.Number?s.value:s.value/100))),n}const Ir={mode:"lab",toMode:{xyz50:qr,rgb:zr},fromMode:{xyz50:Gr,rgb:Hr},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-125,125],b:[-125,125]},parse:[as],serialize:e=>`lab(${e.l!==void 0?e.l:"none"} ${e.a!==void 0?e.a:"none"} ${e.b!==void 0?e.b:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{l:j,a:j,b:j,alpha:{use:j,fixup:et}}};function ss(e,t){if(!t||t[0]!=="lch")return;const n={mode:"lch"},[,r,o,a,s]=t;if(r.type!==y.None){if(r.type===y.Hue)return;n.l=Math.min(Math.max(0,r.value),100)}if(o.type!==y.None&&(n.c=Math.max(0,o.type===y.Number?o.value:o.value*150/100)),a.type!==y.None){if(a.type===y.Percentage)return;n.h=a.value}return s.type!==y.None&&(n.alpha=Math.min(1,Math.max(0,s.type===y.Number?s.value:s.value/100))),n}const Kr={mode:"lch",toMode:{lab:wt,rgb:e=>zr(wt(e))},fromMode:{rgb:e=>yt(Hr(e)),lab:yt},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,150],h:[0,360]},parse:[ss],serialize:e=>`lch(${e.l!==void 0?e.l:"none"} ${e.c!==void 0?e.c:"none"} ${e.h!==void 0?e.h:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:j,fixup:rn},c:j,l:j,alpha:{use:j,fixup:et}},difference:{h:X0},average:{h:on}},jr=({r:e,g:t,b:n,alpha:r})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let o=Math.cbrt(.412221469470763*e+.5363325372617348*t+.0514459932675022*n),a=Math.cbrt(.2119034958178252*e+.6806995506452344*t+.1073969535369406*n),s=Math.cbrt(.0883024591900564*e+.2817188391361215*t+.6299787016738222*n),i={mode:"oklab",l:.210454268309314*o+.7936177747023054*a-.0040720430116193*s,a:1.9779985324311684*o-2.42859224204858*a+.450593709617411*s,b:.0259040424655478*o+.7827717124575296*a-.8086757549230774*s};return r!==void 0&&(i.alpha=r),i},kt=e=>{let t=jr(Or(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},tt=({l:e,a:t,b:n,alpha:r})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let o=Math.pow(e+.3963377773761749*t+.2158037573099136*n,3),a=Math.pow(e-.1055613458156586*t-.0638541728258133*n,3),s=Math.pow(e-.0894841775298119*t-1.2914855480194092*n,3),i={mode:"lrgb",r:4.076741636075957*o-3.3077115392580616*a+.2309699031821044*s,g:-1.2684379732850317*o+2.6097573492876887*a-.3413193760026573*s,b:-.0041960761386756*o-.7034186179359362*a+1.7076146940746117*s};return r!==void 0&&(i.alpha=r),i},Nt=e=>Pr(tt(e));function ln(e){const t=1.170873786407767;return .5*(t*e-.206+Math.sqrt((t*e-.206)*(t*e-.206)+4*.03*t*e))}function At(e){return(e*e+.206*e)/(1.170873786407767*(e+.03))}function is(e,t){let n,r,o,a,s,i,l,c;-1.88170328*e-.80936493*t>1?(n=1.19086277,r=1.76576728,o=.59662641,a=.75515197,s=.56771245,i=4.0767416621,l=-3.3077115913,c=.2309699292):1.81444104*e-1.19445276*t>1?(n=.73956515,r=-.45954404,o=.08285427,a=.1254107,s=.14503204,i=-1.2684380046,l=2.6097574011,c=-.3413193965):(n=1.35733652,r=-.00915799,o=-1.1513021,a=-.50559606,s=.00692167,i=-.0041960863,l=-.7034186147,c=1.707614701);let u=n+r*e+o*t+a*e*e+s*e*t,h=.3963377774*e+.2158037573*t,f=-.1055613458*e-.0638541728*t,m=-.0894841775*e-1.291485548*t;{let p=1+u*h,b=1+u*f,d=1+u*m,M=p*p*p,_=b*b*b,O=d*d*d,P=3*h*p*p,$=3*f*b*b,S=3*m*d*d,C=6*h*h*p,g=6*f*f*b,N=6*m*m*d,x=i*M+l*_+c*O,A=i*P+l*$+c*S,k=i*C+l*g+c*N;u=u-x*A/(A*A-.5*x*k)}return u}function cn(e,t){let n=is(e,t),r=tt({l:1,a:n*e,b:n*t}),o=Math.cbrt(1/Math.max(r.r,r.g,r.b)),a=o*n;return[o,a]}function ls(e,t,n,r,o,a=null){a||(a=cn(e,t));let s;if((n-o)*a[1]-(a[0]-o)*r<=0)s=a[1]*o/(r*a[0]+a[1]*(o-n));else{s=a[1]*(o-1)/(r*(a[0]-1)+a[1]*(o-n));{let i=n-o,l=r,c=.3963377774*e+.2158037573*t,u=-.1055613458*e-.0638541728*t,h=-.0894841775*e-1.291485548*t,f=i+l*c,m=i+l*u,p=i+l*h;{let b=o*(1-s)+s*n,d=s*r,M=b+d*c,_=b+d*u,O=b+d*h,P=M*M*M,$=_*_*_,S=O*O*O,C=3*f*M*M,g=3*m*_*_,N=3*p*O*O,x=6*f*f*M,A=6*m*m*_,k=6*p*p*O,w=4.0767416621*P-3.3077115913*$+.2309699292*S-1,G=4.0767416621*C-3.3077115913*g+.2309699292*N,B=4.0767416621*x-3.3077115913*A+.2309699292*k,F=G/(G*G-.5*w*B),Y=-w*F,U=-1.2684380046*P+2.6097574011*$-.3413193965*S-1,V=-1.2684380046*C+2.6097574011*g-.3413193965*N,Q=-1.2684380046*x+2.6097574011*A-.3413193965*k,fe=V/(V*V-.5*U*Q),ee=-U*fe,Ee=-.0041960863*P-.7034186147*$+1.707614701*S-1,we=-.0041960863*C-.7034186147*g+1.707614701*N,Se=-.0041960863*x-.7034186147*A+1.707614701*k,ke=we/(we*we-.5*Ee*Se),de=-Ee*ke;Y=F>=0?Y:1e6,ee=fe>=0?ee:1e6,de=ke>=0?de:1e6,s+=Math.min(Y,Math.min(ee,de))}}}return s}function un(e,t,n=null){n||(n=cn(e,t));let r=n[0],o=n[1];return[o/r,o/(1-r)]}function Br(e,t,n){let r=cn(t,n),o=ls(t,n,e,1,e,r),a=un(t,n,r),s=.11516993+1/(7.4477897+4.1590124*n+t*(-2.19557347+1.75198401*n+t*(-2.13704948-10.02301043*n+t*(-4.24894561+5.38770819*n+4.69891013*t)))),i=.11239642+1/(1.6132032-.68124379*n+t*(.40370612+.90148123*n+t*(-.27087943+.6122399*n+t*(.00299215-.45399568*n-.14661872*t)))),l=o/Math.min(e*a[0],(1-e)*a[1]),c=e*s,u=(1-e)*i,h=.9*l*Math.sqrt(Math.sqrt(1/(1/(c*c*c*c)+1/(u*u*u*u))));return c=e*.4,u=(1-e)*.8,[Math.sqrt(1/(1/(c*c)+1/(u*u))),h,o]}function Fr(e){const t=e.l!==void 0?e.l:0,n=e.a!==void 0?e.a:0,r=e.b!==void 0?e.b:0,o={mode:"okhsl",l:ln(t)};e.alpha!==void 0&&(o.alpha=e.alpha);let a=Math.sqrt(n*n+r*r);if(!a)return o.s=0,o;let[s,i,l]=Br(t,n/a,r/a),c;if(a<i){let u=0,h=.8*s,f=1-h/i;c=(a-u)/(h+f*(a-u))*.8}else{let u=i,h=.2*i*i*1.25*1.25/s,f=1-h/(l-i);c=.8+.2*((a-u)/(h+f*(a-u)))}return c&&(o.s=c,o.h=ae(Math.atan2(r,n)*180/Math.PI)),o}function Yr(e){let t=e.h!==void 0?e.h:0,n=e.s!==void 0?e.s:0,r=e.l!==void 0?e.l:0;const o={mode:"oklab",l:At(r)};if(e.alpha!==void 0&&(o.alpha=e.alpha),!n||r===1)return o.a=o.b=0,o;let a=Math.cos(t/180*Math.PI),s=Math.sin(t/180*Math.PI),[i,l,c]=Br(o.l,a,s),u,h,f,m;n<.8?(u=1.25*n,h=0,f=.8*i,m=1-f/l):(u=5*(n-.8),h=l,f=.2*l*l*1.25*1.25/i,m=1-f/(c-l));let p=h+u*f/(1-m*u);return o.a=p*a,o.b=p*s,o}const cs={...Dr,mode:"okhsl",channels:["h","s","l","alpha"],parse:["--okhsl"],serialize:"--okhsl",fromMode:{oklab:Fr,rgb:e=>Fr(kt(e))},toMode:{oklab:Yr,rgb:e=>Nt(Yr(e))}};function Zr(e){let t=e.l!==void 0?e.l:0,n=e.a!==void 0?e.a:0,r=e.b!==void 0?e.b:0,o=Math.sqrt(n*n+r*r),a=o?n/o:1,s=o?r/o:1,[i,l]=un(a,s),c=.5,u=1-c/i,h=l/(o+t*l),f=h*t,m=h*o,p=At(f),b=m*p/f,d=tt({l:p,a:a*b,b:s*b}),M=Math.cbrt(1/Math.max(d.r,d.g,d.b,0));t=t/M,o=o/M*ln(t)/t,t=ln(t);const _={mode:"okhsv",s:o?(c+l)*m/(l*c+l*u*m):0,v:t?t/f:0};return _.s&&(_.h=ae(Math.atan2(r,n)*180/Math.PI)),e.alpha!==void 0&&(_.alpha=e.alpha),_}function Tr(e){const t={mode:"oklab"};e.alpha!==void 0&&(t.alpha=e.alpha);const n=e.h!==void 0?e.h:0,r=e.s!==void 0?e.s:0,o=e.v!==void 0?e.v:0,a=Math.cos(n/180*Math.PI),s=Math.sin(n/180*Math.PI),[i,l]=un(a,s),c=.5,u=1-c/i,h=1-r*c/(c+l-l*u*r),f=r*l*c/(c+l-l*u*r),m=At(h),p=f*m/h,b=tt({l:m,a:a*p,b:s*p}),d=Math.cbrt(1/Math.max(b.r,b.g,b.b,0)),M=At(o*h),_=f*M/h;return t.l=M*d,t.a=_*a*d,t.b=_*s*d,t}const us={...$r,mode:"okhsv",channels:["h","s","v","alpha"],parse:["--okhsv"],serialize:"--okhsv",fromMode:{oklab:Zr,rgb:e=>Zr(kt(e))},toMode:{oklab:Tr,rgb:e=>Nt(Tr(e))}};function hs(e,t){if(!t||t[0]!=="oklab")return;const n={mode:"oklab"},[,r,o,a,s]=t;if(!(r.type===y.Hue||o.type===y.Hue||a.type===y.Hue))return r.type!==y.None&&(n.l=Math.min(Math.max(0,r.type===y.Number?r.value:r.value/100),1)),o.type!==y.None&&(n.a=o.type===y.Number?o.value:o.value*.4/100),a.type!==y.None&&(n.b=a.type===y.Number?a.value:a.value*.4/100),s.type!==y.None&&(n.alpha=Math.min(1,Math.max(0,s.type===y.Number?s.value:s.value/100))),n}const fs={...Ir,mode:"oklab",toMode:{lrgb:tt,rgb:Nt},fromMode:{lrgb:jr,rgb:kt},ranges:{l:[0,1],a:[-.4,.4],b:[-.4,.4]},parse:[hs],serialize:e=>`oklab(${e.l!==void 0?e.l:"none"} ${e.a!==void 0?e.a:"none"} ${e.b!==void 0?e.b:"none"}${e.alpha<1?` / ${e.alpha}`:""})`};function ds(e,t){if(!t||t[0]!=="oklch")return;const n={mode:"oklch"},[,r,o,a,s]=t;if(r.type!==y.None){if(r.type===y.Hue)return;n.l=Math.min(Math.max(0,r.type===y.Number?r.value:r.value/100),1)}if(o.type!==y.None&&(n.c=Math.max(0,o.type===y.Number?o.value:o.value*.4/100)),a.type!==y.None){if(a.type===y.Percentage)return;n.h=a.value}return s.type!==y.None&&(n.alpha=Math.min(1,Math.max(0,s.type===y.Number?s.value:s.value/100))),n}const ms={...Kr,mode:"oklch",toMode:{oklab:e=>wt(e,"oklab"),rgb:e=>Nt(wt(e,"oklab"))},fromMode:{rgb:e=>yt(kt(e),"oklch"),oklab:e=>yt(e,"oklch")},parse:[ds],serialize:e=>`oklch(${e.l!==void 0?e.l:"none"} ${e.c!==void 0?e.c:"none"} ${e.h!==void 0?e.h:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,ranges:{l:[0,1],c:[0,.4],h:[0,360]}};Me(Z0);const ps=Me(Ir),gs=Me(Kr),bs=Me(Dr),Ms=Me($r),vs=Me(cs),ys=Me(fs),ws=Me(us),ks=Me(ms);function Ns([e,t,n]){const r=hn(e),o=hn(t),a=hn(n);return .2126*r+.7152*o+.0722*a}function hn(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function se(e){const t=new Map;return n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r}}function Xr(e){const t=parseInt(e.slice(1),16);return[t>>16&255,t>>8&255,t&255]}const fn=se(e=>{const[t,n,r]=Xr(e);return[t/255,n/255,r/255]}),As=se(e=>Ds(fn(e))),ie=se(e=>{const{l:t,a:n,b:r}=ys(e);return[t,n,r]}),xs=se(e=>{const{h:t,s:n,l:r}=vs(e);return[t,n,r]}),_s=se(e=>{const{h:t,s:n,v:r}=ws(e);return[t,n,r]}),Cs=se(e=>{const{l:t,c:n,h:r}=ks(e);return[t,n,r]}),ue=se(e=>{const{l:t,c:n,h:r}=gs(e);return[t,n,r]}),dn=se(e=>{const{l:t,a:n,b:r}=ps(e);return[t,n,r]}),Es=se(e=>{const{h:t,s:n,l:r}=bs(e);return[t,n,r]}),Os=se(e=>{const{h:t,s:n,v:r}=Ms(e);return[t,n,r]});function _e(e){return e===void 0}const Wr=se(e=>Ns(fn(e)));function Ur(e,t){const n=Wr(e),r=Wr(t);if(n!==r)return n-r;const o=ue(e),a=ue(t);return o[0]!==a[0]?o[0]-a[0]:o[1]!==a[1]?o[1]-a[1]:o[2]-a[2]}function ve(e,t,n=1,r=1,o=1){return q.deltaE(e,t,n,r,o)}function Ps(e){return[e[0]/100,(e[1]+128)/255,(e[2]+128)/255]}function Rs(e){return[Math.round(e[0]/100*255),Math.round(e[1]+128),Math.round(e[2]+128)]}function Ds([e,t,n]){const r=1-Math.max(e,t,n),o=r<1?1/(1-r):0,a=(1-e-r)*o,s=(1-t-r)*o,i=(1-n-r)*o;return[a,s,i,r]}const Vr=(2.016+2.045)/2;function $s([e,t,n],[r,o,a]){let s=e-r,i=Vr*(t-o),l=Vr*(n-a);return Math.sqrt(s**2+i**2+l**2)}function Ss(e,t){if(t==="rgb")return e.map(n=>[Xr(n),n]);if(t==="gl")return e.map(n=>[fn(n),n]);if(t==="oklab")return e.map(n=>[ie(n),n]);if(t==="oklch")return e.map(n=>[Cs(n),n]);if(t==="okhsl")return e.map(n=>[xs(n),n]);if(t==="okhsv")return e.map(n=>[_s(n),n]);if(t==="lab")return e.map(n=>[dn(n),n]);if(t==="lab_norm")return e.map(n=>[Ps(dn(n)),n]);if(t==="lab_int")return e.map(n=>[Rs(dn(n)),n]);if(t==="lch")return e.map(n=>[ue(n),n]);if(t==="hsl")return e.map(n=>[Es(n),n]);if(t==="hsv")return e.map(n=>[Os(n),n]);if(t==="hex")return e.map(n=>[n,n]);if(t==="cmyk")return e.map(n=>[As(n),n]);throw`Unknown model ${t}`}function X(e,t){const n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+r*r+o*o)}function Ls(e,t){const n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(n*n+r*r+o*o+a*a)}function qs(e,t){let n=_e(e[0])&&_e(t[0])?0:e[0]-t[0]||0;const r=e[1]-t[1],o=e[2]-t[2];return n+=n>180?-360:n<-180?360:0,n/=180,Math.sqrt(n*n+r*r+o*o)}function zs(e,t){const n=e[0]-t[0],r=e[1]-t[1];let o=_e(e[2])&&_e(t[2])?0:e[2]-t[2]||0;return o+=o>180?-360:o<-180?360:0,o/=180,Math.sqrt(n*n+r*r+o*o)}function Ce(e){const t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return t===0?[0,0,0]:[e[0]/t,e[1]/t,e[2]/t]}function he(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]}function Ze(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Jr(e){const t=e.reduce((n,r)=>[n[0]+r[0],n[1]+r[1],n[2]+r[2]],[0,0,0]);return[t[0]/e.length,t[1]/e.length,t[2]/e.length]}function H(e,t){return e[0]!==t[0]?e[0]-t[0]:e[1]!==t[1]?e[1]-t[1]:e[2]-t[2]}function Te(e,t){return e[1]!==t[1]?e[1]-t[1]:e[2]!==t[2]?e[2]-t[2]:e[0]-t[0]}function mn(e,t){return e[2]!==t[2]?(e[2]??0)-(t[2]??0):e[1]!==t[1]?e[1]-t[1]:e[0]-t[0]}const Qr={};function eo(e){const t=e.name||e.toString(),n=Qr[t]=Qr[t]||new Map;return(r,o)=>{const a=[r,o].sort().join("|");let s=n.get(a);return s===void 0&&(s=e(r,o),n.set(a,s)),s}}function Gs(e){return e.at(-1)==="h"?zs:e.at(-3)==="h"?qs:e==="oklab"?$s:e==="cmyk"?Ls:X}function z(e,t,n="gl",r,o){const a=new Map;let s=Gs(n),i=s;typeof i!="function"&&(i.color?i=((b,d,...M)=>s.fn(f(b),f(d),...M)):i=s.fn);let l=r,c=l;c&&typeof c!="function"&&(c.color?c=((b,d,...M)=>l.fn(f(b),f(d),...M)):c=l.fn);const u=Ss(e,n);for(const[b,d]of u)a.set(b,d);function h(b){return b.map(d=>a.get(d))}function f(b){return a.get(b)}const m={distance:eo(i),delta:c?eo(c):void 0,toColors:h,toColor:f},p=[...a.keys()];return t.call(m,p)?.map(b=>a.get(b))}function to([e,t,n]){let r=0;for(let o=7;o>=0;o--){const a=1<<o,s=e&a?1:0,i=t&a?1:0,l=n&a?1:0;r=r<<3|Hs([s,i,l])}return r}function Hs([e,t,n]){return e<<2|t<<1|n}function Is(e){const t=new Map;return[...e].sort((n,r)=>{let o,a;return t.has(n)?o=t.get(n):(o=to(n),t.set(n,o)),t.has(r)?a=t.get(r):(a=to(r),t.set(r,a)),o-a})}function no(e,t="rgb"){const n=[...e].sort();return z(n,r=>Is(r),t)}no.params=[{name:"model",values:["rgb","lab_int"]}];class Ks{populationSize;generations;maxStagnation;mutationRate;crossoverRate;eliteSize;tournamentSize;random;fitnessFunc;seedFunc;fitnessCompare;onGeneration;population;currentGeneration;bestIndividual;bestFitness;peakGeneration;constructor(t){this.populationSize=t.populationSize||100,this.generations=t.generations||200,this.maxStagnation=t.maxStagnation||20,this.mutationRate=t.mutationRate||.1,this.crossoverRate=t.crossoverRate||.9,this.eliteSize=t.eliteSize||5,this.tournamentSize=t.tournamentSize||5,this.random=t.random||Math.random,this.fitnessFunc=t.fitness||(()=>0),this.seedFunc=t.seed,this.fitnessCompare=t.compare||((n,r)=>r-n),this.onGeneration=t.onGeneration,this.population=[],this.currentGeneration=0,this.bestIndividual=null,this.bestFitness=-1/0,this.peakGeneration=0}initializePopulation(){this.population=[];for(let t=0;t<this.populationSize;t++){const n=this.seedFunc(),r=this.fitnessFunc(n);this.population.push({genome:n,fitness:r})}this.sortPopulation(),this.updateBest()}sortPopulation(){this.population.sort((t,n)=>this.fitnessCompare(t.fitness,n.fitness))}updateBest(){(this.bestFitness===-1/0||this.fitnessCompare(this.population[0].fitness,this.bestFitness)<0)&&(this.peakGeneration=this.currentGeneration,this.bestFitness=this.population[0].fitness,this.bestIndividual=[...this.population[0].genome])}tournamentSelect(){const t=[];for(let n=0;n<this.tournamentSize;n++){const r=Math.floor(this.random()*this.population.length);t.push(this.population[r])}return t.sort((n,r)=>this.fitnessCompare(n.fitness,r.fitness)),t[0]}orderCrossover(t,n){const r=t.length,o=Math.floor(this.random()*r),a=o+Math.floor(this.random()*(r-o)),s=Array(r);for(let u=o;u<=a;u++)s[u]=t[u];const i=new Set(s.slice(o,a+1)),l=[];for(let u=0;u<r;u++){const h=n[u];i.has(h)||l.push(h)}let c=0;for(let u=0;u<r;u++)s[u]===void 0&&(s[u]=l[c],c++);return s}swapMutate(t){const n=[...t],r=Math.floor(this.random()*n.length),o=Math.floor(this.random()*n.length);return[n[r],n[o]]=[n[o],n[r]],n}shiftMutate(t){const n=[...t];return n.push(n.shift()),n}cheatMutate(t){let n=this.shiftMutate(t),r=n,o=this.fitnessFunc(r);for(let s=1;s<t.length;s++){n=this.shiftMutate(n);const i=this.fitnessFunc(n);this.fitnessCompare(i,o)<0&&(o=i,r=n)}const a=[...r].reverse();return this.fitnessCompare(o,this.fitnessFunc(a))<0?a:r}evolve(){const t=[];for(let n=0;n<this.eliteSize;n++)t.push({genome:[...this.population[n].genome],fitness:this.population[n].fitness});for(;t.length<this.populationSize;){const n=this.tournamentSelect(),r=this.tournamentSelect();let o;if(this.random()<this.crossoverRate?o=this.orderCrossover(n.genome,r.genome):o=[...n.genome],this.random()<this.mutationRate){const s=this.random();s<.5?o=this.swapMutate(o):s<.7?o=this.shiftMutate(o):s<.9?o=[...o].reverse():o=this.cheatMutate(o)}const a=this.fitnessFunc(o);t.push({genome:o,fitness:a})}this.population=t,this.sortPopulation(),this.updateBest()}run(){this.initializePopulation();for(let t=0;t<this.generations&&(this.currentGeneration=t,this.onGeneration&&this.onGeneration({generation:t,bestFitness:this.population[0].fitness,bestGenome:this.population[0].genome,averageFitness:this.population.reduce((n,r)=>n+(typeof r.fitness=="number"?r.fitness:0),0)/this.population.length}),!(this.currentGeneration>this.peakGeneration+this.maxStagnation));t++)this.evolve();return{bestGenome:this.cheatMutate(this.bestIndividual),bestFitness:this.bestFitness,finalPopulation:this.population,peakGeneration:this.peakGeneration}}}function xt(e){if(e.length<2)return{totalDistance:0,avgAngleChange:0,maxAngleChange:0,meanDistance:0,devDistance:0};let t=0,n=[],r=null;const o=[];for(let c=1;c<e.length;c++){const u=X(e[c-1],e[c]);t+=u,o.push(u);const h=Ce(he(e[c],e[c-1]));if(r&&u>0){const f=Math.max(-1,Math.min(1,Ze(r,h))),m=Math.acos(f)*(180/Math.PI);n.push(m)}r=h}const a=t/(e.length-1),s=Math.sqrt(o.reduce((c,u)=>c+Math.pow(u-a,2),0)/(e.length-1)),i=n.length>0?n.reduce((c,u)=>c+u,0)/n.length:0,l=n.length>0?Math.max(...n):0;return{totalDistance:t,avgAngleChange:i,maxAngleChange:l,meanDistance:a,devDistance:s}}function js(e){let t=0;for(let n=0;n<e.length-1;n++){const r=ie(e[n]),o=ie(e[n+1]);t+=X(r,o)}return-t}function Bs(e,t){return t-e}function Fs(e){return ro(e,js,Bs)}function ro(e,t,n){let r=1;const o=[...e].sort(),a=()=>(r=r*16807%2147483647,r/2147483647),s=Math.min(40,Math.max(10,e.length))*5,i=e.length<50?250:Math.floor(31250*64/(s*e.length));return new Ks({populationSize:s,generations:i,maxStagnation:e.length<50?20:10,mutationRate:.5,crossoverRate:.9,eliteSize:5,random:a,fitness:t,compare:n,seed:()=>[...o].sort(()=>a()-.5)}).run().bestGenome}function Ys(e){const t=e.map(a=>ie(a)),{avgAngleChange:n,maxAngleChange:r,totalDistance:o}=xt(t);return[-o,-n,-r]}function Zs(e,t,n=.01){for(let r=0;r<e.length;r++){const o=(e[r]+t[r])/2,a=Math.abs(o*n),s=t[r]-e[r];if(Math.abs(s)>a)return s}return t[0]-e[0]}function Ts(e){return ro(e,Ys,Zs)}function pn(e,t){let n=!0;for(;n;){n=!1;for(let r=0;r<e.length-2;r++)for(let o=r+1;o<e.length-1;o++){const a=t(e[r],e[r+1])+t(e[o],e[o+1]);t(e[r],e[o])+t(e[r+1],e[o+1])<a&&(e=[...e.slice(0,r+1),...e.slice(r+1,o+1).reverse(),...e.slice(o+1)],n=!0)}}return e}function Xs(e){const t=e.reduce((n,r)=>[n[0]+r[0],n[1]+r[1],n[2]+r[2]],[0,0,0]);return[t[0]/e.length,t[1]/e.length,t[2]/e.length]}function Ws(e,t){const n=e.length,r=[[0,0,0],[0,0,0],[0,0,0]];for(const o of e){const a=he(o,t);for(let s=0;s<3;s++)for(let i=0;i<3;i++)r[s][i]+=a[s]*a[i]/n}return r}function Us(e){let t=[1,1,1];for(let n=0;n<100;n++){const r=[e[0][0]*t[0]+e[0][1]*t[1]+e[0][2]*t[2],e[1][0]*t[0]+e[1][1]*t[1]+e[1][2]*t[2],e[2][0]*t[0]+e[2][1]*t[1]+e[2][2]*t[2]];t=Ce(r)}return t}function Vs(e){if(e.length===0)return[];const t=Xs(e),n=Ws(e,t),r=Us(n);return[...e].sort((o,a)=>{const s=Ze(he(o,t),r),i=Ze(he(a,t),r);return s-i})}function Js(e){const t=e.length,n=e.reduce((r,o)=>[r[0]+o[0],r[1]+o[1],r[2]+o[2]],[0,0,0]).map(r=>r/t);return e.reduce((r,o)=>[r[0]+(o[0]-n[0])**2,r[1]+(o[1]-n[1])**2,r[2]+(o[2]-n[2])**2],[0,0,0]).map(r=>Math.sqrt(r/t)||1e-6)}function oo(e){const t=Js(e);return(n,r)=>Math.hypot((n[0]-r[0])/t[0],(n[1]-r[1])/t[1],(n[2]-r[2])/t[2])}function ao(e,t,n="raw"){return z(e,function(r){const o=[...r].sort(t.at(-3)?Te:H),a=Vs(o);if(n==="raw")return a;let s=this.distance,i=this.toColor;if(n==="tsp-adapt")if(t==="oklab")s=oo(o);else{const l=e.map(u=>ie(u)),c=oo(l);s=(u,h)=>c(ie(i(u)),ie(i(h)))}return pn(a,s)},t)}ao.params=[{name:"model",values:["gl","lab","oklab"]},{name:"post",values:["raw","tsp","tsp-adapt"]}];function Qs(e,t="hsl",n="bottom-up"){return e.map(r=>({vec:r,hsl:t.at(-1)==="h"?[...r].reverse():r})).sort((r,o)=>{let[a,s,i]=r.hsl,[l,c,u]=o.hsl;switch(a=a||0,l=l||0,n){case"bottom-up":return Math.abs(i-u)>.05?i-u:Math.abs(a-l)>5?a-l:s-c;case"top-down":return Math.abs(i-u)>.05?u-i:Math.abs(a-l)>5?a-l:s-c;case"outward":return Math.abs(s-c)>.05?s-c:Math.abs(a-l)>5?a-l:i-u;case"inward":return Math.abs(s-c)>.05?c-s:Math.abs(a-l)>5?a-l:i-u;default:return 0}}).map(r=>r.vec)}function so(e,t="hsl",n="bottom-up"){return z(e,function(r){const o=t.at(-3)?Te:H,a=[...r].sort(o);return Qs(a,t,n)},t)}so.params=[{name:"model",values:["hsl","hsv","lch","okhsl","okhsv","oklch"]},{name:"mode",values:["outward","inward","bottom-up","top-down"]}];function ei(e,t="hsl",n="ascending"){const r=e.map(o=>{const a=t.at(-1)==="h"?[...o].reverse():o,s=(a[2]||0)*360+a[0];return{vec:o,hsl:a,spiralParam:s}});return r.sort((o,a)=>{const s=n==="ascending"?o.spiralParam-a.spiralParam:a.spiralParam-o.spiralParam;return Math.abs(s)<1?o.hsl[1]-a.hsl[1]:s}),r.map(o=>o.vec)}function io(e,t="hsl",n="ascending"){return z(e,function(r){const o=t.at(-3)?Te:H,a=[...r].sort(o);return ei(a,t,n)},t)}io.params=[{name:"model",values:["hsl","hsv","lch","okhsl","okhsv","oklch"]},{name:"direction",values:["ascending"]}];function ti(e=1){let t=e;return()=>(t=t*16807%2147483647,t/2147483647)}function ni(e,t){return _t(e,t)[0]}function _t(e,t){const n=[];for(let r=0;r<e.length;r++)for(let o=r+1;o<e.length;o++){const a=e[r][0]-e[o][0],s=e[r][1]-e[o][1],i=e[r][2]-e[o][2],l=Math.sqrt(a*a+s*s+i*i);n.push({data:[e[r],e[o]],dist:l})}return n.sort((r,o)=>{if(r.dist!==o.dist)return r.dist-o.dist;const a=[...r.data].sort(t),s=[...o.data].sort(t);return t(a[0],s[0])}),n.map(r=>r.data)}function gn(e,t){if(e.length===2)return[...e];let n=-1/0,r=null,o=null,a=null;for(let s=0;s<e.length;s++)for(let i=0;i<e.length;i++)if(i!==s)for(let l=0;l<e.length;l++){if(l===s||l===i)continue;const c=Ce(he(e[i],e[s])),u=Ce(he(e[l],e[i])),h=Ze(c,u);h>n&&(n=h,r=e[s],o=e[i],a=e[l])}return t.distance(r,o)<t.distance(o,a)?a=o:r=o,[r,a]}function ri(e,t,n="average"){switch(n){case"single":let r=1/0;for(const a of e.colors)for(const s of t.colors)r=Math.min(r,X(a,s));return r;case"complete":let o=0;for(const a of e.colors)for(const s of t.colors)o=Math.max(o,X(a,s));return o;default:return X(e.centroid,t.centroid)}}function oi(e,t="average"){let n=e.map(r=>({colors:[r],centroid:r,distance:0}));for(;n.length>1;){let r=1/0,o=0,a=1;for(let i=0;i<n.length;i++)for(let l=i+1;l<n.length;l++){const c=ri(n[i],n[l],t);c<r&&(r=c,o=i,a=l)}const s={colors:[...n[o].colors,...n[a].colors],left:n[o],right:n[a],centroid:Jr([...n[o].colors,...n[a].colors]),distance:r};n=n.filter((i,l)=>l!==o&&l!==a),n.push(s)}return n[0]}function ye(e,t="balanced"){if(!e.left&&!e.right||!e.left||!e.right)return e.colors;switch(t){case"depth-first":return[...ye(e.left,t),...ye(e.right,t)];case"breadth-first":return e.left.colors.length<=e.right.colors.length?[...ye(e.left,t),...ye(e.right,t)]:[...ye(e.right,t),...ye(e.left,t)];default:const n=ye(e.left,t),r=ye(e.right,t),o=X(n[n.length-1],r[0]),a=X(r[r.length-1],n[0]);return o<=a?[...n,...r]:[...r,...n]}}function ai(e,t="average",n="balanced"){if(e.length===0)return[];if(e.length===1)return e;const r=oi(e,t);return ye(r,n)}function si(e,t,n){return[...e].sort(()=>n()-.5).slice(0,t)}function ii(e,t){return e.map(n=>{let r=1/0,o=0;return t.forEach((a,s)=>{const i=X(n,a);i<r&&(r=i,o=s)}),o})}function li(e,t,n,r){const o=[];for(let a=0;a<n;a++){const s=e.filter((i,l)=>t[l]===a);s.length>0?o.push(Jr(s)):o.push(e[Math.floor(r()*e.length)])}return o}function ci(e,t=8,n=50){if(e.length===0)return[];if(e.length<=t)return e;const r=ti();let o=si(e,t,r),a=[];for(let c=0;c<n;c++){const u=ii(e,o);if(JSON.stringify(u)===JSON.stringify(a))break;a=u,o=li(e,a,t,r)}const s=Array.from({length:t},()=>[]);e.forEach((c,u)=>{s[a[u]].push(c)});const i=s.map((c,u)=>({cluster:c,centroid:o[u]})).filter(c=>c.cluster.length>0).sort((c,u)=>{const h=c.centroid[0]+c.centroid[1]+c.centroid[2],f=u.centroid[0]+u.centroid[1]+u.centroid[2];return h-f}),l=[];for(const{cluster:c,centroid:u}of i){const h=c.sort((f,m)=>X(f,u)-X(m,u));l.push(...h)}return l}function lo(e,t,n){const r=[],o=e[t];return e.forEach((a,s)=>{X(o,a)<=n&&r.push(s)}),r}function ui(e,t=30,n=3){if(e.length===0)return[];const r=new Set,o=[],a=[];e.forEach((i,l)=>{if(r.has(l))return;r.add(l);const c=lo(e,l,t);if(c.length<n)a.push(l);else{const u=[],h=[...c];for(;h.length>0;){const f=h.shift();if(!r.has(f)){r.add(f);const m=lo(e,f,t);m.length>=n&&h.push(...m)}u.push(f)}o.push(u)}}),o.sort((i,l)=>{const c=i.reduce((h,f)=>{const m=e[f];return h+m[0]+m[1]+m[2]},0)/i.length,u=l.reduce((h,f)=>{const m=e[f];return h+m[0]+m[1]+m[2]},0)/l.length;return c-u});const s=[];for(const i of o){const l=new Set(i),c=[];let u=i[0];for(c.push(u),l.delete(u);l.size>0;){let h=-1,f=1/0;for(const m of l){const p=X(e[u],e[m]);p<f&&(f=p,h=m)}if(h!==-1)c.push(h),l.delete(h),u=h;else break}s.push(...c.map(h=>e[h]))}return s.push(...a.map(i=>e[i])),s}const bn={rgb:"gl",lab:"lab_norm"};function co(e,t="rgb",n="average",r="balanced"){return z(e,o=>{const a=[...o].sort(H);return ai(a,n,r)},bn[t]||t)}co.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"linkage",values:["single","complete","average"]},{name:"traversal",values:["depth-first","breadth-first","balanced"]}];function uo(e,t="rgb",n=.5,r=50){return z(e,o=>{const a=[...o].sort(H);return ci(a,Math.ceil(n*o.length),r)},bn[t]||t)}uo.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"k",values:[.3,.5,.7]},{name:"iterations",values:[10,50,100,250]}];function ho(e,t="rgb",n=.3,r=3){const o=t.at(-3)==="h"?Te:H;return z(e,a=>{const s=[...a].sort(H),[i,l]=_t(s,o).at(-1),c=X(i,l)*n;return ui(s,c,r)},bn[t]||t)}ho.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"eps",values:[.3,.5]},{name:"pts",values:[3,5,7]}];function hi(e,t){if(e.length===0)return[];if(e.length===1)return e;const{selectStart:n,distance:r,compareColors:o}=t,a=new Map;for(const c of e)a.set(c,e.filter(u=>u!==c));let s=n(e);const i=[s],l=new Set([s]);for(;i.length<e.length;){const c=a.get(s).filter(f=>!l.has(f));let u=c[0],h=r(s,u);for(let f=1;f<c.length;f++){const m=c[f],p=r(s,m);(p<h||p===h&&o(m,u)<0)&&(h=p,u=m)}s=u,l.add(s),i.push(s)}return i}function Mn(e,t="rgb",n="bright",r="euclidean"){return z(e,function(o){const{toColors:a}=this;function s(l){const c=a(l),u=c.reduce((h,f)=>Ur(f,h)>0?f:h);return l[c.indexOf(u)]}function i(l){const c=a(l),u=c.reduce((h,f)=>Ur(f,h)<0?f:h);return l[c.indexOf(u)]}return hi(o,{selectStart:n==="bright"?s:i,distance:r==="euclidean"?this.distance:this.delta,compareColors:t.at(-3)==="h"?Te:H})},t,{fn:ve,color:!0})}Mn.params=[{name:"model",values:["hsl","hsv","oklch","oklab","okhsl","okhsv","lch","lab","rgb","cmyk"]},{name:"start",values:["bright","dark"]}];function fo(e,t="bright"){return Mn(e,"rgb",t,"delta")}fo.params=[{name:"start",values:["bright","dark"]}];function fi(e){let t=0,n=0,r=0;for(const[u,h,f]of e)t+=u,n+=h,r+=f||0;const o=t/e.length,a=n/e.length,s=r/e.length;let i=0,l=0,c=0;for(const[u,h,f]of e){const m=Math.abs(u-o)/(u+o)||0,p=Math.abs(h-a)/(h+a)||0,b=Math.abs(f-s)/(f+s)||0;i+=m,l+=p,c+=b}return[i,l,c]}function vn(e){const t=e.reduce((i,[l])=>i+l,0)/e.length,n=e.reduce((i,[,l])=>i+l,0)/e.length,r=di(e.map(([,,i])=>i).filter(i=>!_e(i))),o=e.reduce((i,[l])=>i+Math.pow(l-t,2),0)/e.length,a=e.reduce((i,[,l])=>i+Math.pow(l-n,2),0)/e.length,s=mi(e.map(([,,i])=>i).filter(i=>!_e(i)),r);return{L:Math.sqrt(o),C:Math.sqrt(a),H:Math.sqrt(s),meanL:t,meanC:n,meanH:r}}function di(e){if(e.length===0)return 0;const t=e.filter(a=>!_e(a)).map(a=>a*Math.PI/180),n=t.reduce((a,s)=>a+Math.sin(s),0),r=t.reduce((a,s)=>a+Math.cos(s),0);let o=Math.atan2(n/e.length,r/e.length)*(180/Math.PI);return o<0&&(o+=360),o}function mi(e,t){return e.length===0?0:e.map(n=>{let r=n-t;return r>180&&(r-=360),r<-180&&(r+=360),r*r}).reduce((n,r)=>n+r,0)/e.length}function mo(e){const t=Math.max(Number.EPSILON,e.L+e.C+(e.H??0));return{Kl:(t-e.L)/(2*t),Kc:(t-e.C)/(2*t),Kh:(t-e.H)/(2*t)}}function yn(e){const t=vn(e),n=e.map(([l])=>l),r=e.map(([,l])=>l),o=Math.max(...n)-Math.min(...n),a=Math.max(...r)-Math.min(...r),s=po(e),i={...t,lightnessRange:o,chromaRange:a,hueSpread:s};return s>180&&t.H>70&&t.L<80?{Kl:.5,Kc:1,Kh:2,type:"Rainbow",data:i}:o>50&&t.L>20&&s<30?{Kl:2,Kc:.5,Kh:.5,type:"Monochromatic",data:i}:a>50&&t.C>15&&s<60?{Kl:.5,Kc:2,Kh:1,type:"Wide Chroma",data:i}:t.H<15&&t.L<15&&t.C<15?{Kl:1.2,Kc:1.2,Kh:1.2,type:"Uniform",data:i}:{Kl:1,Kc:1,Kh:1,type:"Balanced",data:i}}function pi(e){if(e.length===0)return 0;const t=[...e].sort((o,a)=>o-a);let n=0;for(let o=0;o<t.length-1;o++){const a=t[o+1]-t[o];n=Math.max(n,a)}const r=360-(t[t.length-1]-t[0]);return n=Math.max(n,r),360-n}function po(e){return pi(e.map(([,,t])=>t).filter(t=>!_e(t)))}function nt(e,t){const n=new Map;for(let s=0;s<e.length;s++){const i=new Set;for(let l=0;l<e.length;l++)s!==l&&i.add({color:e[l],distance:t(e[s],e[l])});n.set(e[s],i)}const r=[],o=new Set;function a(s){r.push(s),o.add(s);const i=[...n.get(s)].sort((l,c)=>l.distance-c.distance);for(const l of i)o.has(l.color)||a(l.color)}return a(e[0]),r}function go(e,t="raw"){return z(e,function(n){const r=[...n].sort(),o=nt(r,this.delta);return t==="raw"?o:pn(o,this.delta)},"hex",ve)}go.params=[{name:"post",values:["raw","tsp"]}];function gi(e){return z(e,function(t){const n=[...t].sort(H),r=fi(n);return nt(n,(o,a)=>this.delta(o,a,...r))},"lch",{fn:ve,color:!0})}function bi(e){const t=e.map(s=>ue(s)),{Kl:n,Kc:r,Kh:o}=yn(t),a=[n,r,o];return z(e,function(s){const i=[...s].sort();return nt(i,(l,c)=>this.delta(l,c,...a))},"hex",ve)}function Mi(e){const t=e.map(i=>ue(i)),n=vn(t),{Kc:r,Kh:o,Kl:a}=mo(n),s=[a,r,o];return z(e,function(i){const l=[...i].sort();return nt(l,(c,u)=>this.delta(c,u,...s))},"hex",ve)}function vi(e){const t=e.map(i=>ue(i)),n=vn(t),{Kc:r,Kh:o,Kl:a}=mo(n),s=[a,r,o+.5];return z(e,function(i){const l=[...i].sort();return nt(l,(c,u)=>this.delta(c,u,...s))},"hex",ve)}function wn(e,t,n,r,o=1e6){const a=r(e,t),s=Ce(he(t,e));let i=a;if(n){const l=(1-Ze(n,s))*o;i=a*(1+l)}return{score:i,direction:s}}function kn(e,t,n,r,o,a=1e6){const s=o(e,t),i=r(e,t)*s/128,l=Ce(he(t,e));let c=i;if(n){const u=(1-Ze(n,l))*a;c=i*(1+u)}return{score:c,direction:l}}function Xe(e,t,n){const r=new Set(e),o=[];let[a,s]=t;o.push(a,s),r.delete(a),r.delete(s);let i=Ce(he(a,s)),l=Ce(he(s,a));for(;r.size>0;){let c=[];for(const h of r){const f=n(a,h,i),m=n(s,h,l),p=Math.min(f.score,m.score);c.push({candidate:h,scoreStart:f,scoreEnd:m,minScore:p})}c.sort((h,f)=>h.minScore-f.minScore);const u=c[0];u.scoreStart.score<=u.scoreEnd.score?(o.unshift(u.candidate),i=u.scoreStart.direction,a=u.candidate):(o.push(u.candidate),l=u.scoreEnd.direction,s=u.candidate),r.delete(u.candidate)}return o}function yi(e){return z(e,function(t){const n=[...t].sort(H),r=(o,a,s)=>wn(o,a,s,this.distance);return Xe(n,ni(n,H),r)},"oklab")}function bo(e,t="raw"){return z(e,function(n){const r=[...n].sort(H),o=_t(r,H).slice(0,128),a=(i,l,c)=>wn(i,l,c,this.distance),s=o.map(i=>{const l=Xe(r,i,a);return{vectors:l,metrics:xt(this.toColors(l))}});return s.sort((i,l)=>i.metrics.totalDistance-l.metrics.totalDistance),t==="tsp"?pn(s[0].vectors,this.distance):s[0].vectors},"oklab")}bo.params=[{name:"post",values:["raw","tsp"]}];function wi(e){return z(e,function(t){const n=[...t].sort(H),r=_t(n,H).slice(0,128),o=(i,l)=>this.delta(i,l),a=(i,l,c)=>kn(i,l,c,this.distance,o),s=r.map(i=>{const l=Xe(n,i,a);return{vectors:l,metrics:xt(this.toColors(l))}});return s.sort((i,l)=>i.metrics.totalDistance-l.metrics.totalDistance),s[0].vectors},"oklab",{fn:ve,color:!0})}function ki(e){return z(e,function(t){const n=[...t].sort(H),r=(o,a,s)=>wn(o,a,s,this.distance);return Xe(n,gn(n,this),r)},"oklab")}function Ni(e){return z(e,function(t){const n=[...t].sort(H),r=(a,s)=>this.delta(a,s),o=(a,s,i)=>kn(a,s,i,this.distance,r);return Xe(n,gn(n,this),o)},"oklab",{fn:ve,color:!0})}function Ai(e){const t=e.map(s=>ue(s)),{Kl:n,Kc:r,Kh:o}=yn(t),a=[n,r,o];return z(e,function(s){const i=[...s].sort(H),l=(u,h)=>this.delta(u,h,...a),c=(u,h,f)=>kn(u,h,f,this.distance,l);return Xe(i,gn(i,this),c)},"oklab",{fn:ve,color:!0})}const xi=0,_i=1,Ci=1,Ei=2,Oi=2,Pi=2,Ri=3,Di=3,$i=3,Si=3,Li=70,qi={Original:xi,SPI:_i,CYL:Ci,HIL:Ei,KM:Oi,DBSCAN:Pi,HARM:Ri,HARMED:Di,"NNA(DE) Lab":3,"NNA(DE+) Lab":3,"NNA(DE++) Lab":3,"NNA(DE+1) Lab":3,"NNA(DE+2) Lab":3,"MOM(Closest)-Oklab":3,PCA:$i,CL:Si,"MOM(Inlinest)-Oklab":4,"MOM(Inlinest,DE)-Oklab":4,"MOM(Inlinest,DE++)-Oklab":4,"MOM(Closest+)-Oklab":5,"MOM(Closest+,DE)-Oklab":5,"GEN-Oklab":5,"GEN3-Oklab":5,_TOTAL:Li};function zi(e,t=12,n=.05){const r=[],o=[];for(const l of e)l[1]<n||l[2]===void 0?r.push(l):o.push(l);r.sort(([l],[c])=>l-c);const a=360/t,s=Array.from({length:t},()=>[]);for(const l of o){const c=Math.floor(l[2]/a)%t;s[c].push(l)}s.forEach(l=>{l.sort(([c,u],[h,f])=>{const m=f-u;return Math.abs(m)>.02?m:h-c})});const i=s.flat();return[...r,...i]}function Gi(e,t=25,n=.05){const r=e.filter(([,u,h])=>u<n||h===void 0),o=e.filter(([,u,h])=>u>=n&&h!==void 0);if(o.length===0)return r.length>0?[r]:[];const a=[...o].sort(mn),s=[];for(let u=0;u<a.length;u++){const h=a[u][2],f=a[(u+1)%a.length][2];let m;u===a.length-1?m=360-h+f:m=f-h,m>=t&&s.push({index:u,size:m})}if(s.length===0)return r.length>0?[r,a]:[a];s.sort((u,h)=>h.size-u.size);const i=[],l=s.map(u=>u.index).sort((u,h)=>u-h);let c=0;for(const u of l){const h=a.slice(c,u+1);h.length>0&&i.push(h),c=u+1}return c<a.length&&i.push(a.slice(c)),r.length>0&&i.unshift(r),i}function Hi(e,t=25,n=.05,r="cl"){return Gi(e,t,n).map(o=>o.every(([,a,s])=>a<n||s===void 0)?[...o].sort(H):[...o].sort((a,s)=>{const i=a[2]-s[2];if(Math.abs(i)>2)return i;if(r==="cl"){const l=s[1]-a[1];return Math.abs(l)>.02?l:s[0]-a[0]}else{const l=s[0]-a[0];return Math.abs(l)>.05?l:s[1]-a[1]}})).flat()}function Ii(e,t){const n=Math.abs(e[2]-t[2]),r=Math.min(n,360-n),o=1,a=2.5,s=2,i=(e[0]-t[0])*o,l=(e[1]-t[1])*a,c=r/180*s;return Math.sqrt(i*i+l*l+c*c)}function Ki(e){if(e.length===0)return[];const t=[],n=[...e].sort(mn);let r=0,o=-1/0;for(const a of n){const s=n.indexOf(a),i=a[0]*10-a[1]*5;i>o&&(o=i,r=s)}for(t.push(n[r]),n.splice(r,1);n.length>0;){const a=t[t.length-1];let s=0,i=1/0;n.forEach((l,c)=>{const u=Ii(a,l);u<i&&(i=u,s=c)}),t.push(n[s]),n.splice(s,1)}return t}function ji(e){return[...e].sort((t,n)=>{const r=h=>h<.08?0:h<.25?1:h<.5?2:3,o=r(t[1]),a=r(n[1]);if(o!==a)return o-a;if(o===0)return n[0]-t[0];const s=h=>(h+40)%360,i=s(t[2]),l=s(n[2]),c=i-l;if(Math.abs(c)>5)return c;const u=n[0]-t[0];return Math.abs(u)>.03?u:n[1]-t[1]})}function Bi(e){return[...e].sort((t,n)=>{const r=t[1]<.03,o=n[1]<.03;if(r!==o)return r?-1:1;if(r)return n[0]-t[0];const a=d=>d>=268&&d<272?0:d>=355?55+(d-355):d>=310&&d<355?5+(d-310):d>=0&&d<30?60+d:d>=30&&d<110?90+(d-30):d>=110&&d<180?170+(d-110):d>=180&&d<220?240+(d-180):d>=220&&d<268?280+(d-220):d>=272&&d<310?328+(d-272):1e3+d,s=a(t[2]),i=a(n[2]),l=s-i,c=(d,M)=>d<5?0:d>=5&&d<50?M<.25?1:7:d>=50&&d<90?2:d>=90&&d<170?3:d>=170&&d<240?4:d>=240&&d<280?5:d>=280&&d<328?6:8,u=c(s,t[1]),h=c(i,n[1]);if(u!==h)return u-h;const f=d=>d<.25?2:d<.5?1:0,m=f(t[1]),p=f(n[1]);if(m!==p)return m-p;if(u===1&&m===2||m===0){const d=n[0]-t[0];return Math.abs(d)>.01?d:Math.abs(l)>1?l:n[1]-t[1]}if(Math.abs(l)>5)return l;const b=n[0]-t[0];return Math.abs(b)>.01?b:n[1]-t[1]})}function Fi(e){return[...e].sort((t,n)=>{const r=t[1]<.03||t[2]===void 0,o=n[1]<.03||n[2]===void 0;if(r!==o)return r?-1:1;if(r)return n[0]-t[0];const a=d=>(d-270+360)%360,s=a(t[2]),i=a(n[2]),l=d=>Math.floor(d/40),c=l(s),u=l(i),h=d=>d<.15?0:d<.3?1:d<.5?2:d<.7?3:4,f=h(t[1]),m=h(n[1]);if(c!==u)return c-u;const p=m-f;if(Math.abs(p)>0)return p;const b=n[0]-t[0];return Math.abs(b)>.01?b:Math.abs(s-i)>1?s-i:n[1]-t[1]})}function Yi(e){return[...e].sort((t,n)=>{const r=t[1]<.03,o=n[1]<.03;if(r!==o)return r?-1:1;if(r)return n[0]-t[0];const a=l=>{const c=(l[2]-270+360)%360/360,u=Math.min(l[1],1),h=l[0];return c*1e3+(1-u)*100+(1-h)*10},s=a(t),i=a(n);return s-i})}function Zi(e,t=.03,n=40,r=270,o="vivid"){return[...e].sort(mn).sort((a,s)=>{const i=a[1]<t||a[2]===void 0,l=s[1]<t||s[2]===void 0;if(i!==l)return i?-1:1;if(i)return H(s,a);const c=P=>(P-r+360)%360,u=c(a[2]),h=c(s[2]),f=P=>Math.floor(P/n),m=f(u),p=f(h),b=P=>P<.15?0:P<.3?1:P<.5?2:P<.7?3:4,d=b(a[1]),M=b(s[1]);if(m!==p)return m-p;const _=o==="vivid"?M-d:d-M;if(_!==0)return _;const O=s[0]-a[0];return Math.abs(O)>.01?O:Math.abs(u-h)>1?u-h:s[1]-a[1]})}function Mo(e,t=3){let n=[...e].sort((o,a)=>o[0]-a[0]);const r=Array.from({length:t},(o,a)=>[n[a]]);for(r.sort((o,a)=>o[0][2]-a[0][2]),n=n.slice(t);n.length;){const o=n.shift();let a=1/0,s=-1;for(let i=0;i<t;i++){const l=r[i].at(-1),c=r[i].at(-2);let u;if(c){const h=c[2],f=l[2]-h,m=l[2]+f;u=Math.pow(m-o[2],2)}else u=Math.pow(l[2]-o[2],2);u<a&&(a=u,s=i)}s===-1&&(s=0),r[s].push(o)}return r.flat()}function Ti(e,t=72){const n=e.map(s=>s[2]),r=Array.from({length:t}).fill(0);for(const s of n){const i=Math.floor(s/360*t)%t;r[i]++}let o=0,a=!0;for(let s=0;s<t*2;s++){const i=s%t,l=r[(i-1+t)%t],c=r[i],u=r[(i+1)%t];c>l&&c>u&&c>=2?a&&(o++,a=!1):(c<l||c<u)&&(a=!0)}return{suggestedK:Math.max(1,Math.min(8,o||3)),scores:r}}function Xi(e){return z(e,function(t){return zi(t,12,0)},"oklch")}function vo(e,t=360/9,n=0,r="cl"){return z(e,function(o){return Hi(o,t,n,r)},"oklch")}vo.params=[{name:"gap",values:[0,360/12,360/9,360/6]},{name:"threshold",values:[0,.05,.1]},{name:"strategy",values:["cl","lc"]}];function Wi(e){return z(e,function(t){return Ki(t)},"oklch")}function Ui(e){return z(e,function(t){return ji(t)},"oklch")}function Vi(e){return z(e,function(t){return Bi(t)},"oklch")}function Ji(e){return z(e,function(t){return Fi(t)},"oklch")}function Qi(e){return z(e,function(t){return Yi(t)},"oklch")}function yo(e,t,n,r,o){return z(e,function(a){return Zi(a,t,n,r,o)},"oklch")}yo.params=[{name:"threshold",values:[0,.01,.03,.06,.09]},{name:"zone",values:[20,40,60,90,120]},{name:"rotation",values:[0]},{name:"order",values:["vivid","muted"]}];function Nn(e,t=3){return z(e,function(n){return Mo(n,t)},"oklch")}Nn.params=[{name:"ramps",values:[2,3,4,5,6,8,8,9,12,24]}],Nn.valid=(e,t)=>e.length>t;function el(e){return z(e,function(t){const n=Math.min(t.length,Ti(t).suggestedK);return Mo(t,n)},"oklch")}function wo(e,t="rgb"){const n=t.at(-3)==="h"?Te:H;return z(e,function(r){return r.sort(n)},t)}wo.params=[{name:"model",values:["hsl","hsv","oklch","oklab","okhsl","okhsv","lch","lab","rgb","cmyk"]}];const W={PCA:["PCA","Principal component analysis","https://en.wikipedia.org/wiki/Principal_component_analysis"],HIL:["HIL","Hilbert curve","https://en.wikipedia.org/wiki/Hilbert_curve"],GEN:["GEN","Genetic algorithm","https://en.wikipedia.org/wiki/Genetic_algorithm"],NNA:["NNA","Nearest neighbour algorithm","https://en.wikipedia.org/wiki/Nearest_neighbour_algorithm"],MOM:["MON","Greedy with momentum"," https://en.wikipedia.org/wiki/Greedy_algorithm"]},J={RGB:["RGB","https://en.wikipedia.org/wiki/RGB_color_model"],LAB:["CIELAB","https://en.wikipedia.org/wiki/CIELAB_color_space"],OKLAB:["Oklab","https://en.wikipedia.org/wiki/Oklab_color_space"]},Pe={DE:["DE","Delta E","http://www.brucelindbloom.com/index.html?Eqn_DeltaE_CIE2000.html"]},tl=[{name:"Original",fn:e=>e,mid:"Original",description:{model:null}},{name:"HARM",fn:Mn,mid:"HARM",description:{}},{name:"HARMED",fn:fo,mid:"HARMED",description:{}},{name:"NNA(Delta E)",fn:go,mid:"NNA(DE) Lab",description:{method:W.NNA,model:J.LAB,diff:Pe.DE}},{name:"NNA(Delta E+)",fn:gi,mid:"NNA(DE+) Lab",description:{method:W.NNA,model:J.LAB,diff:Pe.DE}},{name:"NNA(Delta E++)",fn:bi,mid:"NNA(DE++) Lab",description:{method:W.NNA,model:J.LAB,diff:Pe.DE}},{name:"NNA(Delta E+1)",fn:Mi,mid:"NNA(DE+1) Lab",description:{method:W.NNA,model:J.LAB,diff:Pe.DE}},{name:"NNA(Delta E+2)",fn:vi,mid:"NNA(DE+2) Lab",description:{method:W.NNA,model:J.LAB,diff:Pe.DE}},{name:"MOM(Closest) Oklab",fn:yi,mid:"MOM(Closest)-Oklab",description:{method:W.MOM,model:J.OKLAB}},{name:"MOM(Closest+) Oklab",fn:bo,mid:"MOM(Closest+)-Oklab",description:{method:W.MOM,model:J.OKLAB}},{name:"MOM(Closest+, Delta E) Oklab",fn:wi,mid:"MOM(Closest+,DE)-Oklab",description:{method:W.MOM,model:J.OKLAB}},{name:"MOM(Inlinest) Oklab",fn:ki,mid:"MOM(Inlinest)-Oklab",description:{method:W.MOM,model:J.OKLAB}},{name:"MOM(Inlinest, Delta E) Oklab",fn:Ni,mid:"MOM(Inlinest,DE)-Oklab",description:{method:W.MOM,model:J.OKLAB,diff:Pe.DE}},{name:"MOM(Inlinest, Delta E++) Oklab",fn:Ai,mid:"MOM(Inlinest,DE++)-Oklab",description:{method:W.MOM,model:J.OKLAB,diff:Pe.DE}},{name:"Genetic Oklab",fn:Fs,mid:"GEN-Oklab",description:{method:W.GEN,model:J.OKLAB}},{name:"Genetic3 Oklab",fn:Ts,mid:"GEN3-Oklab",description:{method:W.GEN,model:J.OKLAB}},{name:"Hilbert",fn:no,mid:"HIL",description:{method:W.HIL,model:J.RGB}},{name:"PCA",fn:ao,mid:"PCA",description:{method:W.PCA}},{name:"Spiral",fn:so,mid:"SPI",description:{}},{name:"Cylindrical",fn:io,mid:"CYL",description:{}},{name:"Cluster",fn:co,mid:"CL",description:{}},{name:"K-means",fn:uo,mid:"KM",description:{}},{name:"DBSCAN",fn:ho,mid:"DBSCAN",description:{}},{name:"RAMP",fn:Xi,mid:"RAMP",description:{}},{name:"RAMPA",fn:vo,mid:"RAMPA",description:{}},{name:"RAMPB",fn:Wi,mid:"RAMPB",description:{}},{name:"RAMPC",fn:Ui,mid:"RAMPC",description:{}},{name:"RAMPD",fn:Vi,mid:"RAMPD",description:{}},{name:"RAMPE",fn:Ji,mid:"RAMPE",description:{}},{name:"RAMPF",fn:Qi,mid:"RAMPF",description:{}},{name:"RAMPG",fn:yo,mid:"RAMPG",description:{}},{name:"RAMPH",fn:Nn,mid:"RAMPH",description:{}},{name:"RAMPI",fn:el,mid:"RAMPI",description:{}},{name:"RAW",fn:wo,mid:"RAW",description:{}}];function nl(e){return e.reduce((t,{values:n})=>t.flatMap(r=>n.map(o=>[...r,o])),[[]])}const rl=tl.reduce((e,t)=>{if(t.fn.params){const n=nl(t.fn.params);for(const r of n)e.push({...t,name:`${t.name} [${r.join(",")}]`,mid:`${t.mid}:[${r.join(",")}]`,speed:qi[t.mid]||0,fn:o=>t.fn.call(null,o,...r),valid:t.fn?.valid?o=>t.fn?.valid?.call(null,o,...r):void 0})}else e.push(t);return e},[]);function ol(e){if(e.length<2)return{totalDistance:0,avgAngleChange:0,maxAngleChange:0,meanDistance:0,devDistance:0,totalCurveDistance:0,meanCurveDistance:0,devCurveDistance:0,lchAvgChange:{L:0,C:0,H:0},lchMaxChange:{L:0,C:0,H:0},lchDeviation:{L:0,C:0,H:0},curveRatio:0,perceptualUniformity:0,curveUniformity:0,harmonicScore:0,harmonicCurveScore:0};const t=e.map(k=>ie(k)),n=e.map(k=>ue(k)),{totalDistance:r,avgAngleChange:o,devDistance:a,maxAngleChange:s,meanDistance:i}=xt(t),l=po(n);let c=0;const u=[],h=[t[0],...t,t[t.length-1]],f=[],m=[],p=[];for(let k=1;k<t.length;k++){const w=sl(h[k-1],h[k],h[k+1],h[k+2]);c+=w,u.push(w);const[G,B,F]=n[k-1],[Y,U,V]=n[k];if(f.push(Math.abs(Y-G)),m.push(Math.abs(U-B)),!isNaN(F)&&!isNaN(V)){let Q=Math.abs(V-F);Q>180&&(Q=360-Q),p.push(Q)}else isNaN(F)&&isNaN(V)?p.push(0):p.push(90)}const b=c/(t.length-1),d=Math.sqrt(u.reduce((k,w)=>k+Math.pow(w-b,2),0)/(t.length-1)),M={L:f.reduce((k,w)=>k+w,0)/f.length,C:m.reduce((k,w)=>k+w,0)/m.length,H:p.reduce((k,w)=>k+w,0)/p.length},_={L:Math.max(...f),C:Math.max(...m),H:Math.max(...p)},O=M.L,P=M.C,$=M.H,S={L:Math.sqrt(f.reduce((k,w)=>k+Math.pow(w-O,2),0)/f.length),C:Math.sqrt(m.reduce((k,w)=>k+Math.pow(w-P,2),0)/m.length),H:Math.sqrt(p.reduce((k,w)=>k+Math.pow(w-$,2),0)/p.length)},C=1/(1+a),g=1/(1+d),N=c/r-1,x=C*.4+Math.min(l/180,1)*.3+1/(1+S.H/45)*.3,A=g*.4+Math.min(l/180,1)*.3+1/(1+S.H/45)*.3;return{totalDistance:r,avgAngleChange:o,maxAngleChange:s,meanDistance:i,devDistance:a,totalCurveDistance:c,meanCurveDistance:b,devCurveDistance:d,lchAvgChange:M,lchMaxChange:_,lchDeviation:S,curveRatio:N,perceptualUniformity:C,curveUniformity:g,harmonicScore:x,harmonicCurveScore:A}}function al(e,t,n,r,o){const a=o*o,s=a*o;return[.5*(2*t[0]+(-e[0]+n[0])*o+(2*e[0]-5*t[0]+4*n[0]-r[0])*a+(-e[0]+3*t[0]-3*n[0]+r[0])*s),.5*(2*t[1]+(-e[1]+n[1])*o+(2*e[1]-5*t[1]+4*n[1]-r[1])*a+(-e[1]+3*t[1]-3*n[1]+r[1])*s),.5*(2*t[2]+(-e[2]+n[2])*o+(2*e[2]-5*t[2]+4*n[2]-r[2])*a+(-e[2]+3*t[2]-3*n[2]+r[2])*s)]}function sl(e,t,n,r,o=12){let a=0,s=t;for(let i=1;i<=o;i++){const l=i/o,c=al(e,t,n,r,l);a+=X(s,c),s=c}return a}function il(e,t=256){if(e.length<2)return e;const n=[],r=(e.length-1)/(t-1);for(let o=0;o<t;o++){const a=o*r,s=Math.floor(a),i=Math.min(s+1,e.length-1),l=a-s,c=e[s],u=e[i];n.push([c[0]*(1-l)+u[0]*l,c[1]*(1-l)+u[1]*l,c[2]*(1-l)+u[2]*l])}return n}function ll(e,t=256){const n=[],r=(e.length-1)/(t-1);for(let o=0;o<t;o++){const a=o*r,s=Math.floor(a),i=Math.min(s+1,e.length-1),l=a-s;n.push(e[s]*(1-l)+e[i]*l)}return n}function cl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var An,ko;function ul(){if(ko)return An;ko=1;function e(t){if(this.size=t|0,this.size<=1||(this.size&this.size-1)!==0)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var n=new Array(this.size*2),r=0;r<n.length;r+=2){const c=Math.PI*r/this.size;n[r]=Math.cos(c),n[r+1]=-Math.sin(c)}this.table=n;for(var o=0,a=1;this.size>a;a<<=1)o++;this._width=o%2===0?o-1:o,this._bitrev=new Array(1<<this._width);for(var s=0;s<this._bitrev.length;s++){this._bitrev[s]=0;for(var i=0;i<this._width;i+=2){var l=this._width-i-2;this._bitrev[s]|=(s>>>i&3)<<l}}this._out=null,this._data=null,this._inv=0}return An=e,e.prototype.fromComplexArray=function(t,n){for(var r=n||new Array(t.length>>>1),o=0;o<t.length;o+=2)r[o>>>1]=t[o];return r},e.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var n=0;n<t.length;n++)t[n]=0;return t},e.prototype.toComplexArray=function(t,n){for(var r=n||this.createComplexArray(),o=0;o<r.length;o+=2)r[o]=t[o>>>1],r[o+1]=0;return r},e.prototype.completeSpectrum=function(t){for(var n=this._csize,r=n>>>1,o=2;o<r;o+=2)t[n-o]=t[o],t[n-o+1]=-t[o+1]},e.prototype.transform=function(t,n){if(t===n)throw new Error("Input and output buffers must be different");this._out=t,this._data=n,this._inv=0,this._transform4(),this._out=null,this._data=null},e.prototype.realTransform=function(t,n){if(t===n)throw new Error("Input and output buffers must be different");this._out=t,this._data=n,this._inv=0,this._realTransform4(),this._out=null,this._data=null},e.prototype.inverseTransform=function(t,n){if(t===n)throw new Error("Input and output buffers must be different");this._out=t,this._data=n,this._inv=1,this._transform4();for(var r=0;r<t.length;r++)t[r]/=this.size;this._out=null,this._data=null},e.prototype._transform4=function(){var t=this._out,n=this._csize,r=this._width,o=1<<r,a=n/o<<1,s,i,l=this._bitrev;if(a===4)for(s=0,i=0;s<n;s+=a,i++){const b=l[i];this._singleTransform2(s,b,o)}else for(s=0,i=0;s<n;s+=a,i++){const b=l[i];this._singleTransform4(s,b,o)}var c=this._inv?-1:1,u=this.table;for(o>>=2;o>=2;o>>=2){a=n/o<<1;var h=a>>>2;for(s=0;s<n;s+=a)for(var f=s+h,m=s,p=0;m<f;m+=2,p+=o){const b=m,d=b+h,M=d+h,_=M+h,O=t[b],P=t[b+1],$=t[d],S=t[d+1],C=t[M],g=t[M+1],N=t[_],x=t[_+1],A=O,k=P,w=u[p],G=c*u[p+1],B=$*w-S*G,F=$*G+S*w,Y=u[2*p],U=c*u[2*p+1],V=C*Y-g*U,Q=C*U+g*Y,fe=u[3*p],ee=c*u[3*p+1],Ee=N*fe-x*ee,we=N*ee+x*fe,Se=A+V,ke=k+Q,de=A-V,rt=k-Q,ot=B+Ee,We=F+we,Ue=c*(B-Ee),at=c*(F-we),Et=Se+ot,xn=ke+We,_n=Se-ot,Cn=ke-We,En=de+at,On=rt-Ue,Pn=de-at,Rn=rt+Ue;t[b]=Et,t[b+1]=xn,t[d]=En,t[d+1]=On,t[M]=_n,t[M+1]=Cn,t[_]=Pn,t[_+1]=Rn}}},e.prototype._singleTransform2=function(t,n,r){const o=this._out,a=this._data,s=a[n],i=a[n+1],l=a[n+r],c=a[n+r+1],u=s+l,h=i+c,f=s-l,m=i-c;o[t]=u,o[t+1]=h,o[t+2]=f,o[t+3]=m},e.prototype._singleTransform4=function(t,n,r){const o=this._out,a=this._data,s=this._inv?-1:1,i=r*2,l=r*3,c=a[n],u=a[n+1],h=a[n+r],f=a[n+r+1],m=a[n+i],p=a[n+i+1],b=a[n+l],d=a[n+l+1],M=c+m,_=u+p,O=c-m,P=u-p,$=h+b,S=f+d,C=s*(h-b),g=s*(f-d),N=M+$,x=_+S,A=O+g,k=P-C,w=M-$,G=_-S,B=O-g,F=P+C;o[t]=N,o[t+1]=x,o[t+2]=A,o[t+3]=k,o[t+4]=w,o[t+5]=G,o[t+6]=B,o[t+7]=F},e.prototype._realTransform4=function(){var t=this._out,n=this._csize,r=this._width,o=1<<r,a=n/o<<1,s,i,l=this._bitrev;if(a===4)for(s=0,i=0;s<n;s+=a,i++){const Dn=l[i];this._singleRealTransform2(s,Dn>>>1,o>>>1)}else for(s=0,i=0;s<n;s+=a,i++){const Dn=l[i];this._singleRealTransform4(s,Dn>>>1,o>>>1)}var c=this._inv?-1:1,u=this.table;for(o>>=2;o>=2;o>>=2){a=n/o<<1;var h=a>>>1,f=h>>>1,m=f>>>1;for(s=0;s<n;s+=a)for(var p=0,b=0;p<=m;p+=2,b+=o){var d=s+p,M=d+f,_=M+f,O=_+f,P=t[d],$=t[d+1],S=t[M],C=t[M+1],g=t[_],N=t[_+1],x=t[O],A=t[O+1],k=P,w=$,G=u[b],B=c*u[b+1],F=S*G-C*B,Y=S*B+C*G,U=u[2*b],V=c*u[2*b+1],Q=g*U-N*V,fe=g*V+N*U,ee=u[3*b],Ee=c*u[3*b+1],we=x*ee-A*Ee,Se=x*Ee+A*ee,ke=k+Q,de=w+fe,rt=k-Q,ot=w-fe,We=F+we,Ue=Y+Se,at=c*(F-we),Et=c*(Y-Se),xn=ke+We,_n=de+Ue,Cn=rt+Et,En=ot-at;if(t[d]=xn,t[d+1]=_n,t[M]=Cn,t[M+1]=En,p===0){var On=ke-We,Pn=de-Ue;t[_]=On,t[_+1]=Pn;continue}if(p!==m){var Rn=rt,El=-ot,Ol=ke,Pl=-de,Rl=-c*Et,Dl=-c*at,$l=-c*Ue,Sl=-c*We,Ll=Rn+Rl,ql=El+Dl,zl=Ol+Sl,Gl=Pl-$l,Ao=s+f-p,xo=s+h-p;t[Ao]=Ll,t[Ao+1]=ql,t[xo]=zl,t[xo+1]=Gl}}}},e.prototype._singleRealTransform2=function(t,n,r){const o=this._out,a=this._data,s=a[n],i=a[n+r],l=s+i,c=s-i;o[t]=l,o[t+1]=0,o[t+2]=c,o[t+3]=0},e.prototype._singleRealTransform4=function(t,n,r){const o=this._out,a=this._data,s=this._inv?-1:1,i=r*2,l=r*3,c=a[n],u=a[n+r],h=a[n+i],f=a[n+l],m=c+h,p=c-h,b=u+f,d=s*(u-f),M=m+b,_=p,O=-d,P=m-b,$=p,S=d;o[t]=M,o[t+1]=0,o[t+2]=_,o[t+3]=O,o[t+4]=P,o[t+5]=0,o[t+6]=$,o[t+7]=S},An}var hl=ul();const fl=cl(hl);function Re(e){if(!e.length)return[0,0];const t=Math.pow(2,Math.ceil(Math.log(Math.max(2,e.length))/Math.log(2))),n=e.length<t?ll(e,t):e,r=new fl(t),o=r.createComplexArray();return r.realTransform(o,n),o}function De(e){return e.slice(2,Math.floor(e.length/2))}function $e(e){return Array.from({length:e.length/2}).map((t,n)=>Math.sqrt(e[n]**2+e[n+1]**2))}function dl(e,t=.03){const n=e.filter(o=>o[1]>=t&&o[1]!==void 0),r=e.filter(o=>o[1]<t||o[1]===void 0);return{chromatic:n,achromatic:r}}function ml(e){const t=e.map(c=>c[0]),n=e.map(c=>c[1]),r=e.map(c=>c[2]).map(c=>(c%360+360)%360),o=[...r].filter(c=>isFinite(c)).sort((c,u)=>c-u),a=[];for(let c=0;c<o.length-1;c++)a.push(o[c+1]-o[c]);o.length>0&&a.push(360-o[o.length-1]+o[0]);const s=$e(De(Re(a))),i=$e(De(Re(n))),l=$e(De(Re(t)));return{hueDeltaMags:s,chromaMags:i,lightnessMags:l,hues:r,hueDeltas:a,sortedHues:o,chromas:n,lightnesses:t}}function pl(e){const t=e.map(c=>c[0]),n=Ln(e.map(c=>c[1])),r=Ln(e.map(c=>c[2])),o=e.map((c,u)=>Math.sqrt(n[u]**2+r[u]**2)),a=$e(De(Re(t))),s=$e(De(Re(n))),i=$e(De(Re(r))),l=$e(De(Re(o)));return{lightnessMags:a,aMags:s,bMags:i,chromaMags:l}}function No({lightnessMags:e,aMags:t,bMags:n,chromaMags:r},o){return{lightness:o(e),a:o(t),b:o(n),chroma:o(r)}}function gl(e){const t=No(e,Ml),n=No(e,vl),{lightnessMags:r,aMags:o,bMags:a,chromaMags:s}=e,i={lightness:Ct(r,t.lightness),a:Ct(o,t.a),b:Ct(a,t.b),chroma:Ct(s,t.chroma)},l=o.map((m,p)=>Math.sqrt(m**2+a[p]**2)),c=yl(l),u=wl(l),h=kl(l),f=Nl(l,3);return{spectralCentroid:t,spectralSpread:i,spectralRolloff:n,energyRatios:c,smoothness:u,complexity:h,dominantFrequencies:f}}function bl(e){const t=il(e,256),n=pl(t),r=gl(n);return{...n,...r}}function Ml(e){const t=e.reduce((n,r)=>n+r,0);return t===0?0:e.reduce((n,r,o)=>n+r*o,0)/t/e.length}function Ct(e,t){const n=e.reduce((a,s)=>a+s,0);if(n===0)return 0;const r=t*e.length,o=e.reduce((a,s,i)=>a+s*(i-r)**2,0)/n;return Math.sqrt(o)/e.length}function vl(e,t=.85){const n=e.map(a=>a*a),r=n.reduce((a,s)=>a+s,0);if(r===0)return 0;let o=0;for(let a=0;a<e.length;a++)if(o+=n[a],o>=t*r)return a/e.length;return 1}function yl(e){const t=e.map(l=>l*l),n=t.reduce((l,c)=>l+c,0);if(n===0)return{lowFreq:0,midFreq:0,highFreq:0};const r=Math.floor(e.length*.3),o=Math.floor(e.length*.7),a=t.slice(0,r).reduce((l,c)=>l+c,0),s=t.slice(r,o).reduce((l,c)=>l+c,0),i=t.slice(o).reduce((l,c)=>l+c,0);return{lowFreq:a/n,midFreq:s/n,highFreq:i/n}}function wl(e){const t=Math.floor(e.length*.3),n=e.map(a=>a*a),r=n.slice(0,t).reduce((a,s)=>a+s,0),o=n.slice(t).reduce((a,s)=>a+s,0);return o>0?r/o:1/0}function kl(e){const t=e.reduce((n,r)=>n+r*r,0);return t===0?0:-e.map(n=>n*n/t).reduce((n,r)=>n+(r>0?r*Math.log(r):0),0)}function Nl(e,t){return e.map((n,r)=>({freq:r+1,mag:n})).sort((n,r)=>r.mag-n.mag).slice(0,t).map(n=>n.freq)}function Al(e){const{chromatic:t,achromatic:n}=dl(e),{hueDeltaMags:r,chromaMags:o,lightnessMags:a,hueDeltas:s,sortedHues:i,chromas:l,lightnesses:c}=ml(e),u=Math.max(...s),h=i.length>0?360-u:0,f=$n(l),m=$n(c),p=s.filter(g=>g>45).length,b=Ot(s),d=st(r),M=st(o),_=st(a),O=Sn(r),P=Sn(o);let $="unknown",S=0;h<60?($="monochromatic",S=.9):p>=2||O>.3?($="multi-ramp",S=Math.min(.95,.6+O)):h>300||p===0?($="full-spectrum",S=.85):($="wide-gamut",S=.7);const C=[O,P,f,m,p/s.length,(u||0)/360,t.length/e.length,...a.slice(0,4)];return{type:$,confidence:S,features:{hueSpread:h,chromaticCount:t.length,achromaticCount:n.length,largeGaps:p,avgGap:b,maxGap:u,chromaVariance:f,hueHighFreqRatio:O,chromaHighFreqRatio:P},fingerprint:C,spectra:{hueDeltaMags:r,chromaMags:o,lightnessMags:a,hueDeltaEnergy:d,chromaEnergy:M,lightnessEnergy:_}}}function xl(e){const t=Al(e),n=t?.spectra?.hueDeltaMags?t.spectra.hueDeltaMags.slice(0,16).map((r,o)=>({freq:o,hueDelta:r,chroma:t?.spectra?.chromaMags[o]||0,lightness:t?.spectra?.lightnessMags[o]||0})):[];return{analysis:t,spectrumData:n}}const _l=ue;async function Cl(e){const t=performance.now(),n=await e(),r=performance.now()-t;return{result:n,elapsed:r}}self.onmessage=async e=>{const{sortName:t,getPaletteType:n,palette:r,getFingerprint:o,getSpectral:a}=e.data;if(t){const s=rl.find(f=>f.name===t).fn,{result:i,elapsed:l}=await Cl(async()=>await s(r)),c=ie(i[0]),u=ie(i.at(-1));c[0]>u[0]&&i.reverse();const h=ol(i);self.postMessage({result:i,metrics:h,elapsed:l})}else if(n){const s=n.map(i=>ue(i));self.postMessage(yn(s))}else if(o){const s=o.map(i=>_l(i));self.postMessage(xl(s))}else if(a){const s=a.map(i=>ie(i));self.postMessage(bl(s))}}})();
