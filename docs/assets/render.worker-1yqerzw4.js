(function(){"use strict";const{min:On,max:xn}=Math;var lt=(t,e=0,n=1)=>On(xn(e,t),n),Kt=t=>{t._clipped=!1,t._unclipped=t.slice(0);for(let e=0;e<=3;e++)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]=lt(t[e],0,255)):e===3&&(t[e]=lt(t[e],0,1));return t};const ye={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])ye[`[object ${t}]`]=t.toLowerCase();function E(t){return ye[Object.prototype.toString.call(t)]||"object"}var A=(t,e=null)=>t.length>=3?Array.prototype.slice.call(t):E(t[0])=="object"&&e?e.split("").filter(n=>t[0][n]!==void 0).map(n=>t[0][n]):t[0].slice(0),dt=t=>{if(t.length<2)return null;const e=t.length-1;return E(t[e])=="string"?t[e].toLowerCase():null};const{PI:Ot,min:Ce,max:_e}=Math,X=t=>Math.round(t*100)/100,zt=t=>Math.round(t*100)/100,tt=Ot*2,It=Ot/3,Sn=Ot/180,Dn=180/Ot;function ve(t){return[...t.slice(0,3).reverse(),...t.slice(3)]}var v={format:{},autodetect:[]};let b=class{constructor(...e){const n=this;if(E(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let r=dt(e),s=!1;if(!r){s=!0,v.sorted||(v.autodetect=v.autodetect.sort((o,i)=>i.p-o.p),v.sorted=!0);for(let o of v.autodetect)if(r=o.test(...e),r)break}if(v.format[r]){const o=v.format[r].apply(null,s?e:e.slice(0,-1));n._rgb=Kt(o)}else throw new Error("unknown format: "+e);n._rgb.length===3&&n._rgb.push(1)}toString(){return E(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}};const $n="3.2.0",w=(...t)=>new b(...t);w.version=$n;const bt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Pn=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Rn=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Le=t=>{if(t.match(Pn)){(t.length===4||t.length===7)&&(t=t.substr(1)),t.length===3&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=parseInt(t,16),n=e>>16,r=e>>8&255,s=e&255;return[n,r,s,1]}if(t.match(Rn)){(t.length===5||t.length===9)&&(t=t.substr(1)),t.length===4&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16),n=e>>24&255,r=e>>16&255,s=e>>8&255,o=Math.round((e&255)/255*100)/100;return[n,r,s,o]}throw new Error(`unknown hex color: ${t}`)},{round:xt}=Math,Ae=(...t)=>{let[e,n,r,s]=A(t,"rgba"),o=dt(t)||"auto";s===void 0&&(s=1),o==="auto"&&(o=s<1?"rgba":"rgb"),e=xt(e),n=xt(n),r=xt(r);let c="000000"+(e<<16|n<<8|r).toString(16);c=c.substr(c.length-6);let a="0"+xt(s*255).toString(16);switch(a=a.substr(a.length-2),o.toLowerCase()){case"rgba":return`#${c}${a}`;case"argb":return`#${a}${c}`;default:return`#${c}`}};b.prototype.name=function(){const t=Ae(this._rgb,"rgb");for(let e of Object.keys(bt))if(bt[e]===t)return e.toLowerCase();return t},v.format.named=t=>{if(t=t.toLowerCase(),bt[t])return Le(bt[t]);throw new Error("unknown color name: "+t)},v.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&E(t)==="string"&&bt[t.toLowerCase()])return"named"}}),b.prototype.alpha=function(t,e=!1){return t!==void 0&&E(t)==="number"?e?(this._rgb[3]=t,this):new b([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},b.prototype.clipped=function(){return this._rgb._clipped||!1};const Q={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},Bn=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function et(t){const e=Bn.get(String(t).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+t);Q.labWhitePoint=t,Q.Xn=e[0],Q.Zn=e[1]}function Nt(){return Q.labWhitePoint}const jt=(...t)=>{t=A(t,"lab");const[e,n,r]=t,[s,o,i]=Gn(e,n,r),[c,a,l]=Ee(s,o,i);return[c,a,l,t.length>3?t[3]:1]},Gn=(t,e,n)=>{const{kE:r,kK:s,kKE:o,Xn:i,Yn:c,Zn:a}=Q,l=(t+16)/116,f=.002*e+l,u=l-.005*n,h=f*f*f,m=u*u*u,g=h>r?h:(116*f-16)/s,N=t>o?Math.pow((t+16)/116,3):t/s,p=m>r?m:(116*u-16)/s,M=g*i,z=N*c,$=p*a;return[M,z,$]},Tt=t=>{const e=Math.sign(t);return t=Math.abs(t),(t<=.0031308?t*12.92:1.055*Math.pow(t,1/2.4)-.055)*e},Ee=(t,e,n)=>{const{MtxAdaptMa:r,MtxAdaptMaI:s,MtxXYZ2RGB:o,RefWhiteRGB:i,Xn:c,Yn:a,Zn:l}=Q,f=c*r.m00+a*r.m10+l*r.m20,u=c*r.m01+a*r.m11+l*r.m21,h=c*r.m02+a*r.m12+l*r.m22,m=i.X*r.m00+i.Y*r.m10+i.Z*r.m20,g=i.X*r.m01+i.Y*r.m11+i.Z*r.m21,N=i.X*r.m02+i.Y*r.m12+i.Z*r.m22,p=(t*r.m00+e*r.m10+n*r.m20)*(m/f),M=(t*r.m01+e*r.m11+n*r.m21)*(g/u),z=(t*r.m02+e*r.m12+n*r.m22)*(N/h),$=p*s.m00+M*s.m10+z*s.m20,B=p*s.m01+M*s.m11+z*s.m21,K=p*s.m02+M*s.m12+z*s.m22,q=Tt($*o.m00+B*o.m10+K*o.m20),O=Tt($*o.m01+B*o.m11+K*o.m21),d=Tt($*o.m02+B*o.m12+K*o.m22);return[q*255,O*255,d*255]},Yt=(...t)=>{const[e,n,r,...s]=A(t,"rgb"),[o,i,c]=Ne(e,n,r),[a,l,f]=Hn(o,i,c);return[a,l,f,...s.length>0&&s[0]<1?[s[0]]:[]]};function Hn(t,e,n){const{Xn:r,Yn:s,Zn:o,kE:i,kK:c}=Q,a=t/r,l=e/s,f=n/o,u=a>i?Math.pow(a,1/3):(c*a+16)/116,h=l>i?Math.pow(l,1/3):(c*l+16)/116,m=f>i?Math.pow(f,1/3):(c*f+16)/116;return[116*h-16,500*(u-h),200*(h-m)]}function qt(t){const e=Math.sign(t);return t=Math.abs(t),(t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))*e}const Ne=(t,e,n)=>{t=qt(t/255),e=qt(e/255),n=qt(n/255);const{MtxRGB2XYZ:r,MtxAdaptMa:s,MtxAdaptMaI:o,Xn:i,Yn:c,Zn:a,As:l,Bs:f,Cs:u}=Q;let h=t*r.m00+e*r.m10+n*r.m20,m=t*r.m01+e*r.m11+n*r.m21,g=t*r.m02+e*r.m12+n*r.m22;const N=i*s.m00+c*s.m10+a*s.m20,p=i*s.m01+c*s.m11+a*s.m21,M=i*s.m02+c*s.m12+a*s.m22;let z=h*s.m00+m*s.m10+g*s.m20,$=h*s.m01+m*s.m11+g*s.m21,B=h*s.m02+m*s.m12+g*s.m22;return z*=N/l,$*=p/f,B*=M/u,h=z*o.m00+$*o.m10+B*o.m20,m=z*o.m01+$*o.m11+B*o.m21,g=z*o.m02+$*o.m12+B*o.m22,[h,m,g]};b.prototype.lab=function(){return Yt(this._rgb)},Object.assign(w,{lab:(...t)=>new b(...t,"lab"),getLabWhitePoint:Nt,setLabWhitePoint:et}),v.format.lab=jt,v.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"lab"),E(t)==="array"&&t.length===3)return"lab"}}),b.prototype.darken=function(t=1){const e=this,n=e.lab();return n[0]-=Q.Kn*t,new b(n,"lab").alpha(e.alpha(),!0)},b.prototype.brighten=function(t=1){return this.darken(-t)},b.prototype.darker=b.prototype.darken,b.prototype.brighter=b.prototype.brighten,b.prototype.get=function(t){const[e,n]=t.split("."),r=this[e]();if(n){const s=e.indexOf(n)-(e.substr(0,2)==="ok"?2:0);if(s>-1)return r[s];throw new Error(`unknown channel ${n} in mode ${e}`)}else return r};const{pow:Kn}=Math,zn=1e-7,In=20;b.prototype.luminance=function(t,e="rgb"){if(t!==void 0&&E(t)==="number"){if(t===0)return new b([0,0,0,this._rgb[3]],"rgb");if(t===1)return new b([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),r=In;const s=(i,c)=>{const a=i.interpolate(c,.5,e),l=a.luminance();return Math.abs(t-l)<zn||!r--?a:l>t?s(i,a):s(a,c)},o=(n>t?s(new b([0,0,0]),this):s(this,new b([255,255,255]))).rgb();return new b([...o,this._rgb[3]])}return jn(...this._rgb.slice(0,3))};const jn=(t,e,n)=>(t=Xt(t),e=Xt(e),n=Xt(n),.2126*t+.7152*e+.0722*n),Xt=t=>(t/=255,t<=.03928?t/12.92:Kn((t+.055)/1.055,2.4));var j={},mt=(t,e,n=.5,...r)=>{let s=r[0]||"lrgb";if(!j[s]&&!r.length&&(s=Object.keys(j)[0]),!j[s])throw new Error(`interpolation mode ${s} is not defined`);return E(t)!=="object"&&(t=new b(t)),E(e)!=="object"&&(e=new b(e)),j[s](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))};b.prototype.mix=b.prototype.interpolate=function(t,e=.5,...n){return mt(this,t,e,...n)},b.prototype.premultiply=function(t=!1){const e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new b([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};const{sin:Tn,cos:Yn}=Math,Oe=(...t)=>{let[e,n,r]=A(t,"lch");return isNaN(r)&&(r=0),r=r*Sn,[e,Yn(r)*n,Tn(r)*n]},Ft=(...t)=>{t=A(t,"lch");const[e,n,r]=t,[s,o,i]=Oe(e,n,r),[c,a,l]=jt(s,o,i);return[c,a,l,t.length>3?t[3]:1]},qn=(...t)=>{const e=ve(A(t,"hcl"));return Ft(...e)},{sqrt:Xn,atan2:Fn,round:Wn}=Math,xe=(...t)=>{const[e,n,r]=A(t,"lab"),s=Xn(n*n+r*r);let o=(Fn(r,n)*Dn+360)%360;return Wn(s*1e4)===0&&(o=Number.NaN),[e,s,o]},Wt=(...t)=>{const[e,n,r,...s]=A(t,"rgb"),[o,i,c]=Yt(e,n,r),[a,l,f]=xe(o,i,c);return[a,l,f,...s.length>0&&s[0]<1?[s[0]]:[]]};b.prototype.lch=function(){return Wt(this._rgb)},b.prototype.hcl=function(){return ve(Wt(this._rgb))},Object.assign(w,{lch:(...t)=>new b(...t,"lch"),hcl:(...t)=>new b(...t,"hcl")}),v.format.lch=Ft,v.format.hcl=qn,["lch","hcl"].forEach(t=>v.autodetect.push({p:2,test:(...e)=>{if(e=A(e,t),E(e)==="array"&&e.length===3)return t}})),b.prototype.saturate=function(t=1){const e=this,n=e.lch();return n[1]+=Q.Kn*t,n[1]<0&&(n[1]=0),new b(n,"lch").alpha(e.alpha(),!0)},b.prototype.desaturate=function(t=1){return this.saturate(-t)},b.prototype.set=function(t,e,n=!1){const[r,s]=t.split("."),o=this[r]();if(s){const i=r.indexOf(s)-(r.substr(0,2)==="ok"?2:0);if(i>-1){if(E(e)=="string")switch(e.charAt(0)){case"+":o[i]+=+e;break;case"-":o[i]+=+e;break;case"*":o[i]*=+e.substr(1);break;case"/":o[i]/=+e.substr(1);break;default:o[i]=+e}else if(E(e)==="number")o[i]=e;else throw new Error("unsupported value for Color.set");const c=new b(o,r);return n?(this._rgb=c._rgb,this):c}throw new Error(`unknown channel ${s} in mode ${r}`)}else return o},b.prototype.tint=function(t=.5,...e){return mt(this,"white",t,...e)},b.prototype.shade=function(t=.5,...e){return mt(this,"black",t,...e)};const Zn=(t,e,n)=>{const r=t._rgb,s=e._rgb;return new b(r[0]+n*(s[0]-r[0]),r[1]+n*(s[1]-r[1]),r[2]+n*(s[2]-r[2]),"rgb")};j.rgb=Zn;const{sqrt:Zt,pow:pt}=Math,Vn=(t,e,n)=>{const[r,s,o]=t._rgb,[i,c,a]=e._rgb;return new b(Zt(pt(r,2)*(1-n)+pt(i,2)*n),Zt(pt(s,2)*(1-n)+pt(c,2)*n),Zt(pt(o,2)*(1-n)+pt(a,2)*n),"rgb")};j.lrgb=Vn;const Un=(t,e,n)=>{const r=t.lab(),s=e.lab();return new b(r[0]+n*(s[0]-r[0]),r[1]+n*(s[1]-r[1]),r[2]+n*(s[2]-r[2]),"lab")};j.lab=Un;var gt=(t,e,n,r)=>{let s,o;r==="hsl"?(s=t.hsl(),o=e.hsl()):r==="hsv"?(s=t.hsv(),o=e.hsv()):r==="hcg"?(s=t.hcg(),o=e.hcg()):r==="hsi"?(s=t.hsi(),o=e.hsi()):r==="lch"||r==="hcl"?(r="hcl",s=t.hcl(),o=e.hcl()):r==="oklch"&&(s=t.oklch().reverse(),o=e.oklch().reverse());let i,c,a,l,f,u;(r.substr(0,1)==="h"||r==="oklch")&&([i,a,f]=s,[c,l,u]=o);let h,m,g,N;return!isNaN(i)&&!isNaN(c)?(c>i&&c-i>180?N=c-(i+360):c<i&&i-c>180?N=c+360-i:N=c-i,m=i+n*N):isNaN(i)?isNaN(c)?m=Number.NaN:(m=c,(f==1||f==0)&&r!="hsv"&&(h=l)):(m=i,(u==1||u==0)&&r!="hsv"&&(h=a)),h===void 0&&(h=a+n*(l-a)),g=f+n*(u-f),r==="oklch"?new b([g,h,m],r):new b([m,h,g],r)};const Se=(t,e,n)=>gt(t,e,n,"lch");j.lch=Se,j.hcl=Se;const Jn=t=>{if(E(t)=="number"&&t>=0&&t<=16777215){const e=t>>16,n=t>>8&255,r=t&255;return[e,n,r,1]}throw new Error("unknown num color: "+t)},Qn=(...t)=>{const[e,n,r]=A(t,"rgb");return(e<<16)+(n<<8)+r};b.prototype.num=function(){return Qn(this._rgb)},Object.assign(w,{num:(...t)=>new b(...t,"num")}),v.format.num=Jn,v.autodetect.push({p:5,test:(...t)=>{if(t.length===1&&E(t[0])==="number"&&t[0]>=0&&t[0]<=16777215)return"num"}});const tr=(t,e,n)=>{const r=t.num(),s=e.num();return new b(r+n*(s-r),"num")};j.num=tr;const{floor:er}=Math,nr=(...t)=>{t=A(t,"hcg");let[e,n,r]=t,s,o,i;r=r*255;const c=n*255;if(n===0)s=o=i=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const a=er(e),l=e-a,f=r*(1-n),u=f+c*(1-l),h=f+c*l,m=f+c;switch(a){case 0:[s,o,i]=[m,h,f];break;case 1:[s,o,i]=[u,m,f];break;case 2:[s,o,i]=[f,m,h];break;case 3:[s,o,i]=[f,u,m];break;case 4:[s,o,i]=[h,f,m];break;case 5:[s,o,i]=[m,f,u];break}}return[s,o,i,t.length>3?t[3]:1]},rr=(...t)=>{const[e,n,r]=A(t,"rgb"),s=Ce(e,n,r),o=_e(e,n,r),i=o-s,c=i*100/255,a=s/(255-i)*100;let l;return i===0?l=Number.NaN:(e===o&&(l=(n-r)/i),n===o&&(l=2+(r-e)/i),r===o&&(l=4+(e-n)/i),l*=60,l<0&&(l+=360)),[l,c,a]};b.prototype.hcg=function(){return rr(this._rgb)};const sr=(...t)=>new b(...t,"hcg");w.hcg=sr,v.format.hcg=nr,v.autodetect.push({p:1,test:(...t)=>{if(t=A(t,"hcg"),E(t)==="array"&&t.length===3)return"hcg"}});const or=(t,e,n)=>gt(t,e,n,"hcg");j.hcg=or;const{cos:wt}=Math,ir=(...t)=>{t=A(t,"hsi");let[e,n,r]=t,s,o,i;return isNaN(e)&&(e=0),isNaN(n)&&(n=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(i=(1-n)/3,s=(1+n*wt(tt*e)/wt(It-tt*e))/3,o=1-(i+s)):e<2/3?(e-=1/3,s=(1-n)/3,o=(1+n*wt(tt*e)/wt(It-tt*e))/3,i=1-(s+o)):(e-=2/3,o=(1-n)/3,i=(1+n*wt(tt*e)/wt(It-tt*e))/3,s=1-(o+i)),s=lt(r*s*3),o=lt(r*o*3),i=lt(r*i*3),[s*255,o*255,i*255,t.length>3?t[3]:1]},{min:cr,sqrt:ar,acos:lr}=Math,fr=(...t)=>{let[e,n,r]=A(t,"rgb");e/=255,n/=255,r/=255;let s;const o=cr(e,n,r),i=(e+n+r)/3,c=i>0?1-o/i:0;return c===0?s=NaN:(s=(e-n+(e-r))/2,s/=ar((e-n)*(e-n)+(e-r)*(n-r)),s=lr(s),r>n&&(s=tt-s),s/=tt),[s*360,c,i]};b.prototype.hsi=function(){return fr(this._rgb)};const ur=(...t)=>new b(...t,"hsi");w.hsi=ur,v.format.hsi=ir,v.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"hsi"),E(t)==="array"&&t.length===3)return"hsi"}});const hr=(t,e,n)=>gt(t,e,n,"hsi");j.hsi=hr;const Vt=(...t)=>{t=A(t,"hsl");const[e,n,r]=t;let s,o,i;if(n===0)s=o=i=r*255;else{const c=[0,0,0],a=[0,0,0],l=r<.5?r*(1+n):r+n-r*n,f=2*r-l,u=e/360;c[0]=u+1/3,c[1]=u,c[2]=u-1/3;for(let h=0;h<3;h++)c[h]<0&&(c[h]+=1),c[h]>1&&(c[h]-=1),6*c[h]<1?a[h]=f+(l-f)*6*c[h]:2*c[h]<1?a[h]=l:3*c[h]<2?a[h]=f+(l-f)*(2/3-c[h])*6:a[h]=f;[s,o,i]=[a[0]*255,a[1]*255,a[2]*255]}return t.length>3?[s,o,i,t[3]]:[s,o,i,1]},De=(...t)=>{t=A(t,"rgba");let[e,n,r]=t;e/=255,n/=255,r/=255;const s=Ce(e,n,r),o=_e(e,n,r),i=(o+s)/2;let c,a;return o===s?(c=0,a=Number.NaN):c=i<.5?(o-s)/(o+s):(o-s)/(2-o-s),e==o?a=(n-r)/(o-s):n==o?a=2+(r-e)/(o-s):r==o&&(a=4+(e-n)/(o-s)),a*=60,a<0&&(a+=360),t.length>3&&t[3]!==void 0?[a,c,i,t[3]]:[a,c,i]};b.prototype.hsl=function(){return De(this._rgb)};const dr=(...t)=>new b(...t,"hsl");w.hsl=dr,v.format.hsl=Vt,v.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"hsl"),E(t)==="array"&&t.length===3)return"hsl"}});const br=(t,e,n)=>gt(t,e,n,"hsl");j.hsl=br;const{floor:mr}=Math,pr=(...t)=>{t=A(t,"hsv");let[e,n,r]=t,s,o,i;if(r*=255,n===0)s=o=i=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const c=mr(e),a=e-c,l=r*(1-n),f=r*(1-n*a),u=r*(1-n*(1-a));switch(c){case 0:[s,o,i]=[r,u,l];break;case 1:[s,o,i]=[f,r,l];break;case 2:[s,o,i]=[l,r,u];break;case 3:[s,o,i]=[l,f,r];break;case 4:[s,o,i]=[u,l,r];break;case 5:[s,o,i]=[r,l,f];break}}return[s,o,i,t.length>3?t[3]:1]},{min:gr,max:wr}=Math,kr=(...t)=>{t=A(t,"rgb");let[e,n,r]=t;const s=gr(e,n,r),o=wr(e,n,r),i=o-s;let c,a,l;return l=o/255,o===0?(c=Number.NaN,a=0):(a=i/o,e===o&&(c=(n-r)/i),n===o&&(c=2+(r-e)/i),r===o&&(c=4+(e-n)/i),c*=60,c<0&&(c+=360)),[c,a,l]};b.prototype.hsv=function(){return kr(this._rgb)};const Mr=(...t)=>new b(...t,"hsv");w.hsv=Mr,v.format.hsv=pr,v.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"hsv"),E(t)==="array"&&t.length===3)return"hsv"}});const yr=(t,e,n)=>gt(t,e,n,"hsv");j.hsv=yr;function St(t,e){let n=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(i=>[i]));let r=e[0].length,s=e[0].map((i,c)=>e.map(a=>a[c])),o=t.map(i=>s.map(c=>Array.isArray(i)?i.reduce((a,l,f)=>a+l*(c[f]||0),0):c.reduce((a,l)=>a+l*i,0)));return n===1&&(o=o[0]),r===1?o.map(i=>i[0]):o}const Ut=(...t)=>{t=A(t,"lab");const[e,n,r,...s]=t,[o,i,c]=Cr([e,n,r]),[a,l,f]=Ee(o,i,c);return[a,l,f,...s.length>0&&s[0]<1?[s[0]]:[]]};function Cr(t){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],n=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],r=St(n,t);return St(e,r.map(s=>s**3))}const Jt=(...t)=>{const[e,n,r,...s]=A(t,"rgb"),o=Ne(e,n,r);return[..._r(o),...s.length>0&&s[0]<1?[s[0]]:[]]};function _r(t){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],n=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=St(e,t);return St(n,r.map(s=>Math.cbrt(s)))}b.prototype.oklab=function(){return Jt(this._rgb)},Object.assign(w,{oklab:(...t)=>new b(...t,"oklab")}),v.format.oklab=Ut,v.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"oklab"),E(t)==="array"&&t.length===3)return"oklab"}});const vr=(t,e,n)=>{const r=t.oklab(),s=e.oklab();return new b(r[0]+n*(s[0]-r[0]),r[1]+n*(s[1]-r[1]),r[2]+n*(s[2]-r[2]),"oklab")};j.oklab=vr;const Lr=(t,e,n)=>gt(t,e,n,"oklch");j.oklch=Lr;const{pow:Qt,sqrt:te,PI:ee,cos:$e,sin:Pe,atan2:Ar}=Math;var Er=(t,e="lrgb",n=null)=>{const r=t.length;n||(n=Array.from(new Array(r)).map(()=>1));const s=r/n.reduce(function(u,h){return u+h});if(n.forEach((u,h)=>{n[h]*=s}),t=t.map(u=>new b(u)),e==="lrgb")return Nr(t,n);const o=t.shift(),i=o.get(e),c=[];let a=0,l=0;for(let u=0;u<i.length;u++)if(i[u]=(i[u]||0)*n[0],c.push(isNaN(i[u])?0:n[0]),e.charAt(u)==="h"&&!isNaN(i[u])){const h=i[u]/180*ee;a+=$e(h)*n[0],l+=Pe(h)*n[0]}let f=o.alpha()*n[0];t.forEach((u,h)=>{const m=u.get(e);f+=u.alpha()*n[h+1];for(let g=0;g<i.length;g++)if(!isNaN(m[g]))if(c[g]+=n[h+1],e.charAt(g)==="h"){const N=m[g]/180*ee;a+=$e(N)*n[h+1],l+=Pe(N)*n[h+1]}else i[g]+=m[g]*n[h+1]});for(let u=0;u<i.length;u++)if(e.charAt(u)==="h"){let h=Ar(l/c[u],a/c[u])/ee*180;for(;h<0;)h+=360;for(;h>=360;)h-=360;i[u]=h}else i[u]=i[u]/c[u];return f/=r,new b(i,e).alpha(f>.99999?1:f,!0)};const Nr=(t,e)=>{const n=t.length,r=[0,0,0,0];for(let s=0;s<t.length;s++){const o=t[s],i=e[s]/n,c=o._rgb;r[0]+=Qt(c[0],2)*i,r[1]+=Qt(c[1],2)*i,r[2]+=Qt(c[2],2)*i,r[3]+=c[3]*i}return r[0]=te(r[0]),r[1]=te(r[1]),r[2]=te(r[2]),r[3]>.9999999&&(r[3]=1),new b(Kt(r))},{pow:Or}=Math;function Dt(t){let e="rgb",n=w("#ccc"),r=0,s=[0,1],o=[0,1],i=[],c=[0,0],a=!1,l=[],f=!1,u=0,h=1,m=!1,g={},N=!0,p=1;const M=function(d){if(d=d||["#fff","#000"],d&&E(d)==="string"&&w.brewer&&w.brewer[d.toLowerCase()]&&(d=w.brewer[d.toLowerCase()]),E(d)==="array"){d.length===1&&(d=[d[0],d[0]]),d=d.slice(0);for(let k=0;k<d.length;k++)d[k]=w(d[k]);i.length=0;for(let k=0;k<d.length;k++)i.push(k/(d.length-1))}return q(),l=d},z=function(d){if(a!=null){const k=a.length-1;let _=0;for(;_<k&&d>=a[_];)_++;return _-1}return 0};let $=d=>d,B=d=>d;const K=function(d,k){let _,y;if(k==null&&(k=!1),isNaN(d)||d===null)return n;k?y=d:a&&a.length>2?y=z(d)/(a.length-2):h!==u?y=(d-u)/(h-u):y=1,y=B(y),k||(y=$(y)),p!==1&&(y=Or(y,p)),y=c[0]+y*(1-c[0]-c[1]),y=lt(y,0,1);const x=Math.floor(y*1e4);if(N&&g[x])_=g[x];else{if(E(l)==="array")for(let C=0;C<i.length;C++){const I=i[C];if(y<=I){_=l[C];break}if(y>=I&&C===i.length-1){_=l[C];break}if(y>I&&y<i[C+1]){y=(y-I)/(i[C+1]-I),_=w.interpolate(l[C],l[C+1],y,e);break}}else E(l)==="function"&&(_=l(y));N&&(g[x]=_)}return _};var q=()=>g={};M(t);const O=function(d){const k=w(K(d));return f&&k[f]?k[f]():k};return O.classes=function(d){if(d!=null){if(E(d)==="array")a=d,s=[d[0],d[d.length-1]];else{const k=w.analyze(s);d===0?a=[k.min,k.max]:a=w.limits(k,"e",d)}return O}return a},O.domain=function(d){if(!arguments.length)return o;o=d.slice(0),u=d[0],h=d[d.length-1],i=[];const k=l.length;if(d.length===k&&u!==h)for(let _ of Array.from(d))i.push((_-u)/(h-u));else{for(let _=0;_<k;_++)i.push(_/(k-1));if(d.length>2){const _=d.map((x,C)=>C/(d.length-1)),y=d.map(x=>(x-u)/(h-u));y.every((x,C)=>_[C]===x)||(B=x=>{if(x<=0||x>=1)return x;let C=0;for(;x>=y[C+1];)C++;const I=(x-y[C])/(y[C+1]-y[C]);return _[C]+I*(_[C+1]-_[C])})}}return s=[u,h],O},O.mode=function(d){return arguments.length?(e=d,q(),O):e},O.range=function(d,k){return M(d),O},O.out=function(d){return f=d,O},O.spread=function(d){return arguments.length?(r=d,O):r},O.correctLightness=function(d){return d==null&&(d=!0),m=d,q(),m?$=function(k){const _=K(0,!0).lab()[0],y=K(1,!0).lab()[0],x=_>y;let C=K(k,!0).lab()[0];const I=_+(y-_)*k;let J=C-I,vt=0,ht=1,Lt=20;for(;Math.abs(J)>.01&&Lt-- >0;)(function(){return x&&(J*=-1),J<0?(vt=k,k+=(ht-k)*.5):(ht=k,k+=(vt-k)*.5),C=K(k,!0).lab()[0],J=C-I})();return k}:$=k=>k,O},O.padding=function(d){return d!=null?(E(d)==="number"&&(d=[d,d]),c=d,O):c},O.colors=function(d,k){arguments.length<2&&(k="hex");let _=[];if(arguments.length===0)_=l.slice(0);else if(d===1)_=[O(.5)];else if(d>1){const y=s[0],x=s[1]-y;_=xr(0,d).map(C=>O(y+C/(d-1)*x))}else{t=[];let y=[];if(a&&a.length>2)for(let x=1,C=a.length,I=1<=C;I?x<C:x>C;I?x++:x--)y.push((a[x-1]+a[x])*.5);else y=s;_=y.map(x=>O(x))}return w[k]&&(_=_.map(y=>y[k]())),_},O.cache=function(d){return d!=null?(N=d,O):N},O.gamma=function(d){return d!=null?(p=d,O):p},O.nodata=function(d){return d!=null?(n=w(d),O):n},O}function xr(t,e,n){let r=[],s=t<e,o=e;for(let i=t;s?i<o:i>o;s?i++:i--)r.push(i);return r}const Sr=function(t){let e=[1,1];for(let n=1;n<t;n++){let r=[1];for(let s=1;s<=e.length;s++)r[s]=(e[s]||0)+e[s-1];e=r}return e},Dr=function(t){let e,n,r,s;if(t=t.map(o=>new b(o)),t.length===2)[n,r]=t.map(o=>o.lab()),e=function(o){const i=[0,1,2].map(c=>n[c]+o*(r[c]-n[c]));return new b(i,"lab")};else if(t.length===3)[n,r,s]=t.map(o=>o.lab()),e=function(o){const i=[0,1,2].map(c=>(1-o)*(1-o)*n[c]+2*(1-o)*o*r[c]+o*o*s[c]);return new b(i,"lab")};else if(t.length===4){let o;[n,r,s,o]=t.map(i=>i.lab()),e=function(i){const c=[0,1,2].map(a=>(1-i)*(1-i)*(1-i)*n[a]+3*(1-i)*(1-i)*i*r[a]+3*(1-i)*i*i*s[a]+i*i*i*o[a]);return new b(c,"lab")}}else if(t.length>=5){let o,i,c;o=t.map(a=>a.lab()),c=t.length-1,i=Sr(c),e=function(a){const l=1-a,f=[0,1,2].map(u=>o.reduce((h,m,g)=>h+i[g]*l**(c-g)*a**g*m[u],0));return new b(f,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e};var $r=t=>{const e=Dr(t);return e.scale=()=>Dt(e),e};const{round:Re}=Math;b.prototype.rgb=function(t=!0){return t===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Re)},b.prototype.rgba=function(t=!0){return this._rgb.slice(0,4).map((e,n)=>n<3?t===!1?e:Re(e):e)},Object.assign(w,{rgb:(...t)=>new b(...t,"rgb")}),v.format.rgb=(...t)=>{const e=A(t,"rgba");return e[3]===void 0&&(e[3]=1),e},v.autodetect.push({p:3,test:(...t)=>{if(t=A(t,"rgba"),E(t)==="array"&&(t.length===3||t.length===4&&E(t[3])=="number"&&t[3]>=0&&t[3]<=1))return"rgb"}});const W=(t,e,n)=>{if(!W[n])throw new Error("unknown blend mode "+n);return W[n](t,e)},ct=t=>(e,n)=>{const r=w(n).rgb(),s=w(e).rgb();return w.rgb(t(r,s))},at=t=>(e,n)=>{const r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r},Pr=t=>t,Rr=(t,e)=>t*e/255,Br=(t,e)=>t>e?e:t,Gr=(t,e)=>t>e?t:e,Hr=(t,e)=>255*(1-(1-t/255)*(1-e/255)),Kr=(t,e)=>e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255)),zr=(t,e)=>255*(1-(1-e/255)/(t/255)),Ir=(t,e)=>t===255?255:(t=255*(e/255)/(1-t/255),t>255?255:t);W.normal=ct(at(Pr)),W.multiply=ct(at(Rr)),W.screen=ct(at(Hr)),W.overlay=ct(at(Kr)),W.darken=ct(at(Br)),W.lighten=ct(at(Gr)),W.dodge=ct(at(Ir)),W.burn=ct(at(zr));const{pow:jr,sin:Tr,cos:Yr}=Math;function qr(t=300,e=-1.5,n=1,r=1,s=[0,1]){let o=0,i;E(s)==="array"?i=s[1]-s[0]:(i=0,s=[s,s]);const c=function(a){const l=tt*((t+120)/360+e*a),f=jr(s[0]+i*a,r),h=(o!==0?n[0]+a*o:n)*f*(1-f)/2,m=Yr(l),g=Tr(l),N=f+h*(-.14861*m+1.78277*g),p=f+h*(-.29227*m-.90649*g),M=f+h*(1.97294*m);return w(Kt([N*255,p*255,M*255,1]))};return c.start=function(a){return a==null?t:(t=a,c)},c.rotations=function(a){return a==null?e:(e=a,c)},c.gamma=function(a){return a==null?r:(r=a,c)},c.hue=function(a){return a==null?n:(n=a,E(n)==="array"?(o=n[1]-n[0],o===0&&(n=n[1])):o=0,c)},c.lightness=function(a){return a==null?s:(E(a)==="array"?(s=a,i=a[1]-a[0]):(s=[a,a],i=0),c)},c.scale=()=>w.scale(c),c.hue(n),c}const Xr="0123456789abcdef",{floor:Fr,random:Wr}=Math;var Zr=(t=Wr)=>{let e="#";for(let n=0;n<6;n++)e+=Xr.charAt(Fr(t()*16));return new b(e,"hex")};const{log:Be,pow:Vr,floor:Ur,abs:Jr}=Math;function Ge(t,e=null){const n={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return E(t)==="object"&&(t=Object.values(t)),t.forEach(r=>{e&&E(r)==="object"&&(r=r[e]),r!=null&&!isNaN(r)&&(n.values.push(r),n.sum+=r,r<n.min&&(n.min=r),r>n.max&&(n.max=r),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(r,s)=>He(n,r,s),n}function He(t,e="equal",n=7){E(t)=="array"&&(t=Ge(t));const{min:r,max:s}=t,o=t.values.sort((c,a)=>c-a);if(n===1)return[r,s];const i=[];if(e.substr(0,1)==="c"&&(i.push(r),i.push(s)),e.substr(0,1)==="e"){i.push(r);for(let c=1;c<n;c++)i.push(r+c/n*(s-r));i.push(s)}else if(e.substr(0,1)==="l"){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const c=Math.LOG10E*Be(r),a=Math.LOG10E*Be(s);i.push(r);for(let l=1;l<n;l++)i.push(Vr(10,c+l/n*(a-c)));i.push(s)}else if(e.substr(0,1)==="q"){i.push(r);for(let c=1;c<n;c++){const a=(o.length-1)*c/n,l=Ur(a);if(l===a)i.push(o[l]);else{const f=a-l;i.push(o[l]*(1-f)+o[l+1]*f)}}i.push(s)}else if(e.substr(0,1)==="k"){let c;const a=o.length,l=new Array(a),f=new Array(n);let u=!0,h=0,m=null;m=[],m.push(r);for(let p=1;p<n;p++)m.push(r+p/n*(s-r));for(m.push(s);u;){for(let M=0;M<n;M++)f[M]=0;for(let M=0;M<a;M++){const z=o[M];let $=Number.MAX_VALUE,B;for(let K=0;K<n;K++){const q=Jr(m[K]-z);q<$&&($=q,B=K),f[B]++,l[M]=B}}const p=new Array(n);for(let M=0;M<n;M++)p[M]=null;for(let M=0;M<a;M++)c=l[M],p[c]===null?p[c]=o[M]:p[c]+=o[M];for(let M=0;M<n;M++)p[M]*=1/f[M];u=!1;for(let M=0;M<n;M++)if(p[M]!==m[M]){u=!0;break}m=p,h++,h>200&&(u=!1)}const g={};for(let p=0;p<n;p++)g[p]=[];for(let p=0;p<a;p++)c=l[p],g[c].push(o[p]);let N=[];for(let p=0;p<n;p++)N.push(g[p][0]),N.push(g[p][g[p].length-1]);N=N.sort((p,M)=>p-M),i.push(N[0]);for(let p=1;p<N.length;p+=2){const M=N[p];!isNaN(M)&&i.indexOf(M)===-1&&i.push(M)}}return i}var Qr=(t,e)=>{t=new b(t),e=new b(e);const n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)};const Ke=.027,ts=5e-4,es=.1,ze=1.14,$t=.022,Ie=1.414;var ns=(t,e)=>{t=new b(t),e=new b(e),t.alpha()<1&&(t=mt(e,t,t.alpha(),"rgb"));const n=je(...t.rgb()),r=je(...e.rgb()),s=n>=$t?n:n+Math.pow($t-n,Ie),o=r>=$t?r:r+Math.pow($t-r,Ie),i=Math.pow(o,.56)-Math.pow(s,.57),c=Math.pow(o,.65)-Math.pow(s,.62),a=Math.abs(o-s)<ts?0:s<o?i*ze:c*ze;return(Math.abs(a)<es?0:a>0?a-Ke:a+Ke)*100};function je(t,e,n){return .2126729*Math.pow(t/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(n/255,2.4)}const{sqrt:nt,pow:G,min:rs,max:ss,atan2:Te,abs:Ye,cos:Pt,sin:qe,exp:os,PI:Xe}=Math;function is(t,e,n=1,r=1,s=1){var o=function(At){return 360*At/(2*Xe)},i=function(At){return 2*Xe*At/360};t=new b(t),e=new b(e);const[c,a,l]=Array.from(t.lab()),[f,u,h]=Array.from(e.lab()),m=(c+f)/2,g=nt(G(a,2)+G(l,2)),N=nt(G(u,2)+G(h,2)),p=(g+N)/2,M=.5*(1-nt(G(p,7)/(G(p,7)+G(25,7)))),z=a*(1+M),$=u*(1+M),B=nt(G(z,2)+G(l,2)),K=nt(G($,2)+G(h,2)),q=(B+K)/2,O=o(Te(l,z)),d=o(Te(h,$)),k=O>=0?O:O+360,_=d>=0?d:d+360,y=Ye(k-_)>180?(k+_+360)/2:(k+_)/2,x=1-.17*Pt(i(y-30))+.24*Pt(i(2*y))+.32*Pt(i(3*y+6))-.2*Pt(i(4*y-63));let C=_-k;C=Ye(C)<=180?C:_<=k?C+360:C-360,C=2*nt(B*K)*qe(i(C)/2);const I=f-c,J=K-B,vt=1+.015*G(m-50,2)/nt(20+G(m-50,2)),ht=1+.045*q,Lt=1+.015*q*x,we=30*os(-G((y-275)/25,2)),R=-(2*nt(G(q,7)/(G(q,7)+G(25,7))))*qe(2*i(we)),Ht=nt(G(I/(n*vt),2)+G(J/(r*ht),2)+G(C/(s*Lt),2)+R*(J/(r*ht))*(C/(s*Lt)));return ss(0,rs(100,Ht))}function cs(t,e,n="lab"){t=new b(t),e=new b(e);const r=t.get(n),s=e.get(n);let o=0;for(let i in r){const c=(r[i]||0)-(s[i]||0);o+=c*c}return Math.sqrt(o)}var as=(...t)=>{try{return new b(...t),!0}catch{return!1}},ls={cool(){return Dt([w.hsl(180,1,.9),w.hsl(250,.7,.4)])},hot(){return Dt(["#000","#f00","#ff0","#fff"]).mode("rgb")}};const ne={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Fe=Object.keys(ne),We=new Map(Fe.map(t=>[t.toLowerCase(),t])),fs=typeof Proxy=="function"?new Proxy(ne,{get(t,e){const n=e.toLowerCase();if(We.has(n))return t[We.get(n)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(Fe)}}):ne,us=(...t)=>{t=A(t,"cmyk");const[e,n,r,s]=t,o=t.length>4?t[4]:1;return s===1?[0,0,0,o]:[e>=1?0:255*(1-e)*(1-s),n>=1?0:255*(1-n)*(1-s),r>=1?0:255*(1-r)*(1-s),o]},{max:Ze}=Math,hs=(...t)=>{let[e,n,r]=A(t,"rgb");e=e/255,n=n/255,r=r/255;const s=1-Ze(e,Ze(n,r)),o=s<1?1/(1-s):0,i=(1-e-s)*o,c=(1-n-s)*o,a=(1-r-s)*o;return[i,c,a,s]};b.prototype.cmyk=function(){return hs(this._rgb)},Object.assign(w,{cmyk:(...t)=>new b(...t,"cmyk")}),v.format.cmyk=us,v.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"cmyk"),E(t)==="array"&&t.length===4)return"cmyk"}});const ds=(...t)=>{const e=A(t,"hsla");let n=dt(t)||"lsa";return e[0]=X(e[0]||0)+"deg",e[1]=X(e[1]*100)+"%",e[2]=X(e[2]*100)+"%",n==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),n="hsla"):e.length=3,`${n.substr(0,3)}(${e.join(" ")})`},bs=(...t)=>{const e=A(t,"lab");let n=dt(t)||"lab";return e[0]=X(e[0])+"%",e[1]=X(e[1]),e[2]=X(e[2]),n==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},ms=(...t)=>{const e=A(t,"lch");let n=dt(t)||"lab";return e[0]=X(e[0])+"%",e[1]=X(e[1]),e[2]=isNaN(e[2])?"none":X(e[2])+"deg",n==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},ps=(...t)=>{const e=A(t,"lab");return e[0]=X(e[0]*100)+"%",e[1]=zt(e[1]),e[2]=zt(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},Ve=(...t)=>{const[e,n,r,...s]=A(t,"rgb"),[o,i,c]=Jt(e,n,r),[a,l,f]=xe(o,i,c);return[a,l,f,...s.length>0&&s[0]<1?[s[0]]:[]]},gs=(...t)=>{const e=A(t,"lch");return e[0]=X(e[0]*100)+"%",e[1]=zt(e[1]),e[2]=isNaN(e[2])?"none":X(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:re}=Math,ws=(...t)=>{const e=A(t,"rgba");let n=dt(t)||"rgb";if(n.substr(0,3)==="hsl")return ds(De(e),n);if(n.substr(0,3)==="lab"){const r=Nt();et("d50");const s=bs(Yt(e),n);return et(r),s}if(n.substr(0,3)==="lch"){const r=Nt();et("d50");const s=ms(Wt(e),n);return et(r),s}return n.substr(0,5)==="oklab"?ps(Jt(e)):n.substr(0,5)==="oklch"?gs(Ve(e)):(e[0]=re(e[0]),e[1]=re(e[1]),e[2]=re(e[2]),(n==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),n="rgba"),`${n.substr(0,3)}(${e.slice(0,n==="rgb"?3:4).join(" ")})`)},Ue=(...t)=>{t=A(t,"lch");const[e,n,r,...s]=t,[o,i,c]=Oe(e,n,r),[a,l,f]=Ut(o,i,c);return[a,l,f,...s.length>0&&s[0]<1?[s[0]]:[]]},rt=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,Z=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Rt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,F=/\s*/.source,kt=/\s+/.source,se=/\s*,\s*/.source,Bt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,Mt=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,Je=new RegExp("^rgba?\\("+F+[rt,rt,rt].join(kt)+Mt+"\\)$"),Qe=new RegExp("^rgb\\("+F+[rt,rt,rt].join(se)+F+"\\)$"),tn=new RegExp("^rgba\\("+F+[rt,rt,rt,Z].join(se)+F+"\\)$"),en=new RegExp("^hsla?\\("+F+[Bt,Rt,Rt].join(kt)+Mt+"\\)$"),nn=new RegExp("^hsl?\\("+F+[Bt,Rt,Rt].join(se)+F+"\\)$"),rn=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,sn=new RegExp("^lab\\("+F+[Z,Z,Z].join(kt)+Mt+"\\)$"),on=new RegExp("^lch\\("+F+[Z,Z,Bt].join(kt)+Mt+"\\)$"),cn=new RegExp("^oklab\\("+F+[Z,Z,Z].join(kt)+Mt+"\\)$"),an=new RegExp("^oklch\\("+F+[Z,Z,Bt].join(kt)+Mt+"\\)$"),{round:ln}=Math,yt=t=>t.map((e,n)=>n<=2?lt(ln(e),0,255):e),H=(t,e=0,n=100,r=!1)=>(typeof t=="string"&&t.endsWith("%")&&(t=parseFloat(t.substring(0,t.length-1))/100,r?t=e+(t+1)*.5*(n-e):t=e+t*(n-e)),+t),T=(t,e)=>t==="none"?e:t,oe=t=>{if(t=t.toLowerCase().trim(),t==="transparent")return[0,0,0,0];let e;if(v.format.named)try{return v.format.named(t)}catch{}if((e=t.match(Je))||(e=t.match(Qe))){let n=e.slice(1,4);for(let s=0;s<3;s++)n[s]=+H(T(n[s],0),0,255);n=yt(n);const r=e[4]!==void 0?+H(e[4],0,1):1;return n[3]=r,n}if(e=t.match(tn)){const n=e.slice(1,5);for(let r=0;r<4;r++)n[r]=+H(n[r],0,255);return n}if((e=t.match(en))||(e=t.match(nn))){const n=e.slice(1,4);n[0]=+T(n[0].replace("deg",""),0),n[1]=+H(T(n[1],0),0,100)*.01,n[2]=+H(T(n[2],0),0,100)*.01;const r=yt(Vt(n)),s=e[4]!==void 0?+H(e[4],0,1):1;return r[3]=s,r}if(e=t.match(rn)){const n=e.slice(1,4);n[1]*=.01,n[2]*=.01;const r=Vt(n);for(let s=0;s<3;s++)r[s]=ln(r[s]);return r[3]=+e[4],r}if(e=t.match(sn)){const n=e.slice(1,4);n[0]=H(T(n[0],0),0,100),n[1]=H(T(n[1],0),-125,125,!0),n[2]=H(T(n[2],0),-125,125,!0);const r=Nt();et("d50");const s=yt(jt(n));et(r);const o=e[4]!==void 0?+H(e[4],0,1):1;return s[3]=o,s}if(e=t.match(on)){const n=e.slice(1,4);n[0]=H(n[0],0,100),n[1]=H(T(n[1],0),0,150,!1),n[2]=+T(n[2].replace("deg",""),0);const r=Nt();et("d50");const s=yt(Ft(n));et(r);const o=e[4]!==void 0?+H(e[4],0,1):1;return s[3]=o,s}if(e=t.match(cn)){const n=e.slice(1,4);n[0]=H(T(n[0],0),0,1),n[1]=H(T(n[1],0),-.4,.4,!0),n[2]=H(T(n[2],0),-.4,.4,!0);const r=yt(Ut(n)),s=e[4]!==void 0?+H(e[4],0,1):1;return r[3]=s,r}if(e=t.match(an)){const n=e.slice(1,4);n[0]=H(T(n[0],0),0,1),n[1]=H(T(n[1],0),0,.4,!1),n[2]=+T(n[2].replace("deg",""),0);const r=yt(Ue(n)),s=e[4]!==void 0?+H(e[4],0,1):1;return r[3]=s,r}};oe.test=t=>Je.test(t)||en.test(t)||sn.test(t)||on.test(t)||cn.test(t)||an.test(t)||Qe.test(t)||tn.test(t)||nn.test(t)||rn.test(t)||t==="transparent",b.prototype.css=function(t){return ws(this._rgb,t)};const ks=(...t)=>new b(...t,"css");w.css=ks,v.format.css=oe,v.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&E(t)==="string"&&oe.test(t))return"css"}}),v.format.gl=(...t)=>{const e=A(t,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const Ms=(...t)=>new b(...t,"gl");w.gl=Ms,b.prototype.gl=function(){const t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]},b.prototype.hex=function(t){return Ae(this._rgb,t)};const ys=(...t)=>new b(...t,"hex");w.hex=ys,v.format.hex=Le,v.autodetect.push({p:4,test:(t,...e)=>{if(!e.length&&E(t)==="string"&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});const{log:Gt}=Math,fn=t=>{const e=t/100;let n,r,s;return e<66?(n=255,r=e<6?0:-155.25485562709179-.44596950469579133*(r=e-2)+104.49216199393888*Gt(r),s=e<20?0:-254.76935184120902+.8274096064007395*(s=e-10)+115.67994401066147*Gt(s)):(n=351.97690566805693+.114206453784165*(n=e-55)-40.25366309332127*Gt(n),r=325.4494125711974+.07943456536662342*(r=e-50)-28.0852963507957*Gt(r),s=255),[n,r,s,1]},{round:Cs}=Math,_s=(...t)=>{const e=A(t,"rgb"),n=e[0],r=e[2];let s=1e3,o=4e4;const i=.4;let c;for(;o-s>i;){c=(o+s)*.5;const a=fn(c);a[2]/a[0]>=r/n?o=c:s=c}return Cs(c)};b.prototype.temp=b.prototype.kelvin=b.prototype.temperature=function(){return _s(this._rgb)};const ie=(...t)=>new b(...t,"temp");Object.assign(w,{temp:ie,kelvin:ie,temperature:ie}),v.format.temp=v.format.kelvin=v.format.temperature=fn,b.prototype.oklch=function(){return Ve(this._rgb)},Object.assign(w,{oklch:(...t)=>new b(...t,"oklch")}),v.format.oklch=Ue,v.autodetect.push({p:2,test:(...t)=>{if(t=A(t,"oklch"),E(t)==="array"&&t.length===3)return"oklch"}}),Object.assign(w,{analyze:Ge,average:Er,bezier:$r,blend:W,brewer:fs,Color:b,colors:bt,contrast:Qr,contrastAPCA:ns,cubehelix:qr,deltaE:is,distance:cs,input:v,interpolate:mt,limits:He,mix:mt,random:Zr,scale:Dt,scales:ls,valid:as});const ce=new Map;function un(t){return e=>{if(ce.has(e))return ce.get(e);const n=t(e);return ce.set(e,n),n}}const V=un(t=>w(t).oklab()),hn=un(t=>w.oklab(...t).hex());function P(t,e){const n=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(n*n+r*r+s*s)}function st(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e===0?[0,0,0]:[t[0]/e,t[1]/e,t[2]/e]}function U(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function ft(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dn(t){const e=t.reduce((n,r)=>[n[0]+r[0],n[1]+r[1],n[2]+r[2]],[0,0,0]);return[e[0]/t.length,e[1]/t.length,e[2]/t.length]}function vs(t){let e=1/0,n=null,r=null;for(let s=0;s<t.length;s++)for(let o=s+1;o<t.length;o++){const i=t[s][0]-t[o][0],c=t[s][1]-t[o][1],a=t[s][2]-t[o][2],l=Math.sqrt(i*i+c*c+a*a);l<e&&(e=l,n=t[s],r=t[o])}return[n,r]}function ae(t){const e=[];for(let n=0;n<t.length;n++)for(let r=n+1;r<t.length;r++){const s=t[n][0]-t[r][0],o=t[n][1]-t[r][1],i=t[n][2]-t[r][2],c=Math.sqrt(s*s+o*o+i*i);e.push({data:[t[n],t[r]],dist:c})}return e.sort((n,r)=>n.dist-r.dist),e.map(n=>n.data)}function le(t){if(t.length===2)return[...t];let e=-1/0,n=null,r=null,s=null;for(let o=0;o<t.length;o++)for(let i=0;i<t.length;i++)if(i!==o)for(let c=0;c<t.length;c++){if(c===o||c===i)continue;const a=st(U(t[i],t[o])),l=st(U(t[c],t[i])),f=ft(a,l);f>e&&(e=f,n=t[o],r=t[i],s=t[c])}return P(n,r)<P(r,s)?s=r:n=r,[n,s]}function Ls(t){let e=!0;for(;e;){e=!1;for(let n=0;n<t.length-2;n++)for(let r=n+1;r<t.length-1;r++){const s=P(t[n],t[n+1])+P(t[r],t[r+1]);P(t[n],t[r])+P(t[n+1],t[r+1])<s&&(t=[...t.slice(0,n+1),...t.slice(n+1,r+1).reverse(),...t.slice(r+1)],e=!0)}}return t}function As(t){return[(t[0]+128)/255,(t[1]+128)/255,(t[2]+128)/255]}function Y(t,e,n="gl"){const r=new Map;t.map(c=>n==="oklab"?[V(c),c]:n==="lab-norm"?[As(w(c).lab()),c]:[w(c).get(n),c]).forEach(([c,a])=>{r.set(c,a)});function s(c){return c.map(a=>r.get(a))}const o=[...r.keys()];return e.call({toColors:s},o).map(c=>r.get(c))}function bn(t,e,n,r=8){let s=0;for(let o=r-1;o>=0;o--){const i=1<<o,c=t&i?1:0,a=e&i?1:0,l=n&i?1:0;s=s<<3|Es(c,a,l)}return s}function Es(t,e,n){return t<<2|e<<1|n}function fe(t,e=8){return[...t].sort((n,r)=>{const s=bn(n[0],n[1],n[2],e),o=bn(r[0],r[1],r[2],e);return s-o})}function Ns(t){return Y(t,fe,"gl")}function Os(t){return Y(t,fe,"oklab")}function xs(t){return Y(t,fe,"lab-norm")}class Ss{constructor(e={}){this.populationSize=e.populationSize||100,this.generations=e.generations||200,this.maxStagnation=e.maxStagnation||20,this.mutationRate=e.mutationRate||.1,this.crossoverRate=e.crossoverRate||.9,this.eliteSize=e.eliteSize||5,this.tournamentSize=e.tournamentSize||5,this.random=e.random||this.random,this.fitnessFunc=e.fitness||(()=>0),this.seedFunc=e.seed||(()=>[]),this.fitnessCompare=e.compare||((n,r)=>r-n),this.onGeneration=e.onGeneration,this.population=[],this.currentGeneration=0,this.bestIndividual=null,this.bestFitness=-1/0,this.peakGeneration=0}initializePopulation(){this.population=[];for(let e=0;e<this.populationSize;e++){const n=this.seedFunc(),r=this.fitnessFunc(n);this.population.push({genome:n,fitness:r})}this.sortPopulation(),this.updateBest()}sortPopulation(){this.population.sort((e,n)=>this.fitnessCompare(e.fitness,n.fitness))}updateBest(){(this.bestFitness===-1/0||this.fitnessCompare(this.population[0].fitness,this.bestFitness)<0)&&(this.peakGeneration=this.currentGeneration,this.bestFitness=this.population[0].fitness,this.bestIndividual=[...this.population[0].genome])}tournamentSelect(){const e=[];for(let n=0;n<this.tournamentSize;n++){const r=Math.floor(this.random()*this.population.length);e.push(this.population[r])}return e.sort((n,r)=>this.fitnessCompare(n.fitness,r.fitness)),e[0]}orderCrossover(e,n){const r=e.length,s=Math.floor(this.random()*r),o=s+Math.floor(this.random()*(r-s)),i=Array(r).fill(null);for(let l=s;l<=o;l++)i[l]=e[l];let c=(o+1)%r,a=(o+1)%r;for(;i.includes(null);)i.includes(n[a])||(i[c]=n[a],c=(c+1)%r),a=(a+1)%r;return i}swapMutate(e){const n=[...e],r=Math.floor(this.random()*n.length),s=Math.floor(this.random()*n.length);return[n[r],n[s]]=[n[s],n[r]],n}shiftMutate(e){const n=[...e];return n.push(n.shift()),n}cheatMutate(e){let n=this.shiftMutate(e),r=n,s=this.fitnessFunc(r);for(let i=1;i<e.length;i++){n=this.shiftMutate(n);const c=this.fitnessFunc(n);this.fitnessCompare(c,s)<0&&(s=c,r=n)}const o=[...r].reverse();return this.fitnessCompare(s,this.fitnessFunc(o))<0?o:r}evolve(){const e=[];for(let n=0;n<this.eliteSize;n++)e.push({genome:[...this.population[n].genome],fitness:this.population[n].fitness});for(;e.length<this.populationSize;){const n=this.tournamentSelect(),r=this.tournamentSelect();let s;if(this.random()<this.crossoverRate?s=this.orderCrossover(n.genome,r.genome):s=[...n.genome],this.random()<this.mutationRate){const i=this.random();i<.5?s=this.swapMutate(s):i<.7?s=this.shiftMutate(s):i<.9?s=[...s].reverse():s=this.cheatMutate(s)}const o=this.fitnessFunc(s);e.push({genome:s,fitness:o})}this.population=e,this.sortPopulation(),this.updateBest()}run(){this.initializePopulation();for(let e=0;e<this.generations&&(this.currentGeneration=e,this.onGeneration&&this.onGeneration({generation:e,bestFitness:this.population[0].fitness,bestGenome:this.population[0].genome,averageFitness:this.population.reduce((n,r)=>n+r.fitness,0)/this.population.length}),!(this.currentGeneration>this.peakGeneration+this.maxStagnation));e++)this.evolve();return{bestGenome:this.cheatMutate(this.bestIndividual),bestFitness:this.bestFitness,finalPopulation:this.population,peakGeneration:this.peakGeneration}}}function ue(t){const e=t.map(f=>V(f));if(e.length<2)return{totalDistance:0,avgAngleChange:0,maxAngleChange:0,meanDistance:0,devDistance:0};let n=0,r=[],s=null;const o=[];for(let f=1;f<e.length;f++){const u=P(e[f-1],e[f]);n+=u,o.push(u);const h=st(U(e[f],e[f-1]));if(s&&u>0){const m=Math.max(-1,Math.min(1,ft(s,h))),g=Math.acos(m)*(180/Math.PI);r.push(g)}s=h}const i=n/(e.length-1),c=Math.sqrt(o.reduce((f,u)=>f+Math.pow(u-i,2),0)/(e.length-1)),a=r.length>0?r.reduce((f,u)=>f+u,0)/r.length:0,l=r.length>0?Math.max(...r):0;return{totalDistance:n,avgAngleChange:a,maxAngleChange:l,meanDistance:i,devDistance:c}}function Ds(t){const e=t.map(L=>V(L)),n=t.map(L=>w(L).lch());if(e.length<2)return{totalDistance:0,avgAngleChange:0,maxAngleChange:0,meanDistance:0,devDistance:0,totalCurveDistance:0,meanCurveDistance:0,devCurveDistance:0,lchAvgChange:{L:0,C:0,H:0},lchMaxChange:{L:0,C:0,H:0},lchDeviation:{L:0,C:0,H:0},curveRatio:0,perceptualUniformity:0,curveUniformity:0,hueSpread:0,chromaRange:0,lightnessRange:0,harmonicScore:0,harmonicCurveScore:0};let r=0,s=0,o=[],i=null;const c=[],a=[],l=[e[0],...e,e[e.length-1]],f=[],u=[],h=[];for(let L=1;L<e.length;L++){const R=P(e[L-1],e[L]);r+=R,c.push(R);const Ht=Rs(l[L-1],l[L],l[L+1],l[L+2]);s+=Ht,a.push(Ht);const At=st(U(e[L],e[L-1]));if(i&&R>0){const Et=Math.max(-1,Math.min(1,ft(i,At))),Ro=Math.acos(Et)*(180/Math.PI);o.push(Ro)}i=At;const[So,Do,ke]=n[L-1],[$o,Po,Me]=n[L];if(f.push(Math.abs($o-So)),u.push(Math.abs(Po-Do)),!isNaN(ke)&&!isNaN(Me)){let Et=Math.abs(Me-ke);Et>180&&(Et=360-Et),h.push(Et)}else isNaN(ke)&&isNaN(Me)?h.push(0):h.push(90)}const m=r/(e.length-1),g=Math.sqrt(c.reduce((L,R)=>L+Math.pow(R-m,2),0)/(e.length-1)),N=s/(e.length-1),p=Math.sqrt(a.reduce((L,R)=>L+Math.pow(R-N,2),0)/(e.length-1)),M=o.length>0?o.reduce((L,R)=>L+R,0)/o.length:0,z=o.length>0?Math.max(...o):0,$={L:f.reduce((L,R)=>L+R,0)/f.length,C:u.reduce((L,R)=>L+R,0)/u.length,H:h.reduce((L,R)=>L+R,0)/h.length},B={L:Math.max(...f),C:Math.max(...u),H:Math.max(...h)},K=$.L,q=$.C,O=$.H,d={L:Math.sqrt(f.reduce((L,R)=>L+Math.pow(R-K,2),0)/f.length),C:Math.sqrt(u.reduce((L,R)=>L+Math.pow(R-q,2),0)/u.length),H:Math.sqrt(h.reduce((L,R)=>L+Math.pow(R-O,2),0)/h.length)},k=1/(1+g),_=1/(1+p),y=s/r-1,x=n.map(([,,L])=>L).filter(L=>!isNaN(L)),C=x.length>1?$s(x):0,I=n.map(([,L])=>L),J=n.map(([L])=>L),vt=Math.max(...I)-Math.min(...I),ht=Math.max(...J)-Math.min(...J),Lt=k*.4+Math.min(C/180,1)*.3+1/(1+d.H/45)*.3,we=_*.4+Math.min(C/180,1)*.3+1/(1+d.H/45)*.3;return{totalDistance:r,avgAngleChange:M,maxAngleChange:z,meanDistance:m,devDistance:g,totalCurveDistance:s,meanCurveDistance:N,devCurveDistance:p,lchAvgChange:$,lchMaxChange:B,lchDeviation:d,curveRatio:y,perceptualUniformity:k,curveUniformity:_,hueSpread:C,chromaRange:vt,lightnessRange:ht,harmonicScore:Lt,harmonicCurveScore:we}}function $s(t){if(t.length<2)return 0;const e=[...t],n=[];for(let r=1;r<e.length;r++)n.push(e[r]-e[r-1]);return n.push(360-e[e.length-1]+e[0]),n.reduce((r,s)=>r+s,0)/n.length}function Ps(t,e,n,r,s){const o=s*s,i=o*s;return[.5*(2*e[0]+(-t[0]+n[0])*s+(2*t[0]-5*e[0]+4*n[0]-r[0])*o+(-t[0]+3*e[0]-3*n[0]+r[0])*i),.5*(2*e[1]+(-t[1]+n[1])*s+(2*t[1]-5*e[1]+4*n[1]-r[1])*o+(-t[1]+3*e[1]-3*n[1]+r[1])*i),.5*(2*e[2]+(-t[2]+n[2])*s+(2*t[2]-5*e[2]+4*n[2]-r[2])*o+(-t[2]+3*e[2]-3*n[2]+r[2])*i)]}function Rs(t,e,n,r,s=12){let o=0,i=e;for(let c=1;c<=s;c++){const a=c/s,l=Ps(t,e,n,r,a);o+=P(i,l),i=l}return o}function Bs(t){let e=0;for(let n=0;n<t.length-1;n++){const r=V(t[n]),s=V(t[n+1]);e+=P(r,s)}return-e}function Gs(t,e){return e-t}function mn(t,e=Bs,n=Gs){let r=1;const s=()=>(r=r*16807%2147483647,r/2147483647),o=Math.min(40,Math.max(10,t.length))*5,i=t.length<50?250:Math.floor(31250*64/(o*t.length));return new Ss({populationSize:o,generations:i,maxStagnation:t.length<50?20:10,mutationRate:.5,crossoverRate:.9,eliteSize:5,random:s,fitness:e,compare:n,seed:()=>[...t].sort(()=>s()-.5)}).run().bestGenome}function Hs(t){const{avgAngleChange:e,maxAngleChange:n,totalDistance:r}=ue(t);return[-r,-e,-n]}function Ks(t,e,n=.01){for(let r=0;r<t.length;r++){const s=(t[r]+e[r])/2,o=Math.abs(s*n),i=e[r]-t[r];if(Math.abs(i)>o)return i}return e[0]-t[0]}function zs(t){return mn(t,Hs,Ks)}function Ct(t,e=[1,1,1]){const n=new Map;for(let i=0;i<t.length;i++){const c=new Set;for(let a=0;a<t.length;a++)i!==a&&c.add({color:t[a],distance:w.deltaE(t[i],t[a],e[0],e[1],e[2])});n.set(t[i],c)}const r=[],s=new Set;function o(i){r.push(i),s.add(i);const c=[...n.get(i)].sort((a,l)=>a.distance-l.distance);for(const a of c)s.has(a.color)||o(a.color)}return o(t[0]),r}function Is(t){const e=t.reduce((n,r)=>[n[0]+r[0],n[1]+r[1],n[2]+r[2]],[0,0,0]);return[e[0]/t.length,e[1]/t.length,e[2]/t.length]}function js(t,e){const n=t.length,r=[[0,0,0],[0,0,0],[0,0,0]];for(const s of t){const o=U(s,e);for(let i=0;i<3;i++)for(let c=0;c<3;c++)r[i][c]+=o[i]*o[c]/n}return r}function Ts(t){let e=[1,1,1];for(let n=0;n<100;n++){const r=[t[0][0]*e[0]+t[0][1]*e[1]+t[0][2]*e[2],t[1][0]*e[0]+t[1][1]*e[1]+t[1][2]*e[2],t[2][0]*e[0]+t[2][1]*e[1]+t[2][2]*e[2]];e=st(r)}return e}function he(t){if(t.length===0)return[];const e=Is(t),n=js(t,e),r=Ts(n);return[...t].sort((s,o)=>{const i=ft(U(s,e),r),c=ft(U(o,e),r);return i-c})}function Ys(t){return Y(t,he,"gl")}function qs(t){return Y(t,he,"lab")}function pn(t){return Y(t,he,"oklab")}function Xs(t,e){return w.deltaE(t,e)}function gn(t,e=Xs){let n=!0;for(;n;){n=!1;for(let r=0;r<t.length-2;r++)for(let s=r+1;s<t.length-1;s++){const o=e(t[r],t[r+1])+e(t[s],t[s+1]);e(t[r],t[s])+e(t[r+1],t[s+1])<o&&(t=[...t.slice(0,r+1),...t.slice(r+1,s+1).reverse(),...t.slice(s+1)],n=!0)}}return t}function Fs(t){let e=Ct(t);return gn(e)}function Ws(t){const e=t.map(o=>V(o)),n=e.length,r=e.reduce((o,i)=>[o[0]+i[0],o[1]+i[1],o[2]+i[2]],[0,0,0]).map(o=>o/n);return e.reduce((o,i)=>[o[0]+(i[0]-r[0])**2,o[1]+(i[1]-r[1])**2,o[2]+(i[2]-r[2])**2],[0,0,0]).map(o=>Math.sqrt(o/n)||1e-6)}function Zs(t){const e=Ws(t);return(n,r)=>{const s=V(n),o=V(r);return Math.hypot((s[0]-o[0])/e[0],(s[1]-o[1])/e[1],(s[2]-o[2])/e[2])}}function Vs(t){const e=Zs(t),n=pn(t);return gn(n,e)}function de(t){const e=t.map(l=>w(l).lab()),n=e.reduce((l,[f])=>l+f,0)/e.length,r=e.map(l=>w.lab(...l).lch()),s=r.reduce((l,[,f])=>l+f,0)/r.length,o=Us(r.map(([,,l])=>l).filter(l=>!Number.isNaN(l))),i=e.reduce((l,[f])=>l+Math.pow(f-n,2),0)/e.length,c=r.reduce((l,[,f])=>l+Math.pow(f-s,2),0)/r.length,a=Js(r.map(([,,l])=>l).filter(l=>!Number.isNaN(l)),o);return{L:Math.sqrt(i),C:Math.sqrt(c),H:Math.sqrt(a),meanC:s,meanH:o}}function Us(t){if(t.length===0)return 0;const e=t.filter(o=>!Number.isNaN(o)).map(o=>o*Math.PI/180),n=e.reduce((o,i)=>o+Math.sin(i),0),r=e.reduce((o,i)=>o+Math.cos(i),0);let s=Math.atan2(n/t.length,r/t.length)*(180/Math.PI);return s<0&&(s+=360),s}function Js(t,e){return t.length===0?0:t.map(r=>{let s=r-e;return s>180&&(s-=360),s<-180&&(s+=360),s*s}).reduce((r,s)=>r+s,0)/t.length}function wn(t,e){const n=Math.max(Number.EPSILON,e.L+e.C+(e.H??0));return{Kl:(n-e.L)/(2*n),Kc:(n-e.C)/(2*n),Kh:(n-e.H)/(2*n)}}function Qs(t){const e=de(t),{Kc:n,Kh:r,Kl:s}=wn(t,e);return Ct(t,[s,n,r])}function to(t){const e=de(t),{Kc:n,Kh:r,Kl:s}=wn(t,e);return Ct(t,[s,n,r+.5])}function eo(t){let e=0,n=0,r=0;for(const[u,h,m]of t)e+=u,n+=h,r+=m;const s=e/t.length,o=n/t.length,i=r/t.length;let c=0,a=0,l=0;const f=[];for(const[u,h,m]of t){const g=Math.abs(u-s)/(u+s)||0,N=Math.abs(h-o)/(h+o)||0,p=Math.abs(m-i)/(m+i)||0;c+=g,a+=N,l+=p,f.push(g+N+p)}return[c,a,l,f]}function no(t){const e=eo(t.map(n=>w(n).lch().map(r=>r||0)));return Ct(t,e)}function ro(t){const{Kl:e,Kc:n,Kh:r}=me(t);return Ct(t,[e,n,r])}class so{constructor(e){this.value=e,this.color=w(e)}hex(){return this.color.hex()}rgb(){return this.color.rgb()}cmyk(){return this.color.cmyk()}hsl(){return this.color.hsl()}hcl(){return this.color.hcl()}oklch(){return this.color.oklch()}oklab(){return V(this.value)}lab(){return this.color.lab()}toString(){return this.hex()}}class oo{constructor(e){this.edges={},this.colors=new Set,this.representation=e}addColor(e){this.edges[e]=[],this.colors.forEach(n=>this.link(e,n)),this.colors.add(e)}link(e,n){this.edges[e].push(n),this.edges[n].push(e)}harmonize(){if(this.colors.size===0)return[];const e=[...this.colors.values()];e.sort((s,o)=>s.color.luminance()-o.color.luminance());let n=e.pop();const r=new Set([n]);for(;r.size<this.colors.size;){const o=this.edges[n].filter(i=>!r.has(i)).map(i=>({color:i,distance:w.distance(n.color,i.color,this.representation.label)}));o.sort((i,c)=>i.distance-c.distance),n=o[0].color,r.add(n)}return[...r.values()]}}function ut(t,e){const n=new oo(e);return t.forEach(r=>n.addColor(new so(r))),n.harmonize().map(r=>w(r[e.label](),e.label).hex())}function io(t){return ut(t,{label:"hsl",points:e=>{const[n,r,s]=e.hsl();return[n/360||0,r/100,s/100]}})}function co(t){return ut(t,{label:"hcl",points:e=>e.hcl().map((n,r)=>(n||0)*[1/360,1/100,1/100][r])})}function ao(t){return ut(t,{label:"oklch",points:e=>e.oklch().map((n,r)=>(n||0)*[1/200,1/100,1/360][r])})}function lo(t){return ut(t,{label:"oklab",points:e=>e.oklab()})}function fo(t){return ut(t,{label:"lab",points:e=>e.lab().map((n,r)=>(n||0)*[1/100,1/95,1/115][r])})}function uo(t){return ut(t,{label:"rgb",points:e=>e.rgb().map(n=>n/255)})}function ho(t){return ut(t,{label:"cmyk",points:e=>e.cmyk().map(n=>n/255)})}function kn(t,e="hsl",n="bottom-up"){return t.map(s=>({rgb:s,hsl:e[0]==="h"?w(s).get(e):w(s).get(e).reverse()})).sort((s,o)=>{const[i,c,a]=s.hsl,[l,f,u]=o.hsl;switch(n){case"bottom-up":return Math.abs(a-u)>.05?a-u:Math.abs(i-l)>5?i-l:c-f;case"top-down":return Math.abs(a-u)>.05?u-a:Math.abs(i-l)>5?i-l:c-f;case"outward":return Math.abs(c-f)>.05?c-f:Math.abs(i-l)>5?i-l:a-u;case"inward":return Math.abs(c-f)>.05?f-c:Math.abs(i-l)>5?i-l:a-u;default:return 0}}).map(s=>s.rgb)}kn.params=[{name:"model",values:["hsl","hsv","lch","oklch"]},{name:"mode",values:["outward","inward","bottom-up","top-down"]}];function Mn(t,e="hsl",n="ascending"){const r=t.map(s=>{const o=e[0]==="h"?w(s).get(e):w(s).get(e).reverse(),i=o[2]*360+o[0];return{rgb:s,hsl:o,spiralParam:i}});return r.sort((s,o)=>{const i=n==="ascending"?s.spiralParam-o.spiralParam:o.spiralParam-s.spiralParam;return Math.abs(i)<1?s.hsl[1]-o.hsl[1]:i}),r.map(s=>s.rgb)}Mn.params=[{name:"model",values:["hsl","hsv","lch","oklch"]}];function bo(){let t=1;return()=>(t=t*16807%2147483647,t/2147483647)}function mo(t,e,n="average"){switch(n){case"single":let r=1/0;for(const o of t.colors)for(const i of e.colors)r=Math.min(r,P(o,i));return r;case"complete":let s=0;for(const o of t.colors)for(const i of e.colors)s=Math.max(s,P(o,i));return s;default:return P(t.centroid,e.centroid)}}function po(t,e="average"){let n=t.map(r=>({colors:[r],centroid:r,distance:0}));for(;n.length>1;){let r=1/0,s=0,o=1;for(let c=0;c<n.length;c++)for(let a=c+1;a<n.length;a++){const l=mo(n[c],n[a],e);l<r&&(r=l,s=c,o=a)}const i={colors:[...n[s].colors,...n[o].colors],left:n[s],right:n[o],centroid:dn([...n[s].colors,...n[o].colors]),distance:r};n=n.filter((c,a)=>a!==s&&a!==o),n.push(i)}return n[0]}function ot(t,e="balanced"){if(!t.left&&!t.right||!t.left||!t.right)return t.colors;switch(e){case"depth-first":return[...ot(t.left,e),...ot(t.right,e)];case"breadth-first":return t.left.colors.length<=t.right.colors.length?[...ot(t.left,e),...ot(t.right,e)]:[...ot(t.right,e),...ot(t.left,e)];default:const n=ot(t.left,e),r=ot(t.right,e),s=P(n[n.length-1],r[0]),o=P(r[r.length-1],n[0]);return s<=o?[...n,...r]:[...r,...n]}}function go(t,e="average",n="balanced"){if(t.length===0)return[];if(t.length===1)return t;const r=po(t,e);return ot(r,n)}function wo(t,e,n){return[...t].sort(()=>n()-.5).slice(0,e)}function ko(t,e){return t.map(n=>{let r=1/0,s=0;return e.forEach((o,i)=>{const c=P(n,o);c<r&&(r=c,s=i)}),s})}function Mo(t,e,n,r){const s=[];for(let o=0;o<n;o++){const i=t.filter((c,a)=>e[a]===o);i.length>0?s.push(dn(i)):s.push(t[Math.floor(r()*t.length)])}return s}function yo(t,e=8,n=50){if(t.length===0)return[];if(t.length<=e)return t;const r=bo();let s=wo(t,e,r),o=[];for(let l=0;l<n;l++){const f=ko(t,s);if(JSON.stringify(f)===JSON.stringify(o))break;o=f,s=Mo(t,o,e,r)}const i=Array.from({length:e},()=>[]);t.forEach((l,f)=>{i[o[f]].push(l)});const c=i.map((l,f)=>({cluster:l,centroid:s[f]})).filter(l=>l.cluster.length>0).sort((l,f)=>{const u=l.centroid[0]+l.centroid[1]+l.centroid[2],h=f.centroid[0]+f.centroid[1]+f.centroid[2];return u-h}),a=[];for(const{cluster:l,centroid:f}of c){const u=l.sort((h,m)=>P(h,f)-P(m,f));a.push(...u)}return a}function yn(t,e,n){const r=[],s=t[e];return t.forEach((o,i)=>{P(s,o)<=n&&r.push(i)}),r}function Co(t,e=30,n=3){if(t.length===0)return[];const r=new Set,s=[],o=[];t.forEach((c,a)=>{if(r.has(a))return;r.add(a);const l=yn(t,a,e);if(l.length<n)o.push(a);else{const f=[],u=[...l];for(;u.length>0;){const h=u.shift();if(!r.has(h)){r.add(h);const m=yn(t,h,e);m.length>=n&&u.push(...m)}f.push(h)}s.push(f)}}),s.sort((c,a)=>{const l=c.reduce((u,h)=>{const m=t[h];return u+m[0]+m[1]+m[2]},0)/c.length,f=a.reduce((u,h)=>{const m=t[h];return u+m[0]+m[1]+m[2]},0)/a.length;return l-f});const i=[];for(const c of s){const a=new Set(c),l=[];let f=c[0];for(l.push(f),a.delete(f);a.size>0;){let u=-1,h=1/0;for(const m of a){const g=P(t[f],t[m]);g<h&&(h=g,u=m)}if(u!==-1)l.push(u),a.delete(u),f=u;else break}i.push(...l.map(u=>t[u]))}return i.push(...o.map(c=>t[c])),i}const be={rgb:"gl",lab:"lab-norm"};function Cn(t,e="rgb",n="average",r="balanced"){return Y(t,s=>go(s,n,r),be[e]||e)}Cn.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"linkage",values:["single","complete","average"]},{name:"traversal",values:["depth-first","breadth-first","balanced"]}];function _n(t,e="rgb",n=.5,r=50){return Y(t,s=>yo(s,Math.ceil(n*s.length),r),be[e]||e)}_n.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"k",values:[.1,.3,.5,.7]},{name:"iterations",values:[10,50,100,250]}];function vn(t,e="rgb",n=.3,r=3){return Y(t,s=>{const[o,i]=ae(s).at(-1),c=P(o,i)*n;return Co(s,c,r)},be[e]||e)}vn.params=[{name:"modes",values:["rgb","lab","oklab"]},{name:"eps",values:[.1,.3,.5]},{name:"pts",values:[3,5,7]}];function me(t){const e=de(t),n=t.map(f=>w(f).lch()),r=n.map(([f])=>f),s=n.map(([,f])=>f),o=n.map(([,,f])=>f),i=Math.max(...r)-Math.min(...r),c=Math.max(...s)-Math.min(...s),a=_o(o.filter(f=>!Number.isNaN(f))),l={...e,lightnessRange:i,chromaRange:c,hueSpread:a};return a>180&&e.H>70&&e.L<80?{Kl:.5,Kc:1,Kh:2,type:"Rainbow",data:l}:i>50&&e.L>20&&a<30?{Kl:2,Kc:.5,Kh:.5,type:"Monochromatic",data:l}:c>50&&e.C>15&&a<60?{Kl:.5,Kc:2,Kh:1,type:"Wide Chroma",data:l}:e.H<15&&e.L<15&&e.C<15?{Kl:1.2,Kc:1.2,Kh:1.2,type:"Uniform",data:l}:{Kl:1,Kc:1,Kh:1,type:"Balanced",data:l}}function _o(t){if(t.length===0)return 0;const e=[...t].sort((s,o)=>s-o);let n=0;for(let s=0;s<e.length-1;s++){const o=e[s+1]-e[s];n=Math.max(n,o)}const r=360-(e[e.length-1]-e[0]);return n=Math.max(n,r),360-n}function pe(t,e,n,r=1e6){const s=P(t,e),o=st(U(e,t));let i=s;if(n){const a=(1-ft(n,o))*r;i=s*(1+a)}return{score:i,direction:o}}function ge(t,e,n,r=[1,1,1],s=1e6){const o=w.deltaE(hn(t),hn(e),...r),i=P(t,e)*o/128,c=st(U(e,t));let a=i;if(n){const f=(1-ft(n,c))*s;a=i*(1+f)}return{score:a,direction:c}}function _t(t,e,n){const r=new Set(t),s=[];let[o,i]=e;s.push(o,i),r.delete(o),r.delete(i);let c=st(U(o,i)),a=st(U(i,o));for(;r.size>0;){let l=[];for(const u of r){const h=n(o,u,c),m=n(i,u,a),g=Math.min(h.score,m.score);l.push({candidate:u,scoreStart:h,scoreEnd:m,minScore:g})}l.sort((u,h)=>u.minScore-h.minScore);const f=l[0];f.scoreStart.score<=f.scoreEnd.score?(s.unshift(f.candidate),c=f.scoreStart.direction,o=f.candidate):(s.push(f.candidate),a=f.scoreEnd.direction,i=f.candidate),r.delete(f.candidate)}return s}function vo(t){return Y(t,e=>_t(e,vs(e),pe),"oklab")}function Ln(t,e=!1){return Y(t,function(n){const s=ae(n).slice(0,128).map(o=>{const i=_t(n,o,pe);return{vectors:i,metrics:ue(this.toColors(i))}});return s.sort((o,i)=>o.metrics.totalDistance-i.metrics.totalDistance),e?Ls(s[0].vectors):s[0].vectors},"oklab")}function Lo(t){return Y(t,function(e){const r=ae(e).slice(0,128).map(s=>{const o=_t(e,s,ge);return{vectors:o,metrics:ue(this.toColors(o))}});return r.sort((s,o)=>s.metrics.totalDistance-o.metrics.totalDistance),r[0].vectors},"oklab")}function Ao(t){return Y(t,e=>_t(e,le(e),pe),"oklab")}function Eo(t){return Y(t,e=>_t(e,le(e),ge),"oklab")}function No(t){const{Kl:e,Kc:n,Kh:r}=me(t),s=[e,n,r],o=(i,c,a)=>ge(i,c,a,s);return Y(t,i=>_t(i,le(i),o),"oklab")}const D={PCA:["PCA","Principal component analysis","https://en.wikipedia.org/wiki/Principal_component_analysis"],HIL:["HIL","Hilbert curve","https://en.wikipedia.org/wiki/Hilbert_curve"],GEN:["GEN","Genetic algorithm","https://en.wikipedia.org/wiki/Genetic_algorithm"],TSP:["TSP","Travelling salesman problem","https://en.wikipedia.org/wiki/Travelling_salesman_problem"],NNA:["NNA","Nearest neighbour algorithm","https://en.wikipedia.org/wiki/Nearest_neighbour_algorithm"],"2-OPT":["2-OPT","2-opt","https://en.wikipedia.org/wiki/2-opt"],MOM:["MON","Greedy with momentum"," https://en.wikipedia.org/wiki/Greedy_algorithm"]},S={RGB:["RGB","https://en.wikipedia.org/wiki/RGB_color_model"],LAB:["CIELAB","https://en.wikipedia.org/wiki/CIELAB_color_space"],OKLAB:["Oklab","https://en.wikipedia.org/wiki/Oklab_color_space"],HSL:["HSL","https://en.wikipedia.org/wiki/HSL_and_HSV"],HCL:["HCL","https://en.wikipedia.org/wiki/HCL_color_space"],OKLCH:["Oklch","https://en.wikipedia.org/wiki/Oklab_color_space"],CMYK:["CMYK","https://en.wikipedia.org/wiki/CMYK_color_model"]},it={DE:["DE","Delta E","http://www.brucelindbloom.com/index.html?Eqn_DeltaE_CIE2000.html"]},An=[{name:"Original",fn:t=>t,speed:0,mid:"Original",description:{model:null}},{name:"HSL",fn:io,speed:2,mid:"HSL",description:{model:S.HSL}},{name:"HCL",fn:co,speed:2,mid:"HCL",description:{model:S.HCL}},{name:"Oklch",fn:ao,speed:3,mid:"Oklch",description:{model:S.OKLCH}},{name:"Oklab",fn:lo,speed:3,mid:"Oklab",description:{model:S.OKLAB}},{name:"Lab",fn:fo,speed:2,mid:"Lab",description:{model:S.LAB}},{name:"RGB",fn:uo,speed:1,mid:"RGB",description:{model:S.RGB}},{name:"CMYK",fn:ho,speed:1,mid:"CMYK",description:{model:S.CMYK}},{name:"NNA(Delta E)",fn:Ct,speed:3,mid:"NNA(DE) Lab",description:{method:D.NNA,model:S.LAB,diff:it.DE}},{name:"NNA(Delta E+)",fn:no,speed:3,mid:"NNA(DE+) Lab",description:{method:D.NNA,model:S.LAB,diff:it.DE}},{name:"NNA(Delta E++)",fn:ro,speed:3,mid:"NNA(DE++) Lab",description:{method:D.NNA,model:S.LAB,diff:it.DE}},{name:"NNA(Delta E+1)",fn:Qs,speed:3,mid:"NNA(DE+1) Lab",description:{method:D.NNA,model:S.LAB,diff:it.DE}},{name:"NNA(Delta E+2)",fn:to,speed:3,mid:"NNA(DE+2) Lab",description:{method:D.NNA,model:S.LAB,diff:it.DE}},{name:"TSP(Delta E) Lab",fn:Fs,speed:5,mid:"TSP(DE)-Lab",description:{method:[D.TSP,D["2-OPT"]],model:S.LAB,diff:it.DE}},{name:"TSP(PCA(Delta E+)) Lab",fn:Vs,speed:2,mid:"TSP(PCA(DE+))-Lab",description:{method:[D.TSP,D["2-OPT"],D.PCA],model:S.LAB,diff:it.DE}},{name:"MOM(Closest) Oklab",fn:vo,speed:1,mid:"MOM(Closest)-Oklab",description:{method:D.MOM,model:S.OKLAB}},{name:"MOM(Closest+) Oklab",fn:Ln,speed:3,mid:"MOM(Closest+)-Oklab",description:{method:D.MOM,model:S.OKLAB}},{name:"TSP(MOM(Closest+)) Oklab",fn:t=>Ln(t,!0),speed:3,mid:"TSP(MOM(Closest+))-Oklab",description:{method:D.MOM,model:S.OKLAB}},{name:"MOM(Closest+, Delta E) Oklab",fn:Lo,speed:3,mid:"MOM(Closest+,DE)-Oklab",description:{method:D.MOM,model:S.OKLAB}},{name:"MOM(Inlinest) Oklab",fn:Ao,speed:3,mid:"MOM(Inlinest)-Oklab",description:{method:D.MOM,model:S.OKLAB}},{name:"MOM(Inlinest, Delta E) Oklab",fn:Eo,speed:4,mid:"MOM(Inlinest,DE)-Oklab",description:{method:D.MOM,model:S.OKLAB,diff:it.DE}},{name:"MOM(Inlinest, Delta E++) Oklab",fn:No,speed:4,mid:"MOM(Inlinest,DE++)-Oklab",description:{method:D.MOM,model:S.OKLAB,diff:it.DE}},{name:"Genetic Oklab",fn:mn,speed:5,mid:"GEN-Oklab",description:{method:D.GEN,model:S.OKLAB}},{name:"Genetic3 Oklab",fn:zs,speed:6,mid:"GEN3-Oklab",description:{method:D.GEN,model:S.OKLAB}},{name:"Hilbert RGB",fn:Ns,speed:1,mid:"HIL-RGB",description:{method:D.HIL,model:S.RGB}},{name:"Hilbert Lab",fn:xs,speed:1,mid:"HIL-Lab",description:{method:D.HIL,model:S.LAB}},{name:"Hilbert Oklab",fn:Os,speed:1,mid:"HIL-Oklab",description:{method:D.HIL,model:S.OKLAB}},{name:"PCA RGB",fn:Ys,speed:1,mid:"PCA-RGB",description:{method:D.PCA,model:S.RGB}},{name:"PCA Lab",fn:qs,speed:1,mid:"PCA-Lab",description:{method:D.PCA,model:S.LAB}},{name:"PCA Oklab",fn:pn,speed:1,mid:"PCA-Oklab",description:{method:D.PCA,model:S.OKLAB}},{name:"Spiral",fn:kn,speed:1,mid:"SPI",description:{}},{name:"Cylindrical",fn:Mn,speed:1,mid:"CYL",description:{}},{name:"Cluster",fn:Cn,speed:1,mid:"CL",description:{}},{name:"K-means",fn:_n,speed:1,mid:"KM",description:{}},{name:"DBSCAN",fn:vn,speed:1,mid:"DBSCAN",description:{}}];function Oo(t){return t.reduce((e,{values:n})=>e.flatMap(r=>n.map(s=>[...r,s])),[[]])}const En=An.reduce((t,e)=>{if(e.fn.params){const n=Oo(e.fn.params);for(const r of n)t.push({...e,name:`${e.name} [${r.join(",")}]`,mid:`${e.mid}:[${r.join(",")}]`,fn:s=>e.fn.call(null,s,...r)})}else t.push(e);return t},[]);function Nn(t,e){const n=new Set(t.map(s=>s.name)),r=new Set(t.map(s=>s.mid));if(n.size!==t.length)throw new Error(`Duplicated ${e} name`);if(r.size!==t.length)throw new Error(`Duplicated ${e} mid`)}Nn(An,"raw"),Nn(En,"sorting");async function xo(t){const e=performance.now(),n=await t(),r=performance.now()-e;return{result:n,elapsed:r}}self.onmessage=async t=>{const{sortName:e,getPaletteType:n,palette:r}=t.data;if(e){const s=En.find(f=>f.name===e).fn,{result:o,elapsed:i}=await xo(async()=>await s(r)),c=V(o[0]),a=V(o.at(-1));c[0]>a[0]&&o.reverse();const l=Ds(o);self.postMessage({result:o,metrics:l,elapsed:i})}else n&&self.postMessage(me(n))}})();
